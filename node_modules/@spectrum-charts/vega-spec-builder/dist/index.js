/*! For license information please see index.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@spectrum-charts/constants"),require("@spectrum-charts/themes"),require("@spectrum-charts/utils")):"function"==typeof define&&define.amd?define(["@spectrum-charts/constants","@spectrum-charts/themes","@spectrum-charts/utils"],t):"object"==typeof exports?exports.spectrumChartsVegaSpecBuilder=t(require("@spectrum-charts/constants"),require("@spectrum-charts/themes"),require("@spectrum-charts/utils")):e.spectrumChartsVegaSpecBuilder=t(e["@spectrum-charts/constants"],e["@spectrum-charts/themes"],e["@spectrum-charts/utils"])}(this,((e,t,a)=>(()=>{"use strict";var n={2743:e=>{var t=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===a}(e)}(e)},a="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function n(e,t){return!1!==t.clone&&t.isMergeableObject(e)?l((a=e,Array.isArray(a)?[]:{}),e,t):e;var a}function i(e,t,a){return e.concat(t).map((function(e){return n(e,a)}))}function r(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return Object.propertyIsEnumerable.call(e,t)})):[]}(e))}function o(e,t){try{return t in e}catch(e){return!1}}function l(e,a,s){(s=s||{}).arrayMerge=s.arrayMerge||i,s.isMergeableObject=s.isMergeableObject||t,s.cloneUnlessOtherwiseSpecified=n;var d=Array.isArray(a);return d===Array.isArray(e)?d?s.arrayMerge(e,a,s):function(e,t,a){var i={};return a.isMergeableObject(e)&&r(e).forEach((function(t){i[t]=n(e[t],a)})),r(t).forEach((function(r){(function(e,t){return o(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,r)||(o(e,r)&&a.isMergeableObject(t[r])?i[r]=function(e,t){if(!t.customMerge)return l;var a=t.customMerge(e);return"function"==typeof a?a:l}(r,a)(e[r],t[r],a):i[r]=n(t[r],a))})),i}(e,a,s):n(a,s)}l.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,a){return l(e,a,t)}),{})};var s=l;e.exports=s},5325:e=>{var t,a=Object.defineProperty,n=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,r=Object.prototype.hasOwnProperty,o={};((e,t)=>{for(var n in t)a(e,n,{get:t[n],enumerable:!0})})(o,{Immer:()=>X,applyPatches:()=>oe,castDraft:()=>de,castImmutable:()=>ce,createDraft:()=>le,current:()=>Z,enableMapSet:()=>ee,enablePatches:()=>Q,finishDraft:()=>se,freeze:()=>$,immerable:()=>s,isDraft:()=>g,isDraftable:()=>m,nothing:()=>l,original:()=>f,produce:()=>ae,produceWithPatches:()=>ne,setAutoFreeze:()=>ie,setUseStrictShallowCopy:()=>re}),e.exports=(t=o,((e,t,o,l)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of i(t))!r.call(e,o)&&undefined!==o&&a(e,o,{get:()=>t[o],enumerable:!(l=n(t,o))||l.enumerable});return e})(a({},"__esModule",{value:!0}),t));var l=Symbol.for("immer-nothing"),s=Symbol.for("immer-draftable"),d=Symbol.for("immer-state");function c(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var u=Object.getPrototypeOf;function g(e){return!!e&&!!e[d]}function m(e){return!!e&&(h(e)||Array.isArray(e)||!!e[s]||!!e.constructor?.[s]||E(e)||_(e))}var p=Object.prototype.constructor.toString();function h(e){if(!e||"object"!=typeof e)return!1;let t=u(e);if(null===t)return!0;let a=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return a===Object||"function"==typeof a&&Function.toString.call(a)===p}function f(e){return g(e)||c(15),e[d].t}function y(e,t){0===S(e)?Reflect.ownKeys(e).forEach((a=>{t(a,e[a],e)})):e.forEach(((a,n)=>t(n,a,e)))}function S(e){let t=e[d];return t?t.o:Array.isArray(e)?1:E(e)?2:_(e)?3:0}function T(e,t){return 2===S(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function b(e,t){return 2===S(e)?e.get(t):e[t]}function v(e,t,a){let n=S(e);2===n?e.set(t,a):3===n?e.add(a):e[t]=a}function E(e){return e instanceof Map}function _(e){return e instanceof Set}function O(e){return e.e||e.t}function L(e,t){if(E(e))return new Map(e);if(_(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);let a=h(e);if(!0===t||"class_only"===t&&!a){let t=Object.getOwnPropertyDescriptors(e);delete t[d];let a=Reflect.ownKeys(t);for(let n=0;n<a.length;n++){let i=a[n],r=t[i];!1===r.writable&&(r.writable=!0,r.configurable=!0),(r.get||r.set)&&(t[i]={configurable:!0,writable:!0,enumerable:r.enumerable,value:e[i]})}return Object.create(u(e),t)}{let t=u(e);if(null!==t&&a)return{...e};let n=Object.create(t);return Object.assign(n,e)}}function $(e,t=!1){return D(e)||g(e)||!m(e)||(S(e)>1&&(e.set=e.add=e.clear=e.delete=A),Object.freeze(e),t&&Object.entries(e).forEach((([e,t])=>$(t,!0)))),e}function A(){c(2)}function D(e){return Object.isFrozen(e)}var I,P={};function x(e){let t=P[e];return t||c(0),t}function R(e,t){P[e]||(P[e]=t)}function M(){return I}function k(e,t){t&&(x("Patches"),e.f=[],e.h=[],e.b=t)}function C(e){H(e),e.a.forEach(j),e.a=null}function H(e){e===I&&(I=e.i)}function F(e){return I=function(e,t){return{a:[],i:e,p:t,P:!0,d:0}}(I,e)}function j(e){let t=e[d];0===t.o||1===t.o?t.x():t.m=!0}function N(e,t){t.d=t.a.length;let a=t.a[0];return void 0!==e&&e!==a?(a[d].s&&(C(t),c(4)),m(e)&&(e=B(t,e),t.i||w(t,e)),t.f&&x("Patches").T(a[d].t,e,t.f,t.h)):e=B(t,a,[]),C(t),t.f&&t.b(t.f,t.h),e!==l?e:void 0}function B(e,t,a){if(D(t))return t;let n=t[d];if(!n)return y(t,((i,r)=>G(e,n,t,i,r,a))),t;if(n.n!==e)return t;if(!n.s)return w(e,n.t,!0),n.t;if(!n.c){n.c=!0,n.n.d--;let t=n.e,i=t,r=!1;3===n.o&&(i=new Set(t),t.clear(),r=!0),y(i,((i,o)=>G(e,n,t,i,o,a,r))),w(e,t,!1),a&&e.f&&x("Patches").g(n,a,e.f,e.h)}return n.e}function G(e,t,a,n,i,r,o){if(g(i)){let o=B(e,i,r&&t&&3!==t.o&&!T(t.r,n)?r.concat(n):void 0);if(v(a,n,o),!g(o))return;e.P=!1}else o&&a.add(i);if(m(i)&&!D(i)){if(!e.p.y&&e.d<1)return;B(e,i),(!t||!t.n.i)&&"symbol"!=typeof n&&Object.prototype.propertyIsEnumerable.call(a,n)&&w(e,i)}}function w(e,t,a=!1){!e.i&&e.p.y&&e.P&&$(t,a)}var V={get(e,t){if(t===d)return e;let a=O(e);if(!T(a,t))return function(e,t,a){let n=z(t,a);return n?"value"in n?n.value:n.get?.call(e.u):void 0}(e,a,t);let n=a[t];return e.c||!m(n)?n:n===W(e.t,t)?(Y(e),e.e[t]=q(n,e)):n},has:(e,t)=>t in O(e),ownKeys:e=>Reflect.ownKeys(O(e)),set(e,t,a){let n=z(O(e),t);if(n?.set)return n.set.call(e.u,a),!0;if(!e.s){let n=W(O(e),t),i=n?.[d];if(i&&i.t===a)return e.e[t]=a,e.r[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(a,n)&&(void 0!==a||T(e.t,t)))return!0;Y(e),K(e)}return e.e[t]===a&&(void 0!==a||t in e.e)||Number.isNaN(a)&&Number.isNaN(e.e[t])||(e.e[t]=a,e.r[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==W(e.t,t)||t in e.t?(e.r[t]=!1,Y(e),K(e)):delete e.r[t],e.e&&delete e.e[t],!0),getOwnPropertyDescriptor(e,t){let a=O(e),n=Reflect.getOwnPropertyDescriptor(a,t);return n&&{writable:!0,configurable:1!==e.o||"length"!==t,enumerable:n.enumerable,value:a[t]}},defineProperty(){c(11)},getPrototypeOf:e=>u(e.t),setPrototypeOf(){c(12)}},U={};function W(e,t){let a=e[d];return(a?O(a):e)[t]}function z(e,t){if(!(t in e))return;let a=u(e);for(;a;){let e=Object.getOwnPropertyDescriptor(a,t);if(e)return e;a=u(a)}}function K(e){e.s||(e.s=!0,e.i&&K(e.i))}function Y(e){e.e||(e.e=L(e.t,e.n.p.S))}y(V,((e,t)=>{U[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),U.deleteProperty=function(e,t){return U.set.call(this,e,t,void 0)},U.set=function(e,t,a){return V.set.call(this,e[0],t,a,e[0])};var X=class{constructor(e){this.y=!0,this.S=!1,this.produce=(e,t,a)=>{if("function"==typeof e&&"function"!=typeof t){let a=t;t=e;let n=this;return function(e=a,...i){return n.produce(e,(e=>t.call(this,e,...i)))}}let n;if("function"!=typeof t&&c(6),void 0!==a&&"function"!=typeof a&&c(7),m(e)){let i=F(this),r=q(e,void 0),o=!0;try{n=t(r),o=!1}finally{o?C(i):H(i)}return k(i,a),N(n,i)}if(!e||"object"!=typeof e){if(n=t(e),void 0===n&&(n=e),n===l&&(n=void 0),this.y&&$(n,!0),a){let t=[],i=[];x("Patches").T(e,n,t,i),a(t,i)}return n}c(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...a)=>this.produceWithPatches(t,(t=>e(t,...a)));let a,n;return[this.produce(e,t,((e,t)=>{a=e,n=t})),a,n]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){m(e)||c(8),g(e)&&(e=Z(e));let t=F(this),a=q(e,void 0);return a[d].l=!0,H(t),a}finishDraft(e,t){let a=e&&e[d];(!a||!a.l)&&c(9);let{n}=a;return k(n,t),N(void 0,n)}setAutoFreeze(e){this.y=e}setUseStrictShallowCopy(e){this.S=e}applyPatches(e,t){let a;for(a=t.length-1;a>=0;a--){let n=t[a];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}a>-1&&(t=t.slice(a+1));let n=x("Patches").A;return g(e)?n(e,t):this.produce(e,(e=>n(e,t)))}};function q(e,t){let a=E(e)?x("MapSet").I(e,t):_(e)?x("MapSet").D(e,t):function(e,t){let a=Array.isArray(e),n={o:a?1:0,n:t?t.n:M(),s:!1,c:!1,r:{},i:t,t:e,u:null,e:null,x:null,l:!1},i=n,r=V;a&&(i=[n],r=U);let{revoke:o,proxy:l}=Proxy.revocable(i,r);return n.u=l,n.x=o,l}(e,t);return(t?t.n:M()).a.push(a),a}function Z(e){return g(e)||c(10),J(e)}function J(e){if(!m(e)||D(e))return e;let t,a=e[d];if(a){if(!a.s)return a.t;a.c=!0,t=L(e,a.n.p.S)}else t=L(e,!0);return y(t,((e,a)=>{v(t,e,J(a))})),a&&(a.c=!1),t}function Q(){let e="replace",t="add",a="remove";function n(e){if(!m(e))return e;if(Array.isArray(e))return e.map(n);if(E(e))return new Map(Array.from(e.entries()).map((([e,t])=>[e,n(t)])));if(_(e))return new Set(Array.from(e).map(n));let t=Object.create(u(e));for(let a in e)t[a]=n(e[a]);return T(e,s)&&(t[s]=e[s]),t}function i(e){return g(e)?n(e):e}R("Patches",{A:function(i,r){return r.forEach((r=>{let{path:o,op:l}=r,s=i;for(let e=0;e<o.length-1;e++){let t=S(s),a=o[e];"string"!=typeof a&&"number"!=typeof a&&(a=""+a),(0===t||1===t)&&("__proto__"===a||"constructor"===a)&&c(19),"function"==typeof s&&"prototype"===a&&c(19),s=b(s,a),"object"!=typeof s&&c(18,o.join("/"))}let d=S(s),u=n(r.value),g=o[o.length-1];switch(l){case e:switch(d){case 2:return s.set(g,u);case 3:c(16);default:return s[g]=u}case t:switch(d){case 1:return"-"===g?s.push(u):s.splice(g,0,u);case 2:return s.set(g,u);case 3:return s.add(u);default:return s[g]=u}case a:switch(d){case 1:return s.splice(g,1);case 2:return s.delete(g);case 3:return s.delete(r.value);default:return delete s[g]}default:c(17)}})),i},g:function(n,r,o,l){switch(n.o){case 0:case 2:return function(n,r,o,l){let{t:s,e:d}=n;y(n.r,((n,c)=>{let u=b(s,n),g=b(d,n),m=c?T(s,n)?e:t:a;if(u===g&&m===e)return;let p=r.concat(n);o.push(m===a?{op:m,path:p}:{op:m,path:p,value:g}),l.push(m===t?{op:a,path:p}:m===a?{op:t,path:p,value:i(u)}:{op:e,path:p,value:i(u)})}))}(n,r,o,l);case 1:return function(n,r,o,l){let{t:s,r:d}=n,c=n.e;c.length<s.length&&([s,c]=[c,s],[o,l]=[l,o]);for(let t=0;t<s.length;t++)if(d[t]&&c[t]!==s[t]){let a=r.concat([t]);o.push({op:e,path:a,value:i(c[t])}),l.push({op:e,path:a,value:i(s[t])})}for(let e=s.length;e<c.length;e++){let a=r.concat([e]);o.push({op:t,path:a,value:i(c[e])})}for(let e=c.length-1;s.length<=e;--e){let t=r.concat([e]);l.push({op:a,path:t})}}(n,r,o,l);case 3:return function(e,n,i,r){let{t:o,e:l}=e,s=0;o.forEach((e=>{if(!l.has(e)){let o=n.concat([s]);i.push({op:a,path:o,value:e}),r.unshift({op:t,path:o,value:e})}s++})),s=0,l.forEach((e=>{if(!o.has(e)){let o=n.concat([s]);i.push({op:t,path:o,value:e}),r.unshift({op:a,path:o,value:e})}s++}))}(n,r,o,l)}},T:function(t,a,n,i){n.push({op:e,path:[],value:a===l?void 0:a}),i.push({op:e,path:[],value:t})}})}function ee(){class e extends Map{constructor(e,t){super(),this[d]={o:2,i:t,n:t?t.n:M(),s:!1,c:!1,e:void 0,r:void 0,t:e,u:this,l:!1,m:!1}}get size(){return O(this[d]).size}has(e){return O(this[d]).has(e)}set(e,a){let n=this[d];return i(n),(!O(n).has(e)||O(n).get(e)!==a)&&(t(n),K(n),n.r.set(e,!0),n.e.set(e,a),n.r.set(e,!0)),this}delete(e){if(!this.has(e))return!1;let a=this[d];return i(a),t(a),K(a),a.t.has(e)?a.r.set(e,!1):a.r.delete(e),a.e.delete(e),!0}clear(){let e=this[d];i(e),O(e).size&&(t(e),K(e),e.r=new Map,y(e.t,(t=>{e.r.set(t,!1)})),e.e.clear())}forEach(e,t){O(this[d]).forEach(((a,n,i)=>{e.call(t,this.get(n),n,this)}))}get(e){let a=this[d];i(a);let n=O(a).get(e);if(a.c||!m(n)||n!==a.t.get(e))return n;let r=q(n,a);return t(a),a.e.set(e,r),r}keys(){return O(this[d]).keys()}values(){let e=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{let t=e.next();return t.done?t:{done:!1,value:this.get(t.value)}}}}entries(){let e=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{let t=e.next();if(t.done)return t;let a=this.get(t.value);return{done:!1,value:[t.value,a]}}}}[Symbol.iterator](){return this.entries()}}function t(e){e.e||(e.r=new Map,e.e=new Map(e.t))}class a extends Set{constructor(e,t){super(),this[d]={o:3,i:t,n:t?t.n:M(),s:!1,c:!1,e:void 0,t:e,u:this,a:new Map,m:!1,l:!1}}get size(){return O(this[d]).size}has(e){let t=this[d];return i(t),t.e?!!(t.e.has(e)||t.a.has(e)&&t.e.has(t.a.get(e))):t.t.has(e)}add(e){let t=this[d];return i(t),this.has(e)||(n(t),K(t),t.e.add(e)),this}delete(e){if(!this.has(e))return!1;let t=this[d];return i(t),n(t),K(t),t.e.delete(e)||!!t.a.has(e)&&t.e.delete(t.a.get(e))}clear(){let e=this[d];i(e),O(e).size&&(n(e),K(e),e.e.clear())}values(){let e=this[d];return i(e),n(e),e.e.values()}entries(){let e=this[d];return i(e),n(e),e.e.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(e,t){let a=this.values(),n=a.next();for(;!n.done;)e.call(t,n.value,n.value,this),n=a.next()}}function n(e){e.e||(e.e=new Set,e.t.forEach((t=>{if(m(t)){let a=q(t,e);e.a.set(t,a),e.e.add(a)}else e.e.add(t)})))}function i(e){e.m&&c(3,JSON.stringify(O(e)))}R("MapSet",{I:function(t,a){return new e(t,a)},D:function(e,t){return new a(e,t)}})}var te=new X,ae=te.produce,ne=te.produceWithPatches.bind(te),ie=te.setAutoFreeze.bind(te),re=te.setUseStrictShallowCopy.bind(te),oe=te.applyPatches.bind(te),le=te.createDraft.bind(te),se=te.finishDraft.bind(te);function de(e){return e}function ce(e){return e}},2812:(e,t,a)=>{e.exports=a(5325)},9868:function(e,t,a){var n=this&&this.__rest||function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.addAreaMarks=t.setScales=t.addHighlightedItemEvents=t.addSignals=t.getAreaHighlightedData=t.addData=t.addArea=void 0;const i=a(2812),r=a(9633),o=a(1274),l=a(8365),s=a(795),d=a(7441),c=a(6924),u=a(9036),g=a(1422),m=a(2923);t.addArea=(0,i.produce)(((e,a)=>{var i,o,s,d,{chartPopovers:c=[],chartTooltips:u=[],color:g=r.DEFAULT_COLOR,colorScheme:m=r.DEFAULT_COLOR_SCHEME,dimension:p=r.DEFAULT_TIME_DIMENSION,index:h=0,metric:f=r.DEFAULT_METRIC,metricStart:y,metricEnd:S,name:T,opacity:b=.8,scaleType:v="time"}=a,E=n(a,["chartPopovers","chartTooltips","color","colorScheme","dimension","index","metric","metricStart","metricEnd","name","opacity","scaleType"]);const _=Object.assign({chartPopovers:c,chartTooltips:u,color:g,colorScheme:m,dimension:p,index:h,metric:f,name:(0,l.toCamelCase)(T||`area${h}`),scaleType:v,opacity:b,metricStart:y,metricEnd:S},E);return!y&&!S||y&&S||(console.error(`${S?"metricEnd":"metricStart"} is defined but ${S?"metricStart":"metricEnd"} is not. Both must be defined in order to use the "start and end" method. Defaulting back to 'metric = ${f}'`),_.metricEnd=void 0,_.metricStart=void 0),e.data=(0,t.addData)(null!==(i=e.data)&&void 0!==i?i:[],_),e.signals=(0,t.addSignals)(null!==(o=e.signals)&&void 0!==o?o:[],_),e.scales=(0,t.setScales)(null!==(s=e.scales)&&void 0!==s?s:[],_),e.marks=(0,t.addAreaMarks)(null!==(d=e.marks)&&void 0!==d?d:[],_),e})),t.addData=(0,i.produce)(((e,a)=>{var n,i;const{color:o,dimension:l,highlightedItem:u,metric:g,metricEnd:m,metricStart:p,name:h,order:f,scaleType:y}=a;if("time"===y){const t=(0,d.getTableData)(e);t.transform=(0,d.addTimeTransform)(null!==(n=t.transform)&&void 0!==n?n:[],l)}if(!m||!p){const t=(0,d.getFilteredTableData)(e);t.transform=[...null!==(i=t.transform)&&void 0!==i?i:[],{type:"stack",groupby:[l],field:g,sort:(0,d.getTransformSort)(f),as:[`${g}0`,`${g}1`]}]}if((0,c.isInteractive)(a)||void 0!==u){const n=(0,c.hasPopover)(a),i=(0,c.hasTooltip)(a);e.push((0,t.getAreaHighlightedData)(h,a.idKey,i,n,(0,s.isHighlightedByGroup)(a))),n&&e.push({name:`${h}_selectedDataSeries`,source:r.FILTERED_TABLE,transform:[{type:"filter",expr:`isValid(${r.SELECTED_SERIES}) && ${r.SELECTED_SERIES} === datum.${o}`}]})}(0,s.addTooltipData)(e,a,!1)})),t.getAreaHighlightedData=(e,t,a,n,i)=>{let o="";return i?o+=`${e}_controlledHoveredGroup === datum.${e}_highlightGroupId`:(o+=`isArray(${r.HIGHLIGHTED_ITEM}) && indexof(${r.HIGHLIGHTED_ITEM}, datum.${t}) > -1  || ${r.HIGHLIGHTED_ITEM} === datum.${t}`,a&&(o=`${e}_controlledHoveredId === datum.${t} || ${o}`)),n&&(o=`isValid(${r.SELECTED_ITEM}) && ${r.SELECTED_ITEM} === datum.${t} || !isValid(${r.SELECTED_ITEM}) && ${o}`),{name:`${e}_highlightedData`,source:r.FILTERED_TABLE,transform:[{type:"filter",expr:o}]}},t.addSignals=(0,i.produce)(((e,a)=>{var n;const{chartTooltips:i,name:r}=a;(0,c.isInteractive)(a)&&((0,g.addHighlightedSeriesSignalEvents)(e,r,1,null===(n=i[0])||void 0===n?void 0:n.excludeDataKeys),a.highlightedItem&&(0,t.addHighlightedItemEvents)(e,r),(0,s.isHighlightedByGroup)(a)?e.push((0,g.getControlledHoveredGroupSignal)(r)):e.push((0,g.getControlledHoveredIdSignal)(r)),(0,s.addTooltipSignals)(e,a))})),t.addHighlightedItemEvents=(e,t)=>{const a=e.find((e=>e.name===r.HIGHLIGHTED_ITEM));a&&(void 0===a.on&&(a.on=[]),a.on.push({events:`@${t}:mouseover`,update:"null"}))},t.setScales=(0,i.produce)(((e,{metric:t,metricEnd:a,metricStart:n,dimension:i,color:o,scaleType:l,padding:s})=>((0,u.addContinuousDimensionScale)(e,{scaleType:l,dimension:i,padding:s}),(0,u.addFieldToFacetScaleDomain)(e,r.COLOR_SCALE,o),a&&n||(n=`${t}0`,a=`${t}1`),(0,u.addMetricScale)(e,[n,a]),e))),t.addAreaMarks=(0,i.produce)(((e,t)=>{const{chartPopovers:a,chartTooltips:n,color:i,colorScheme:o,dimension:l,highlightedItem:d,metric:c,name:u,opacity:g,scaleType:y}=t;let{metricStart:S,metricEnd:T}=t,b=!1;return T&&S||(b=!0,S=`${c}0`,T=`${c}1`),e.push({name:`${u}_group`,type:"group",from:{facet:{name:`${u}_facet`,data:r.FILTERED_TABLE,groupby:i}},marks:[(0,m.getAreaMark)({chartPopovers:a,chartTooltips:n,color:i,colorScheme:o,dimension:l,isHighlightedByGroup:(0,s.isHighlightedByGroup)(t),isStacked:b,highlightedItem:d,metricStart:S,metricEnd:T,name:u,opacity:g,scaleType:y}),...p(t)]},...f({chartPopovers:a,name:u,scaleType:y,color:i,dimension:l,metricEnd:T,metricStart:S}),...h(t)),e}));const p=e=>{const{name:t,dimension:a,metric:n,scaleType:i}=e;return(0,c.isInteractive)(e)?[{name:`${t}_anchorPoint`,type:"symbol",from:{data:`${t}_highlightedData`},interactive:!1,encode:{enter:{y:{scale:"yLinear",field:`${n}1`},stroke:{value:"transparent"},fill:{value:"transparent"}},update:{x:(0,m.getX)(i,a)}}}]:[]},h=e=>{const{name:t,dimension:a,highlightedItem:n,metric:i,scaleType:o,color:l}=e;if(!(0,c.isInteractive)(e)&&void 0===n)return[];const d=[{name:`${t}_point`,type:"symbol",from:{data:`${t}_highlightedData`},interactive:!1,encode:{enter:{y:{scale:"yLinear",field:`${i}1`},stroke:{scale:r.COLOR_SCALE,field:l},fill:{signal:r.BACKGROUND_COLOR}},update:{x:(0,m.getX)(o,a)}}}];return((0,s.isHighlightedByDimension)(e)||n)&&d.unshift({name:`${t}_rule`,type:"rule",from:{data:`${t}_highlightedData`},interactive:!1,encode:{enter:{y:{value:0},y2:{signal:"height"},strokeWidth:{value:1}},update:{x:(0,m.getX)(o,a)}}}),d},f=({chartPopovers:e,name:t,scaleType:a,color:n,dimension:i,metricEnd:l,metricStart:s})=>e.length?[{name:`${t}_selectBorder`,type:"area",from:{data:`${t}_selectedDataSeries`},interactive:!1,encode:{enter:{y:{scale:"yLinear",field:s},y2:{scale:"yLinear",field:l},fill:{scale:r.COLOR_SCALE,field:n},stroke:{value:o.spectrumColors.light["static-blue"]},strokeWidth:{value:2},strokeJoin:{value:"round"}},update:{x:(0,m.getX)(a,i)}}}]:[]},2923:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getX=t.getAreaOpacity=t.getAreaMark=void 0;const n=a(9633),i=a(6924);function r(e){const{chartPopovers:t,displayOnHover:a,isHighlightedByGroup:r,isMetricRange:o,highlightedItem:l,name:s}=e,d=1/n.HIGHLIGHT_CONTRAST_RATIO;if(o&&a)return[{test:`isValid(${n.HIGHLIGHTED_SERIES}) && ${n.HIGHLIGHTED_SERIES} === datum.${n.SERIES_ID}`,value:1},{test:`isValid(${n.HIGHLIGHTED_ITEM}) && indexof(pluck(data('${s}_highlightedData'), '${n.SERIES_ID}'), datum.${n.SERIES_ID}) > -1`},{test:`isValid(${n.SELECTED_SERIES}) && ${n.SELECTED_SERIES} === datum.${n.SERIES_ID}`,value:1},{value:0}];if(!(0,i.isInteractive)(e)&&!l)return[n.DEFAULT_OPACITY_RULE];const c=[];return r&&c.push({test:`indexof(pluck(data('${s}_highlightedData'), '${n.SERIES_ID}'), datum.${n.SERIES_ID}) !== -1`,value:1}),!o&&(null==t?void 0:t.length)?[...c,{test:`!isValid(${n.SELECTED_SERIES}) && isValid(${n.HIGHLIGHTED_SERIES}) && ${n.HIGHLIGHTED_SERIES} !== datum.${n.SERIES_ID}`,value:d},{test:`!isValid(${n.SELECTED_SERIES}) && length(data('${s}_highlightedData')) > 0 && indexof(pluck(data('${s}_highlightedData'), '${n.SERIES_ID}'), datum.${n.SERIES_ID}) === -1`,value:d},{test:`isValid(${n.SELECTED_SERIES}) && ${n.SELECTED_SERIES} !== datum.${n.SERIES_ID}`,value:d},n.DEFAULT_OPACITY_RULE]:[...c,{test:`isValid(${n.HIGHLIGHTED_SERIES}) && ${n.HIGHLIGHTED_SERIES} !== datum.${n.SERIES_ID}`,value:d},{test:`length(data('${s}_highlightedData')) > 0 && indexof(pluck(data('${s}_highlightedData'), '${n.SERIES_ID}'), datum.${n.SERIES_ID}) === -1`,value:d},n.DEFAULT_OPACITY_RULE]}t.getAreaMark=(e,a=`${e.name}_facet`)=>{const{name:n,chartPopovers:o,chartTooltips:l,color:s,colorScheme:d,metricStart:c,metricEnd:u,isStacked:g,scaleType:m,dimension:p,opacity:h}=e;return{name:n,description:n,type:"area",from:{data:a},interactive:(0,i.isInteractive)(e),encode:{enter:Object.assign({y:{scale:"yLinear",field:c},y2:{scale:"yLinear",field:u},fill:(0,i.getColorProductionRule)(s,d),tooltip:(0,i.getTooltip)(null!=l?l:[],n)},(0,i.getBorderStrokeEncodings)(g,!0)),update:{x:(0,t.getX)(m,p),cursor:(0,i.getCursor)(null!=o?o:[]),fillOpacity:{value:h},opacity:r(e)}}}},t.getAreaOpacity=r,t.getX=(e,t)=>"time"===e?{scale:"xTime",field:n.DEFAULT_TRANSFORMED_TIME_DIMENSION}:"linear"===e?{scale:"xLinear",field:t}:{scale:"xPoint",field:t}},843:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEncodedLabelAnchor=t.getAxisLabelsEncoding=t.getLabelFormat=t.getLabelOffset=t.getLabelBaseline=t.getLabelAngle=t.labelIsParallelToAxis=t.getLabelAnchor=t.getLabelAnchorValues=t.getControlledLabelAnchorValues=t.getTimeLabelFormats=t.getLabelValue=void 0;const n=a(4563),i=a(2755);t.getLabelValue=e=>"object"==typeof e?e.value:e,t.getTimeLabelFormats=e=>{switch(e){case"minute":return{secondaryLabelFormat:"%-I:%M %p",primaryLabelFormat:"%b %-d",tickCount:"minute"};case"hour":return{secondaryLabelFormat:"%-I %p",primaryLabelFormat:"%b %-d",tickCount:"hour"};case"day":default:return{secondaryLabelFormat:"%-d",primaryLabelFormat:"%b",tickCount:"day"};case"week":return{secondaryLabelFormat:"%-d",primaryLabelFormat:"%b",tickCount:"week"};case"month":return{secondaryLabelFormat:"%b",primaryLabelFormat:"%Y",tickCount:"month"};case"quarter":return{secondaryLabelFormat:"Q%q",primaryLabelFormat:"%Y",tickCount:{interval:"month",step:3}}}},t.getControlledLabelAnchorValues=(e,a,n)=>n?(0,t.getLabelAnchor)(e,a,n):{align:void 0,baseline:void 0},t.getLabelAnchorValues=(e,a,n,i,r)=>{const{align:o,baseline:l}=(0,t.getLabelAnchor)(e,a,n);return{labelAlign:null!=i?i:o,labelBaseline:null!=r?r:l}},t.getLabelAnchor=(e,a,n)=>{let i,r;return(0,t.labelIsParallelToAxis)(e,a)?(i={start:"left",center:"center",end:"right"}[n],r=["top","left"].includes(e)?"bottom":"top"):(r={start:"top",center:"middle",end:"bottom"}[n],i=["bottom","left"].includes(e)?"right":"left"),{align:i,baseline:r}},t.labelIsParallelToAxis=(e,t)=>(["top","bottom"].includes(e)?"horizontal":"vertical")===t,t.getLabelAngle=e=>"horizontal"===e?0:270,t.getLabelBaseline=(e,t,a)=>{if(a)return a;if(e&&(0,i.isVerticalAxis)(t))switch(e){case"start":return"top";case"end":return"bottom";default:return"middle"}},t.getLabelOffset=(e,t,a)=>{if(void 0!==a)return a;switch(e){case"start":return{signal:`bandwidth('${t}') / -2`};case"end":return{signal:`bandwidth('${t}') / 2`};default:return}},t.getLabelFormat=({labelFormat:e,labelOrientation:a,numberFormat:i,position:r,truncateLabels:o,currencyLocale:l,currencyCode:s},d)=>"percentage"===e?[{test:"isNumber(datum.value)",signal:"format(datum.value, '~%')"},{signal:"datum.value"}]:"duration"===e?{signal:"formatTimeDurationLabels(datum)"}:[...(0,n.getTextNumberFormat)(i,void 0,l,s),...o&&d.includes("Band")&&(0,t.labelIsParallelToAxis)(r,a)?[{signal:'truncateText(datum.value, bandwidth("xBand")/(1- paddingInner), "normal", 14)'}]:[{signal:"datum.value"}]],t.getAxisLabelsEncoding=(e,a,n,i,r,o)=>({update:Object.assign({text:[{test:`indexof(pluck(${o}, 'value'), datum.value) !== -1`,signal:`${o}[indexof(pluck(${o}, 'value'), datum.value)].${n}`},{signal:"datum.value"}],fontWeight:[{test:`indexof(pluck(${o}, 'value'), datum.value) !== -1 && ${o}[indexof(pluck(${o}, 'value'), datum.value)].fontWeight`,signal:`${o}[indexof(pluck(${o}, 'value'), datum.value)].fontWeight`},{value:a}]},(0,t.getEncodedLabelAnchor)(r,o,i,e))}),t.getEncodedLabelAnchor=(e,a,n,i)=>{const r=`indexof(pluck(${a}, 'value'), datum.value) !== -1 && ${a}[indexof(pluck(${a}, 'value'), datum.value)]`,o=`${a}[indexof(pluck(${a}, 'value'), datum.value)]`,{align:l,baseline:s}=(0,t.getLabelAnchor)(e,n,i);return{align:[{test:`${r}.align`,signal:`${o}.align`},{value:l}],baseline:[{test:`${r}.baseline`,signal:`${o}.baseline`},{value:s}]}}},3448:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEncodedLabelBaselineAlign=t.getReferenceLineLabelsEncoding=t.getReferenceLineTextMark=t.getReferenceLineSymbolMark=t.getReferenceLineRuleMark=t.getPositionEncoding=t.getReferenceLineMarks=t.scaleTypeSupportsReferenceLines=t.getReferenceLines=void 0;const n=a(9633),i=a(1274),r=a(9679),o=a(2755);t.getReferenceLines=e=>e.referenceLines.map(((t,a)=>l(t,e,a)));const l=(e,t,a)=>{var i,r;return Object.assign(Object.assign({},e),{color:e.color||"gray-800",colorScheme:t.colorScheme,iconColor:e.iconColor||n.DEFAULT_FONT_COLOR,labelColor:e.labelColor||n.DEFAULT_FONT_COLOR,labelFontWeight:null!==(i=e.labelFontWeight)&&void 0!==i?i:n.DEFAULT_LABEL_FONT_WEIGHT,layer:null!==(r=e.layer)&&void 0!==r?r:"front",name:`${t.name}ReferenceLine${a}`})};t.scaleTypeSupportsReferenceLines=e=>Boolean(e&&["band","linear","point","time","utc"].includes(e)),t.getReferenceLineMarks=(e,a)=>{const n={back:[],front:[]},i=(0,t.getReferenceLines)(e);for(const r of i){const{layer:i}=r,o=(0,t.getPositionEncoding)(e,r,a);n[i].push((0,t.getReferenceLineRuleMark)(e,r,o),...(0,t.getReferenceLineSymbolMark)(e,r,o),...(0,t.getReferenceLineTextMark)(e,r,o))}return n},t.getPositionEncoding=({scaleType:e},{value:t,position:a},n)=>{const i="string"==typeof t?`'${t}'`:t,r=`paddingInner * bandwidth('${n}') / (2 * (1 - paddingInner))`;return"band"===e?"before"===a?{signal:`scale('${n}', ${i}) - ${r}`}:"after"===a?{signal:`scale('${n}', ${i}) + bandwidth('${n}') + ${r}`}:{signal:`scale('${n}', ${i}) + bandwidth('${n}') / 2`}:{scale:n,value:t}},t.getReferenceLineRuleMark=({position:e,ticks:t},{color:a,colorScheme:n,name:r},o)=>{const l=t?9:0,s={top:{x:o,y:{value:-l},y2:{signal:"height"}},bottom:{x:o,y:{value:0},y2:{signal:`height + ${l}`}},left:{x:{value:-l},x2:{signal:"width"},y:o},right:{x:{value:0},x2:{signal:`width + ${l}`},y:o}};return{name:r,type:"rule",interactive:!1,encode:{enter:{stroke:{value:(0,i.getColorValue)(a,n)}},update:Object.assign({},s[e])}}};const s=(e,t,a)=>({top:{x:t,y:{value:-e}},bottom:{x:t,y:{signal:`height + ${e}`}},left:{x:{value:-e},y:Object.assign(Object.assign({},t),{offset:a})},right:{x:{signal:`width + ${e}`},y:Object.assign(Object.assign({},t),{offset:a})}});t.getReferenceLineSymbolMark=({colorScheme:e,position:t},{icon:a,iconColor:n,name:o},l)=>{if(!a)return[];const d=s(24,l);return[{name:`${o}_symbol`,type:"symbol",encode:{enter:{shape:{value:(0,r.getPathFromIcon)(a)},size:{value:324},fill:{value:(0,i.getColorValue)(n,e)}},update:Object.assign({},d[t])}}]},t.getReferenceLineTextMark=(e,a,n)=>{const{label:i,name:r}=a;return i?[{name:`${r}_label`,type:"text",encode:Object.assign({},(0,t.getReferenceLineLabelsEncoding)(e,Object.assign(Object.assign({},a),{label:i}),n))}]:[]},t.getReferenceLineLabelsEncoding=({position:e},{colorScheme:a,icon:n,label:r,labelColor:l,labelFontWeight:d},c)=>{const u=n?48:26,g=(0,o.isVerticalAxis)(e)&&n?24:12,m=s(u,c,g);return{update:Object.assign(Object.assign({text:[{value:r}],fontWeight:[{value:d}],fill:{value:(0,i.getColorValue)(l,a)}},(0,t.getEncodedLabelBaselineAlign)(e)),m[e])}},t.getEncodedLabelBaselineAlign=e=>{switch(e){case"top":case"bottom":return{align:{value:"center"}};case"left":case"right":return{baseline:{value:"center"}}}}},8740:function(e,t,a){var n=this&&this.__rest||function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.setAxisBaseline=t.addAxesMarks=t.addAxes=t.getLabelSignalValue=t.addAxisSignals=t.addAxisData=t.addAxis=void 0;const i=a(2812),r=a(9633),o=a(4785),l=a(1422),s=a(843),d=a(3448),c=a(4334),u=a(2755);function g(e,t=!1){return Object.assign(Object.assign({},e),{domain:t,domainWidth:2})}t.addAxis=(0,i.produce)(((e,a)=>{var i,o,l,s,d,g,{name:m,axisAnnotations:p=[],baseline:h=!1,baselineOffset:f=0,colorScheme:y=r.DEFAULT_COLOR_SCHEME,granularity:S=r.DEFAULT_GRANULARITY,grid:T=!1,hideDefaultLabels:b=!1,index:v=0,labelAlign:E=r.DEFAULT_LABEL_ALIGN,labelFontWeight:_=r.DEFAULT_LABEL_FONT_WEIGHT,labelOrientation:O=r.DEFAULT_LABEL_ORIENTATION,labels:L=[],numberFormat:$="shortNumber",position:A,range:D,referenceLines:I=[],subLabels:P=[],ticks:x=!1}=a,R=n(a,["name","axisAnnotations","baseline","baselineOffset","colorScheme","granularity","grid","hideDefaultLabels","index","labelAlign","labelFontWeight","labelOrientation","labels","numberFormat","position","range","referenceLines","subLabels","ticks"]);const M=(0,u.getScale)(null!==(i=e.scales)&&void 0!==i?i:[],A),k=m||M.name,C=M.type,H=(0,u.getOpposingScaleType)(null!==(o=e.scales)&&void 0!==o?o:[],A),F=Object.assign({axisAnnotations:p,baseline:h,baselineOffset:f,colorScheme:y,granularity:S,grid:T,hideDefaultLabels:b,index:v,labelAlign:E,labelFontWeight:_,labelOrientation:O,labels:L,name:`axis${v}`,numberFormat:$,position:A,range:D,referenceLines:I,subLabels:P,ticks:x,scaleType:null!=C?C:"linear"},R);return e.data=(0,t.addAxisData)(null!==(l=e.data)&&void 0!==l?l:[],Object.assign(Object.assign({},F),{scaleType:null!=C?C:"linear"})),e.signals=(0,t.addAxisSignals)(null!==(s=e.signals)&&void 0!==s?s:[],F),!D||"linear"!==C&&"time"!==C||(M.domain=D),e.axes=(0,t.addAxes)(null!==(d=e.axes)&&void 0!==d?d:[],Object.assign(Object.assign({},F),{scaleName:k,opposingScaleType:H,grid:F.grid&&!(0,c.isTrellisedChart)(e)})),e.marks=(0,t.addAxesMarks)(null!==(g=e.marks)&&void 0!==g?g:[],Object.assign(Object.assign({},F),{scaleName:k,opposingScaleType:H})),e})),t.addAxisData=(0,i.produce)(((e,t)=>{(0,o.getAxisAnnotationsFromChildren)(t).forEach((t=>{(0,o.addAxisAnnotationData)(e,t)}))})),t.addAxisSignals=(0,i.produce)(((e,a)=>{const{name:n,labels:i,position:r,subLabels:d,labelOrientation:c}=a;(null==i?void 0:i.length)&&e.push((0,l.getGenericValueSignal)(`${n}_labels`,(0,t.getLabelSignalValue)(i,r,c))),(0,u.hasSubLabels)(a)&&e.push((0,l.getGenericValueSignal)(`${n}_subLabels`,d.map((e=>Object.assign(Object.assign({},e),(0,s.getControlledLabelAnchorValues)(r,c,e.align)))))),(0,o.getAxisAnnotationsFromChildren)(a).forEach((t=>{(0,o.addAxisAnnotationSignals)(e,t)}))})),t.getLabelSignalValue=(e,t,a)=>e.map((e=>{if("object"==typeof e)return Object.assign(Object.assign({},e),(0,s.getControlledLabelAnchorValues)(t,a,e.align))})).filter(Boolean),t.addAxes=(0,i.produce)(((e,t)=>{var{scaleName:a,opposingScaleType:i}=t,r=n(t,["scaleName","opposingScaleType"]);const l=[];r=Object.assign(Object.assign({},r),(0,c.getTrellisAxisOptions)(a));const{baseline:m,labelAlign:p,labelFontWeight:h,labelFormat:f,labelOrientation:y,name:S,position:T}=r;if("time"===f)l.push(...(0,u.getTimeAxes)(a,r));else{const e=(0,u.getDefaultAxis)(r,a);if(r.labels.length){const t=r.labels,a=`${S}_labels`;e.values=t.map((e=>(0,s.getLabelValue)(e))),e.encode={labels:(0,s.getAxisLabelsEncoding)(p,h,"label",y,T,a)}}(0,u.hasSubLabels)(r)&&(e.titlePadding=24,l.push((0,u.getSubLabelAxis)(r,a))),l.unshift(e)}"linear"!==i&&(l[0]=g(l[0],m)),(0,d.scaleTypeSupportsReferenceLines)(r.scaleType)&&(0,d.getReferenceLines)(r).forEach((e=>{var t,n,i;const{label:r,icon:o,value:s,position:d}=e,c=null===(i=null===(n=null===(t=l[0].encode)||void 0===t?void 0:t.labels)||void 0===n?void 0:n.update)||void 0===i?void 0:i.text;!o&&!r||!c||!Array.isArray(c)||d&&"center"!==d||c.unshift({test:`abs(scale('${a}', ${s}) - scale('${a}', datum.value)) < 30`,value:""})})),(0,o.getAxisAnnotationsFromChildren)(r).forEach((e=>{(0,o.addAxisAnnotationAxis)(l,e,a)})),e.push(...l)})),t.addAxesMarks=(0,i.produce)(((e,a)=>{const{baseline:n,baselineOffset:i,opposingScaleType:r,position:l,scaleName:s,scaleType:g}=a;if((0,d.scaleTypeSupportsReferenceLines)(g)){const{back:t,front:n}=(0,d.getReferenceLineMarks)(a,s);e.unshift(...t),e.push(...n)}const m=e.find((e=>{var t;return null===(t=e.name)||void 0===t?void 0:t.includes("Trellis")})),p=Boolean(m);n&&"linear"===r&&function(e,t,a,n){var i,r;const o=(0,u.getBaselineRule)(t,a);n&&"marks"in n?0===t?null===(i=n.marks)||void 0===i||i.push(o):null===(r=n.marks)||void 0===r||r.unshift(o):0===t?e.push(o):e.unshift(o)}(e,i,l,m),p&&function(e,a,n){var i,r,o,l;const s=(null===(i=a.name)||void 0===i?void 0:i.startsWith("x"))?"horizontal":"vertical",d="bottom"===e.position||"top"===e.position?"horizontal":"vertical",g=e.hideDefaultLabels||s!==d;let m=e.scaleType;if(s===d){const t=(0,u.getScale)(null!==(r=a.scales)&&void 0!==r?r:[],e.position);n=t.name,m=null!==(o=t.type)&&void 0!==o?o:"linear"}else e.title=void 0;let p=(0,t.addAxes)([],Object.assign(Object.assign({},e),{hideDefaultLabels:g,scaleName:n,scaleType:m}));p=(0,c.encodeAxisTitle)(p,a),a.axes=[...null!==(l=a.axes)&&void 0!==l?l:[],...p]}(a,m,s),(0,o.getAxisAnnotationsFromChildren)(a).forEach((t=>{(0,o.addAxisAnnotationMarks)(e,t,s)}))})),t.setAxisBaseline=g},4334:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTrellisGroupProperties=t.encodeAxisTitle=t.getTrellisAxisOptions=t.isTrellisedChart=void 0,t.isTrellisedChart=e=>/[xy]TrellisGroup/g.test(JSON.stringify(e)),t.getTrellisAxisOptions=e=>{let t={};if(e.includes("TrellisBand")){const a=`bandwidth('${e}') / -2`,n=e.startsWith("x")?"x":"y";t={position:"x"===n?"top":"left",labelFontWeight:"bold",labelAlign:void 0,title:void 0,vegaLabelAlign:"left",vegaLabelBaseline:"bottom",vegaLabelOffset:"x"===n?{signal:a}:{signal:`${a} - 8`},vegaLabelPadding:"x"===n?8:0}}return t},t.encodeAxisTitle=(e,a)=>{const{facetName:n,facetGroupBy:i,trellisScaleName:r}=(0,t.getTrellisGroupProperties)(a);return e.map((e=>e.title?Object.assign(Object.assign({},e),{encode:Object.assign(Object.assign({},e.encode),{title:{update:{opacity:[{test:`info(domain('${r}')[0] === data('${n}')[0].${i})`,value:1},{value:0}]}}})}):e))},t.getTrellisGroupProperties=e=>{var t;const a=`${(null!==(t=e.name)&&void 0!==t?t:"x")[0]}TrellisBand`,n=e.from;return{facetGroupBy:n.facet.groupby,facetName:n.facet.name,trellisScaleName:a}}},2755:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.hasSubLabels=t.getBaselineRule=t.getTickCount=t.isVerticalAxis=t.getOpposingRange=t.getOpposingScaleType=t.getRange=t.getScale=t.getSubLabelAxis=t.getTimeAxes=t.getDefaultAxis=void 0;const n=a(843);t.getDefaultAxis=(e,a)=>{const{grid:i,hideDefaultLabels:r,labelAlign:o,labelFontWeight:l,labelOrientation:s,position:d,scaleType:c,ticks:u,tickMinStep:g,title:m,vegaLabelAlign:p,vegaLabelBaseline:h,vegaLabelOffset:f,vegaLabelPadding:y}=e;return Object.assign(Object.assign({scale:a,orient:d,grid:i,ticks:u,tickCount:(0,t.getTickCount)(d,i),tickMinStep:"linear"!==c?void 0:g,title:m,labelAngle:(0,n.getLabelAngle)(s),labelFontWeight:l,labelOffset:(0,n.getLabelOffset)(o,a,f),labelPadding:y,labels:!r},(0,n.getLabelAnchorValues)(d,s,o,p,h)),{encode:{labels:{update:{text:(0,n.getLabelFormat)(e,a)}}}})},t.getTimeAxes=(e,t)=>[i(e,t),...o(e,t)];const i=(e,{granularity:t,grid:a,labelAlign:i,labelOrientation:o,position:l,ticks:s,title:d,vegaLabelAlign:c,vegaLabelBaseline:u})=>{const{tickCount:g}=(0,n.getTimeLabelFormats)(t);return Object.assign(Object.assign({scale:e,orient:l,grid:a,ticks:s,tickCount:e.includes("Time")?g:void 0,title:d,formatType:"time",labelAngle:(0,n.getLabelAngle)(o),labelSeparation:12},r(t,l)),(0,n.getLabelAnchorValues)(l,o,i,c,u))},r=(e,t)=>{const{secondaryLabelFormat:a,primaryLabelFormat:i}=(0,n.getTimeLabelFormats)(e);return["left","right"].includes(t)?{format:`${i} ${a}`,encode:{labels:{update:{text:{signal:"formatVerticalAxisTimeLabels(datum)"}}}}}:{format:a}},o=(e,{granularity:t,labelAlign:a,labelOrientation:i,labelFontWeight:r,position:o,ticks:l,vegaLabelAlign:s,vegaLabelBaseline:d})=>{if(["left","right"].includes(o))return[];const{primaryLabelFormat:c,tickCount:u}=(0,n.getTimeLabelFormats)(t);return[Object.assign(Object.assign({scale:e,orient:o,format:c,tickCount:e.includes("Time")?u:void 0,formatType:"time",labelOverlap:"greedy",labelFontWeight:r,labelAngle:(0,n.getLabelAngle)(i)},(0,n.getLabelAnchorValues)(o,i,a,s,d)),{encode:{labels:{enter:{dy:{value:(l?28:20)*("top"===o?-1:1)}},update:{text:{signal:"formatHorizontalTimeAxisLabels(datum)"}}}}})]};t.getSubLabelAxis=(e,a)=>{const{labelAlign:i,labelFontWeight:r,labelOrientation:o,name:l,position:s,ticks:d}=e,c=`${l}_subLabels`,u=e.subLabels.map((e=>e.value));let g=(0,t.getDefaultAxis)(e,a);return g=Object.assign(Object.assign({},g),{domain:!1,domainWidth:void 0,grid:!1,labelPadding:d?32:24,ticks:!1,title:void 0,values:u.length?u:void 0,encode:{labels:Object.assign({},(0,n.getAxisLabelsEncoding)(i,r,"subLabel",o,s,c))}}),g},t.getScale=(e,a)=>{var n;const i=e.filter((e=>"range"in e&&e.range===(0,t.getRange)(a)));let r;return r=i.length>1&&null!==(n=e.find((e=>e.name.includes("Trellis"))))&&void 0!==n?n:i[0],r||(r={name:l(a),type:"linear",range:(0,t.getRange)(a)},e.push(r),r)},t.getRange=e=>"left"===e||"right"===e?"height":"width",t.getOpposingScaleType=(e,a)=>{let n=e.find((e=>"range"in e&&e.range===(0,t.getOpposingRange)(a)));return n||(n={name:s(a),type:"linear",range:(0,t.getOpposingRange)(a)},e.push(n)),n.type},t.getOpposingRange=e=>"left"===e||"right"===e?"width":"height",t.isVerticalAxis=e=>["left","right"].includes(e);const l=e=>(0,t.isVerticalAxis)(e)?"yLinear":"xLinear",s=e=>(0,t.isVerticalAxis)(e)?"xLinear":"yLinear";t.getTickCount=(e,t)=>{if(t)return{signal:`clamp(ceil(${["top","bottom"].includes(e)?"width":"height"}/100), 2, 10)`}},t.getBaselineRule=(e,a)=>{const n=(0,t.isVerticalAxis)(a)?"y":"x",i={x:{x:{value:0},x2:{signal:"width"},y:{scale:"yLinear",value:e}},y:{x:{scale:"xLinear",value:e},y:{value:0},y2:{signal:"height"}}};return{name:`${n}Baseline`,description:`${n}Baseline`,type:"rule",interactive:!1,encode:{update:Object.assign({},i[n])}}},t.hasSubLabels=({subLabels:e,labelOrientation:t})=>Boolean(e.length&&"horizontal"===t)},4785:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.axisTypeSupportsAxisAnnotations=t.applyDefaultAxisAnnotationOptions=t.getAxisAnnotationsFromChildren=t.addAxisAnnotationAxis=t.getAxisAnnotationSpanMarks=t.getAxisAnnotationSummaryMarks=t.addAxisAnnotationMarks=t.addAxisAnnotationSignals=t.addAxisAnnotationData=void 0;const n=a(9633),i=a(1274),r=a(6924);t.addAxisAnnotationData=(e,{name:t,dataKey:a,color:n,colorScheme:i,options:r,format:c})=>{e.push(o(t,r,i)),"summary"===c?e.push(s(t,a,n,i)):e.push(l(t,a,n,i),d(t))};const o=(e,t,a)=>({name:`${e}_details`,values:t.map((e=>Object.assign(Object.assign({},e),{color:(0,i.getColorValue)(e.color,a)})))}),l=(e,t,a,r)=>({name:`${e}_aggregate`,source:n.FILTERED_TABLE,transform:[{type:"filter",expr:`datum.${t}`},{type:"flatten",fields:[t],as:[`${e}_id`]},{type:"aggregate",groupby:[`${e}_id`],fields:["datetime","datetime"],ops:["min","max"]},{type:"formula",expr:"datum.max_datetime - datum.min_datetime",as:"width"},{type:"formula",expr:"datum.width / 2 + datum.min_datetime",as:"center"},{type:"aggregate",groupby:["center"],fields:["min_datetime","max_datetime","width",t,t],ops:["min","max","max","count","values"],as:["lower","upper","width","number","annotations"]},{type:"formula",expr:`datum.annotations[0].${e}_id`,as:"id"},{type:"lookup",from:`${e}_details`,key:"id",values:["color"],fields:["id"]},{type:"formula",expr:`datum.number > 1 || datum.color == null ? '${(0,i.getColorValue)(a,r)}' : datum.color`,as:"color"}]}),s=(e,t,a,r)=>({name:`${e}_summary`,source:n.FILTERED_TABLE,transform:[{type:"filter",expr:`datum.${t}`},{type:"flatten",fields:[t],as:[`${e}_id`]},{type:"aggregate",groupby:[`${e}_id`]},{type:"aggregate",groupby:["center"],fields:[t,t],ops:["count","values"],as:["number","annotations"]},{type:"formula",expr:`datum.annotations[0].${e}_id`,as:"id"},{type:"lookup",from:`${e}_details`,key:"id",values:["color"],fields:["id"]},{type:"formula",expr:`datum.number > 1 || datum.color == null ? '${(0,i.getColorValue)(a,r)}' : datum.color`,as:"color"}]}),d=e=>({name:`${e}_range`,source:`${e}_aggregate`,transform:[{type:"filter",expr:`${e}_highlighted && datum.center == ${e}_highlighted.center && ${e}_highlighted.width > 0`}]});t.addAxisAnnotationSignals=(e,{name:t,format:a})=>{"span"===a&&e.push(c(t),u(t),g(t))};const c=e=>({name:`${e}_highlighted`,value:null,on:[{events:`@${e}_icon:mouseover`,update:"datum"},{events:`@${e}_icon:mouseout`,update:`${e}_clicked`}]}),u=e=>({name:`${e}_clicked`,value:{},on:[{events:{markname:`${e}_icon`,type:"mousedown",between:[{type:"mousedown"},{type:"mouseup"}]},update:"datum"},{events:"window:mouseup",update:"{}"}]}),g=e=>({name:`${e}_selected`,update:`${e}_clicked.center`});t.addAxisAnnotationMarks=(e,a,n)=>{const{format:i}=a;"summary"===i?e.push((0,t.getAxisAnnotationSummaryMarks)(a)):e.push((0,t.getAxisAnnotationSpanMarks)(a,n))},t.getAxisAnnotationSummaryMarks=({chartPopovers:e,name:t,offset:a})=>({name:`${t}_group`,type:"group",from:{data:`${t}_summary`},marks:[{name:`${t}_icon`,type:"path",from:{data:`${t}_summary`},zindex:2,encode:{enter:{stroke:{value:"transparent"},strokeWidth:{value:2},cursor:(0,r.getCursor)(e)},update:{path:{signal:`'${n.ANNOTATION_SINGLE_ICON_SVG}'`},fill:{field:"color"},xc:{signal:"width - 12"},yc:{signal:`height + ${a}`}}}}]}),t.getAxisAnnotationSpanMarks=({chartPopovers:e,name:t,offset:a},i)=>({name:`${t}_group`,type:"group",marks:[{name:`${t}_range`,type:"group",marks:[{type:"rect",from:{data:`${t}_range`},encode:{update:{x:{scale:i,field:"lower",band:.5},y:{signal:`height + ${a}`},width:{value:2},height:{value:-4},fill:{field:"color"},fillOpacity:{signal:`${t}_selected ? 1.0 : 0.2`}}}},{type:"rect",from:{data:`${t}_range`},encode:{update:{x:{scale:i,field:"lower",band:.5},y:{signal:`height + ${a}`},x2:{scale:i,field:"upper",band:.5},height:{value:2},fill:{field:"color"},fillOpacity:{signal:`${t}_selected ? 1.0 : 0.2`}}}},{type:"rect",from:{data:`${t}_range`},encode:{update:{x:{scale:i,field:"upper",band:.5},y:{signal:`height + ${a} + 2`},width:{value:2},height:{value:-6},fill:{field:"color"},fillOpacity:{signal:`${t}_selected ? 1.0 : 0.2`}}}}]},{name:`${t}_icon`,type:"path",from:{data:`${t}_aggregate`},encode:{enter:{stroke:{value:"transparent"},strokeWidth:{value:2},cursor:(0,r.getCursor)(e)},update:{path:{signal:`datum.width > 0 ? '${n.ANNOTATION_RANGED_ICON_SVG}' : '${n.ANNOTATION_SINGLE_ICON_SVG}'`},fill:{field:"color"},xc:{scale:i,field:"center",band:.5},yc:{signal:`height + ${a}`},fillOpacity:{signal:`(${t}_selected && ${t}_selected != datum.center) ? 0.0 : 1.0`}}}}]}),t.addAxisAnnotationAxis=(e,{offset:t},a)=>{e.push({scale:a,orient:"bottom",values:[],offset:t})},t.getAxisAnnotationsFromChildren=({axisAnnotations:e,colorScheme:a,name:n,position:i,scaleType:r})=>"bottom"!==i?[]:e.map(((e,i)=>(0,t.applyDefaultAxisAnnotationOptions)(e,i,n,a,r))),t.applyDefaultAxisAnnotationOptions=({chartPopovers:e=[],chartTooltips:t=[],name:a,format:i,offset:r=n.DEFAULT_AXIS_ANNOTATION_OFFSET,color:o=n.DEFAULT_AXIS_ANNOTATION_COLOR,dataKey:l="annotations",options:s=[]},d,c,u,g)=>({chartPopovers:e,chartTooltips:t,color:o,colorScheme:u,dataKey:l,name:null!=a?a:`${c}Annotation${d}`,offset:r,options:s,axisName:c,format:null!=i?i:"time"===g?"span":"summary"}),t.axisTypeSupportsAxisAnnotations=e=>Boolean(e&&["bottom"].includes(e))},2632:function(e,t,a){var n=this&&this.__rest||function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.getAnnotationMetricAxisPosition=t.getAnnotationPositionOffset=t.getAnnotationWidth=t.getAnnotationXEncode=t.getMinBandwidth=t.getAnnotationMarks=void 0;const i=a(9633),r=a(6859);t.getAnnotationMarks=(e,t,a,i)=>{const r=((e,t,a,i)=>{const r=e.barAnnotations[0];if(r)return((e,t,a,i,r)=>{var{textKey:o}=e,l=n(e,["textKey"]);return Object.assign({barOptions:t,textKey:o||t.metric,dataName:a,dimensionScaleName:i,dimensionField:r},l)})(r,e,t,a,i)})(e,t,a,i);return r?[{type:"group",name:`${e.name}_annotationGroup`,marks:[o(r),l(r)]}]:[]};const o=({barOptions:e,dataName:a,dimensionField:n,dimensionScaleName:o,textKey:l,style:s})=>{const{metricAxis:d,dimensionAxis:c}=(0,r.getOrientationProperties)(e.orientation),u=(0,t.getAnnotationWidth)(l,s),g=(0,t.getAnnotationMetricAxisPosition)(e,u);return{name:`${e.name}_annotationText`,type:"text",from:{data:a},interactive:!1,zindex:1,encode:{enter:{[c]:{scale:o,field:n,band:.5},[d]:g,text:[{test:`bandwidth('${o}') > ${(0,t.getMinBandwidth)(e.orientation)}`,field:l}],fontSize:{value:i.ANNOTATION_FONT_SIZE},fontWeight:{value:i.ANNOTATION_FONT_WEIGHT},baseline:{value:"middle"},align:{value:"center"}}}}},l=({barOptions:e,dimensionScaleName:a,textKey:n,style:r})=>({name:`${e.name}_annotationBackground`,description:`${e.name}_annotationBackground`,type:"rect",from:{data:`${e.name}_annotationText`},interactive:!1,encode:{enter:Object.assign(Object.assign({},(0,t.getAnnotationXEncode)(null==r?void 0:r.width)),{y:{signal:`datum.bounds.y1  - ${i.ANNOTATION_PADDING}`},y2:{signal:`datum.bounds.y2  + ${i.ANNOTATION_PADDING}`},cornerRadius:{value:4},fill:[{test:`datum.datum.${n} && bandwidth('${a}') > ${(0,t.getMinBandwidth)(e.orientation)}`,signal:i.BACKGROUND_COLOR}]})}});t.getMinBandwidth=e=>"vertical"===e?48:i.ANNOTATION_FONT_SIZE+2*i.ANNOTATION_PADDING,t.getAnnotationXEncode=e=>e?{xc:{signal:"(datum.bounds.x1 + datum.bounds.x2) / 2"},width:{value:e}}:{x:{signal:`datum.bounds.x1 - ${i.ANNOTATION_PADDING}`},x2:{signal:`datum.bounds.x2 + ${i.ANNOTATION_PADDING}`}},t.getAnnotationWidth=(e,t)=>(null==t?void 0:t.width)?{value:t.width}:{signal:`getLabelWidth(datum.${e}, '${i.ANNOTATION_FONT_WEIGHT}', ${i.ANNOTATION_FONT_SIZE}) + ${2*i.ANNOTATION_PADDING}`},t.getAnnotationPositionOffset=({orientation:e},t)=>"vertical"===e?""+((2*i.ANNOTATION_PADDING+i.ANNOTATION_FONT_SIZE)/2+2.5):"value"in t?""+(t.value/2+2.5):`((${t.signal}) / 2 + 2.5)`,t.getAnnotationMetricAxisPosition=(e,a)=>{const{type:n,metric:i,orientation:o}=e,l="stacked"===n||(0,r.isDodgedAndStacked)(e)?`${i}1`:i,{metricScaleKey:s}=(0,r.getOrientationProperties)(o),d=(0,t.getAnnotationPositionOffset)(e,a);return"vertical"===o?[{test:`datum.${l} < 0`,signal:`max(scale('${s}', datum.${l}), scale('${s}', 0) + ${d})`},{signal:`min(scale('${s}', datum.${l}), scale('${s}', 0) - ${d})`}]:[{test:`datum.${l} < 0`,signal:`min(scale('${s}', datum.${l}), scale('${s}', 0) - ${d})`},{signal:`max(scale('${s}', datum.${l}), scale('${s}', 0) + ${d})`}]}},1036:function(e,t,a){var n=this&&this.__rest||function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.getRepeatedScale=t.addMarks=t.addSecondaryScales=t.addDimensionScale=t.addScales=t.getDodgeGroupTransform=t.getStackIdTransform=t.getStackAggregateData=t.addData=t.addSignals=t.addBar=void 0;const i=a(2812),r=a(9633),o=a(8365),l=a(1119),s=a(795),d=a(7441),c=a(6924),u=a(9036),g=a(1422),m=a(9679),p=a(4189),h=a(6859),f=a(694),y=a(3566),S=a(6943);t.addBar=(0,i.produce)(((e,a)=>{var i,l,s,d,{barAnnotations:u=[],chartPopovers:g=[],chartTooltips:m=[],color:p={value:"categorical-100"},colorScheme:h=r.DEFAULT_COLOR_SCHEME,dimension:f=r.DEFAULT_CATEGORICAL_DIMENSION,hasOnClick:y=!1,hasSquareCorners:S=!1,index:T=0,lineType:b={value:"solid"},lineWidth:v=0,metric:E=r.DEFAULT_METRIC,metricAxis:_,name:O,opacity:L={value:1},orientation:$="vertical",paddingRatio:A=r.PADDING_RATIO,trellisOrientation:D="horizontal",trellisPadding:I=r.TRELLIS_PADDING,type:P="stacked",trendlines:x=[]}=a,R=n(a,["barAnnotations","chartPopovers","chartTooltips","color","colorScheme","dimension","hasOnClick","hasSquareCorners","index","lineType","lineWidth","metric","metricAxis","name","opacity","orientation","paddingRatio","trellisOrientation","trellisPadding","type","trendlines"]);const M=(0,o.toCamelCase)(O||`bar${T}`),k=Object.assign({barAnnotations:u,chartPopovers:g,chartTooltips:m,dimensionScaleType:"band",orientation:$,color:p,colorScheme:h,dimension:f,hasOnClick:y,hasSquareCorners:S,index:T,interactiveMarkName:(0,c.getInteractiveMarkName)({chartPopovers:g,chartTooltips:m,hasOnClick:y,highlightedItem:R.highlightedItem,trendlines:x},M),lineType:b,lineWidth:v,metric:E,metricAxis:_,name:M,opacity:L,paddingRatio:A,trellisOrientation:D,trellisPadding:I,trendlines:x,type:P},R);e.data=(0,t.addData)(null!==(i=e.data)&&void 0!==i?i:[],k),e.signals=(0,t.addSignals)(null!==(l=e.signals)&&void 0!==l?l:[],k),e.scales=(0,t.addScales)(null!==(s=e.scales)&&void 0!==s?s:[],k),e.marks=(0,t.addMarks)(null!==(d=e.marks)&&void 0!==d?d:[],k)})),t.addSignals=(0,i.produce)(((e,t)=>{var a;const{barAnnotations:n,chartTooltips:i,chartPopovers:r,idKey:o,name:l,paddingRatio:d,paddingOuter:c,trendlines:u}=t,{paddingInner:m}=(0,h.getBarPadding)(d,c);e.push((0,g.getGenericValueSignal)("paddingInner",m)),(n.length||r.length||i.length||u.length)&&((0,g.addHighlightedItemSignalEvents)(e,l,o,1,null===(a=i[0])||void 0===a?void 0:a.excludeDataKeys),(0,s.addTooltipSignals)(e,t),(0,p.setTrendlineSignals)(e,t))})),t.addData=(0,i.produce)(((e,a)=>{var n,i,o,c,u;const{dimension:g,dimensionDataType:m,metric:f,order:y,type:S}=a;if(m===r.TIME){const t=(0,d.getTableData)(e);t.transform=(0,d.addTimeTransform)(null!==(n=t.transform)&&void 0!==n?n:[],g)}const b=e.findIndex((e=>e.name===r.FILTERED_TABLE));e[b].transform=null!==(i=e[b].transform)&&void 0!==i?i:[],("stacked"===S||(0,h.isDodgedAndStacked)(a))&&(null===(o=e[b].transform)||void 0===o||o.push({type:"stack",groupby:T(a),field:f,sort:(0,d.getTransformSort)(y),as:[`${f}0`,`${f}1`]}),null===(c=e[b].transform)||void 0===c||c.push((0,t.getStackIdTransform)(a)),e.push((0,t.getStackAggregateData)(a))),("dodged"===S||(0,h.isDodgedAndStacked)(a))&&(null===(u=e[b].transform)||void 0===u||u.push((0,t.getDodgeGroupTransform)(a))),(0,p.addTrendlineData)(e,a),(0,s.addTooltipData)(e,a),(0,l.addPopoverData)(e,a)})),t.getStackAggregateData=e=>{const{metric:a,name:n}=e;return{name:`${n}_stacks`,source:r.FILTERED_TABLE,transform:[{type:"aggregate",groupby:T(e),fields:[`${a}1`,`${a}1`],ops:["min","max"]},(0,t.getStackIdTransform)(e)]}},t.getStackIdTransform=e=>({type:"formula",as:r.STACK_ID,expr:T(e).map((e=>`datum.${e}`)).join(' + "," + ')});const T=({trellis:e,color:t,dimension:a,lineType:n,opacity:i,type:r})=>{const{facets:o,secondaryFacets:l}=(0,m.getFacetsFromOptions)({color:t,lineType:n,opacity:i});return[...e?[e]:[],a,..."dodged"===r?o:[],..."stacked"===r?l:[]]};t.getDodgeGroupTransform=({color:e,lineType:t,name:a,opacity:n,type:i})=>{const{facets:r,secondaryFacets:o}=(0,m.getFacetsFromOptions)({color:e,lineType:t,opacity:n});return{type:"formula",as:`${a}_dodgeGroup`,expr:("dodged"===i?r:o).map((e=>`datum.${e}`)).join(' + "," + ')}},t.addScales=(0,i.produce)(((e,a)=>{const{color:n,lineType:i,opacity:o,orientation:l,metricAxis:s}=a,d="vertical"===l?"y":"x";(0,u.addMetricScale)(e,(0,h.getScaleValues)(a),d),s&&(0,u.addMetricScale)(e,(0,h.getScaleValues)(a),d,s),(0,t.addDimensionScale)(e,a),(0,S.addTrellisScale)(e,a),(0,u.addFieldToFacetScaleDomain)(e,r.COLOR_SCALE,n),(0,u.addFieldToFacetScaleDomain)(e,r.LINE_TYPE_SCALE,i),(0,u.addFieldToFacetScaleDomain)(e,r.OPACITY_SCALE,o),(0,t.addSecondaryScales)(e,a)})),t.addDimensionScale=(e,{dimension:t,paddingRatio:a,paddingOuter:n,orientation:i})=>{const r=(0,u.getScaleIndexByType)(e,"band","vertical"===i?"x":"y");e[r]=(0,u.addDomainFields)(e[r],[t]);const{paddingInner:o,paddingOuter:l}=(0,h.getBarPadding)(a,n);e[r]=Object.assign(Object.assign({},e[r]),{paddingInner:o,paddingOuter:l})},t.addSecondaryScales=(e,t)=>{const{color:a,lineType:n,opacity:i}=t;(0,h.isDodgedAndStacked)(t)&&[{value:a,scaleName:"colors",secondaryScaleName:"secondaryColor"},{value:n,scaleName:"lineTypes",secondaryScaleName:"secondaryLineType"},{value:i,scaleName:"opacities",secondaryScaleName:"secondaryOpacity"}].forEach((({value:t,scaleName:a,secondaryScaleName:n})=>{if(Array.isArray(t)&&2===t.length){const i=(0,u.getScaleIndexByName)(e,n,"ordinal");e[i]=(0,u.addDomainFields)(e[i],[t[1]]);const r=(0,u.getScaleIndexByName)(e,a,"ordinal"),o=e[r];o.range={signal:a},e[r]=(0,u.addDomainFields)(o,[t[0]])}}))},t.addMarks=(0,i.produce)(((e,a)=>{const{chartPopovers:n,name:i,type:r}=a,o=[];if((0,h.isDodgedAndStacked)(a)?o.push((0,y.getDodgedAndStackedBarMark)(a)):"stacked"===r?o.push(...(0,y.getStackedBarMarks)(a)):o.push((0,f.getDodgedMark)(a)),(0,l.getPopovers)(n,i).some((e=>"dimension"===e.UNSAFE_highlightBy))&&o.push((0,h.getDimensionSelectionRing)(a)),(0,S.isTrellised)(a)){const n=(0,t.getRepeatedScale)(a);e.push((0,S.getTrellisGroupMark)(a,o,n))}else e.push(...o);e.push(...(0,p.getTrendlineMarks)(a))})),t.getRepeatedScale=e=>{const{orientation:t,trellisOrientation:a}=e;return t===a?(0,u.getMetricScale)((0,h.getScaleValues)(e),"vertical"===t?"y":"x",t):b(e)};const b=({dimension:e,orientation:t,paddingRatio:a,paddingOuter:n})=>{let i=(0,u.getDefaultScale)("band","vertical"===t?"x":"y",t);i=(0,u.addDomainFields)(i,[e]);const{paddingInner:r,paddingOuter:o}=(0,h.getBarPadding)(a,n);return Object.assign(Object.assign({},i),{paddingInner:r,paddingOuter:o})}},6859:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getOrientationProperties=t.getScaleValues=t.getBarPadding=t.getStrokeWidth=t.getStrokeDash=t.getDimensionSelectionRing=t.getStroke=t.getBarUpdateEncodings=t.getBarEnterEncodings=t.getBaseBarEnterEncodings=t.rotateRectClockwiseIfNeeded=t.getStackedCornerRadiusEncodings=t.getCornerRadiusEncodings=t.getStackedMetricEncodings=t.getMetricEncodings=t.getTrellisedDimensionEncodings=t.getDodgedDimensionEncodings=t.getDodgedGroupMark=t.isDodgedAndStacked=void 0;const n=a(9633),i=a(1274),r=a(1119),o=a(6924),l=a(9036),s=a(9679),d=a(6943);t.isDodgedAndStacked=({color:e,lineType:t,opacity:a})=>[e,t,a].some((e=>Array.isArray(e)&&2===e.length)),t.getDodgedGroupMark=e=>{const{dimension:a,groupedPadding:i,orientation:r,name:o,paddingRatio:l}=e,{dimensionScaleKey:s,dimensionAxis:c,rangeScale:u}=(0,t.getOrientationProperties)(r);return{name:`${o}_group`,type:"group",from:{facet:{data:(0,d.isTrellised)(e)?(0,d.getTrellisProperties)(e).facetName:n.FILTERED_TABLE,name:`${o}_facet`,groupby:a}},encode:{enter:{[c]:{scale:s,field:a}}},signals:[{name:u,update:`bandwidth("${s}")`}],scales:[{name:`${o}_position`,type:"band",range:u,domain:{data:n.FILTERED_TABLE,field:`${o}_dodgeGroup`},paddingInner:null!=i?i:l}]}},t.getDodgedDimensionEncodings=e=>{const{dimensionAxis:a,rangeScale:n}=(0,t.getOrientationProperties)(e.orientation),i=`${e.name}_position`;return{[a]:{scale:i,field:`${e.name}_dodgeGroup`},[n]:{scale:i,band:1}}},t.getTrellisedDimensionEncodings=e=>{const{dimensionAxis:a,rangeScale:n,dimensionScaleKey:i}=(0,t.getOrientationProperties)(e.orientation);return{[a]:{scale:i,field:e.dimension},[n]:{scale:i,band:1}}},t.getMetricEncodings=e=>{const{metric:a,type:n}=e,{metricAxis:i,metricScaleKey:r}=(0,t.getOrientationProperties)(e.orientation,e.metricAxis),o=`${i}2`;return"stacked"===n||(0,t.isDodgedAndStacked)(e)?(0,t.getStackedMetricEncodings)(e):{[i]:{scale:r,value:0},[o]:{scale:r,field:a}}},t.getStackedMetricEncodings=e=>{const{metric:a,orientation:n}=e,{metricAxis:i,metricScaleKey:r}=(0,t.getOrientationProperties)(e.orientation,e.metricAxis),o=`${i}2`,l=`datum.${a}0`,s=`datum.${a}1`;return"vertical"===n?{[i]:[{test:`${l} === 0`,signal:`scale('${r}', ${l})`},{test:`${s} > 0`,signal:`max(scale('${r}', ${l}) - 1.5, scale('${r}', ${s}))`},{signal:`min(scale('${r}', ${l}) + 1.5, scale('${r}', ${s}))`}],[o]:{scale:r,field:`${a}1`}}:{[i]:[{test:`${l} === 0`,signal:`scale('${r}', ${l})`},{test:`${s} > 0`,signal:`min(scale('${r}', ${l}) + 1.5, scale('${r}', ${s}))`},{signal:`max(scale('${r}', ${l}) - 1.5, scale('${r}', ${s}))`}],[o]:{scale:r,field:`${a}1`}}},t.getCornerRadiusEncodings=e=>{const{type:a,lineWidth:i,metric:r,hasSquareCorners:o}=e,l=o?0:Math.max(1,n.CORNER_RADIUS-(0,s.getLineWidthPixelsFromLineWidth)(i)/2);let d;return d="dodged"!==a||(0,t.isDodgedAndStacked)(e)?(0,t.getStackedCornerRadiusEncodings)(e):{cornerRadiusTopLeft:[{test:`datum.${r} > 0`,value:l},{value:0}],cornerRadiusTopRight:[{test:`datum.${r} > 0`,value:l},{value:0}],cornerRadiusBottomLeft:[{test:`datum.${r} < 0`,value:l},{value:0}],cornerRadiusBottomRight:[{test:`datum.${r} < 0`,value:l},{value:0}]},(0,t.rotateRectClockwiseIfNeeded)(d,e)},t.getStackedCornerRadiusEncodings=({name:e,metric:t,lineWidth:a,hasSquareCorners:i})=>{const r=`datum.${t}1 > 0 && data('${e}_stacks')[indexof(pluck(data('${e}_stacks'), '${n.STACK_ID}'), datum.${n.STACK_ID})].max_${t}1 === datum.${t}1`,o=`datum.${t}1 < 0 && data('${e}_stacks')[indexof(pluck(data('${e}_stacks'), '${n.STACK_ID}'), datum.${n.STACK_ID})].min_${t}1 === datum.${t}1`,l=i?0:Math.max(1,n.CORNER_RADIUS-(0,s.getLineWidthPixelsFromLineWidth)(a)/2);return{cornerRadiusTopLeft:[{test:r,value:l},{value:0}],cornerRadiusTopRight:[{test:r,value:l},{value:0}],cornerRadiusBottomLeft:[{test:o,value:l},{value:0}],cornerRadiusBottomRight:[{test:o,value:l},{value:0}]}},t.rotateRectClockwiseIfNeeded=(e,{orientation:t})=>"vertical"===t?e:{cornerRadiusTopLeft:e.cornerRadiusBottomLeft,cornerRadiusTopRight:e.cornerRadiusTopLeft,cornerRadiusBottomLeft:e.cornerRadiusBottomRight,cornerRadiusBottomRight:e.cornerRadiusTopRight},t.getBaseBarEnterEncodings=e=>Object.assign(Object.assign({},(0,t.getMetricEncodings)(e)),(0,t.getCornerRadiusEncodings)(e)),t.getBarEnterEncodings=({chartTooltips:e,color:t,colorScheme:a,name:n,opacity:i})=>({fill:(0,o.getColorProductionRule)(t,a),fillOpacity:(0,o.getOpacityProductionRule)(i),tooltip:(0,o.getTooltip)(e,n)}),t.getBarUpdateEncodings=e=>({cursor:(0,o.getCursor)(e.chartPopovers,e.hasOnClick),opacity:(0,o.getMarkOpacity)(e),stroke:(0,t.getStroke)(e),strokeDash:(0,t.getStrokeDash)(e),strokeWidth:(0,t.getStrokeWidth)(e)}),t.getStroke=({name:e,chartPopovers:t,color:a,colorScheme:r,idKey:l})=>{const s=(0,o.getColorProductionRule)(a,r);return(0,o.hasPopover)({chartPopovers:t})?[{test:`(${n.SELECTED_ITEM} && ${n.SELECTED_ITEM} === datum.${l}) || (${n.SELECTED_GROUP} && ${n.SELECTED_GROUP} === datum.${e}_selectedGroupId)`,value:(0,i.getColorValue)("static-blue",r)},s]:[s]},t.getDimensionSelectionRing=e=>{const{name:t,colorScheme:a,paddingRatio:n,orientation:r}=e,o="vertical"===r?{y:{value:0},y2:{signal:"height"},xc:{signal:`scale('xBand', datum.${t}_selectedGroupId) + bandwidth('xBand')/2`},width:{signal:`bandwidth('xBand')/(1 - ${n} / 2)`}}:{x:{value:0},x2:{signal:"width"},yc:{signal:`scale('yBand', datum.${t}_selectedGroupId) + bandwidth('yBand')/2`},height:{signal:`bandwidth('yBand')/(1 - ${n} / 2)`}};return{name:`${t}_selectionRing`,type:"rect",from:{data:`${t}_selectedData`},interactive:!1,encode:{enter:{fill:{value:"transparent"},strokeWidth:{value:2},stroke:{value:(0,i.getColorValue)("static-blue",a)},cornerRadius:{value:6}},update:o}}},t.getStrokeDash=({chartPopovers:e,idKey:t,lineType:a})=>{const i=(0,o.getStrokeDashProductionRule)(a);return(0,o.hasPopover)({chartPopovers:e})?[{test:`isValid(${n.SELECTED_ITEM}) && ${n.SELECTED_ITEM} === datum.${t}`,value:[]},i]:[i]},t.getStrokeWidth=({chartPopovers:e,idKey:t,lineWidth:a,name:i})=>{const o=(0,s.getLineWidthPixelsFromLineWidth)(a),l={value:o},d=(0,r.getPopovers)(e,i),c=d.some((({UNSAFE_highlightBy:e})=>"dimension"===e));return 0===d.length||c?[l]:[{test:`(isValid(${n.SELECTED_ITEM}) && ${n.SELECTED_ITEM} === datum.${t}) || (isValid(${n.SELECTED_GROUP}) && ${n.SELECTED_GROUP} === datum.${i}_selectedGroupId)`,value:Math.max(o,2)},l]},t.getBarPadding=(e,t)=>(0,l.getBandPadding)(e,t),t.getScaleValues=e=>"stacked"===e.type||(0,t.isDodgedAndStacked)(e)?[`${e.metric}1`]:[e.metric],t.getOrientationProperties=(e,t)=>"vertical"===e?{metricAxis:"y",dimensionAxis:"x",metricScaleKey:t||"yLinear",dimensionScaleKey:"xBand",rangeScale:"width"}:{metricAxis:"x",dimensionAxis:"y",metricScaleKey:t||"xLinear",dimensionScaleKey:"yBand",rangeScale:"height"}},694:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDodgedMark=void 0;const n=a(9633),i=a(6924),r=a(2632),o=a(6859);t.getDodgedMark=e=>{const{name:t}=e;return Object.assign(Object.assign({},(0,o.getDodgedGroupMark)(e)),{marks:[{name:`${t}_background`,from:{data:`${t}_facet`},type:"rect",interactive:!1,encode:{enter:Object.assign(Object.assign({},(0,o.getBaseBarEnterEncodings)(e)),{fill:{signal:n.BACKGROUND_COLOR}}),update:Object.assign({},(0,o.getDodgedDimensionEncodings)(e))}},{name:t,from:{data:`${t}_facet`},type:"rect",interactive:(0,i.isInteractive)(e),encode:{enter:Object.assign(Object.assign({},(0,o.getBaseBarEnterEncodings)(e)),(0,o.getBarEnterEncodings)(e)),update:Object.assign(Object.assign({},(0,o.getDodgedDimensionEncodings)(e)),(0,o.getBarUpdateEncodings)(e))}},...(0,r.getAnnotationMarks)(e,`${t}_facet`,`${t}_position`,`${t}_dodgeGroup`)]})}},3566:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getStackedDimensionEncodings=t.getStackedBar=t.getStackedBackgroundBar=t.getDodgedAndStackedBarMark=t.getStackedBarMarks=void 0;const n=a(9633),i=a(6924),r=a(2632),o=a(6859),l=a(6943);t.getStackedBarMarks=e=>{const a=[];return a.push((0,t.getStackedBackgroundBar)(e)),a.push((0,t.getStackedBar)(e)),a.push(...(0,r.getAnnotationMarks)(e,s(e),(0,o.getOrientationProperties)(e.orientation).dimensionScaleKey,e.dimension)),a},t.getDodgedAndStackedBarMark=e=>{const a=[];return a.push((0,t.getStackedBackgroundBar)(e)),a.push((0,t.getStackedBar)(e)),a.push(...(0,r.getAnnotationMarks)(e,`${e.name}_facet`,`${e.name}_position`,`${e.name}_dodgeGroup`)),Object.assign(Object.assign({},(0,o.getDodgedGroupMark)(e)),{marks:a})},t.getStackedBackgroundBar=e=>{const{name:a}=e;return{name:`${a}_background`,description:`${a}_background`,type:"rect",from:{data:(0,o.isDodgedAndStacked)(e)?`${a}_facet`:s(e)},interactive:!1,encode:{enter:Object.assign(Object.assign({},(0,o.getBaseBarEnterEncodings)(e)),{fill:{signal:n.BACKGROUND_COLOR}}),update:Object.assign({},(0,t.getStackedDimensionEncodings)(e))}}},t.getStackedBar=e=>{const{name:a}=e;return{name:a,description:a,type:"rect",from:{data:(0,o.isDodgedAndStacked)(e)?`${a}_facet`:s(e)},interactive:(0,i.isInteractive)(e),encode:{enter:Object.assign(Object.assign({},(0,o.getBaseBarEnterEncodings)(e)),(0,o.getBarEnterEncodings)(e)),update:Object.assign(Object.assign({},(0,t.getStackedDimensionEncodings)(e)),(0,o.getBarUpdateEncodings)(e))}}},t.getStackedDimensionEncodings=e=>{const{dimension:t,orientation:a}=e;if((0,o.isDodgedAndStacked)(e))return(0,o.getDodgedDimensionEncodings)(e);const{dimensionAxis:n,rangeScale:i,dimensionScaleKey:r}=(0,o.getOrientationProperties)(a);return{[n]:{scale:r,field:t},[i]:{scale:r,band:1}}};const s=e=>(0,l.isTrellised)(e)?(0,l.getTrellisProperties)(e).facetName:n.FILTERED_TABLE},6943:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isTrellised=t.getTrellisProperties=t.getTrellisedEncodeEntries=t.addTrellisScale=t.getTrellisGroupMark=void 0;const n=a(9633),i=a(9036),r=a(6859);t.getTrellisGroupMark=(e,a,i)=>{const{trellisOrientation:r}=e,o=e.trellis,{markName:l,facetName:s,scaleName:d,axis:c,rangeScale:u}=(0,t.getTrellisProperties)(e);return{name:l,type:"group",from:{facet:{data:n.FILTERED_TABLE,name:s,groupby:o}},signals:[{name:u,update:`bandwidth('${d}')`}],encode:{enter:{[c]:{scale:d,field:o},height:{signal:"vertical"===r?`bandwidth('${d}')`:"height"},width:{signal:"horizontal"===r?`bandwidth('${d}')`:"width"}}},scales:[i],marks:a}},t.addTrellisScale=(e,a)=>{if(!a.trellis)return;const{scaleName:n,rangeScale:r,paddingInner:o}=(0,t.getTrellisProperties)(a),l=(0,i.getScaleIndexByName)(e,n,"band");e[l]=(0,i.addDomainFields)(e[l],[a.trellis]),e[l]=Object.assign(Object.assign({},e[l]),{range:r,paddingInner:o})},t.getTrellisedEncodeEntries=e=>"dodged"===e.type||(0,r.isDodgedAndStacked)(e)?(0,r.getDodgedDimensionEncodings)(e):(0,r.getTrellisedDimensionEncodings)(e),t.getTrellisProperties=({trellisOrientation:e,name:t,trellisPadding:a})=>{const n="horizontal"===e?"x":"y";return{facetName:`${t}_trellis`,scaleName:`${n}TrellisBand`,markName:`${n}TrellisGroup`,rangeScale:"x"===n?"width":"height",axis:n,paddingInner:a}},t.isTrellised=e=>Boolean(e.trellis)},8941:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateThresholdColorExpr=t.getBulletTransforms=t.getBulletTableData=void 0;const n=a(9633),i=a(7441);function r(e,t,a){if(!e||0===e.length)return`'${a}'`;const n=e.slice().sort(((e,t)=>(void 0!==e.thresholdMin?e.thresholdMin:-1e12)-(void 0!==t.thresholdMin?t.thresholdMin:-1e12))),i=[];i.push(`(datum.${t} < ${void 0!==n[0].thresholdMin?n[0].thresholdMin:-1e12}) ? '${a}' : `);for(let e=0;e<n.length-1;e++){const a=void 0!==n[e+1].thresholdMin?n[e+1].thresholdMin:-1e12;i.push(`(datum.${t} < ${a}) ? '${n[e].fill}' : `)}return i.push(`'${n[n.length-1].fill}'`),i.join("")}t.getBulletTableData=e=>{let t=(0,i.getTableData)(e);return t||(t={name:n.TABLE,values:[],transform:[]},e.push(t)),t},t.getBulletTransforms=e=>{var t,a,n;const i=[{type:"formula",expr:`isValid(datum.${e.target}) ? round(datum.${e.target} * 1.05) : 0`,as:"xPaddingForTarget"}];return"flexible"===e.scaleType&&i.push({type:"formula",expr:`${e.maxScaleValue}`,as:"flexibleScaleValue"}),e.thresholdBarColor&&(null!==(a=null===(t=e.thresholds)||void 0===t?void 0:t.length)&&void 0!==a?a:0)>0&&i.push({type:"formula",expr:r(null!==(n=e.thresholds)&&void 0!==n?n:[],e.metric,e.color),as:"barColor"}),i},t.generateThresholdColorExpr=r},4482:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addAxes=t.getBulletScaleAxes=t.getBulletLabelAxesRight=t.getBulletLabelAxesLeft=t.getBulletTrack=t.getBulletMarkThreshold=t.getBulletMarkTargetValueLabel=t.getBulletMarkValueLabel=t.getBulletMarkLabel=t.getBulletMarkTarget=t.getBulletMarkRect=t.addMarks=void 0;const n=a(2812),i=a(1274);function r(e){var t,a;const n=e.showTarget&&e.showTargetValue?"bulletGroupHeight - targetValueLabelHeight - 3 - 2 * bulletHeight":"bulletGroupHeight - 3 - 2 * bulletHeight",i=e.thresholdBarColor&&(null!==(a=null===(t=e.thresholds)||void 0===t?void 0:t.length)&&void 0!==a?a:0)>0?[{field:"barColor"}]:[{value:e.color}];return{name:`${e.name}Rect`,description:`${e.name}Rect`,type:"rect",from:{data:"bulletGroups"},encode:{enter:{cornerRadiusTopLeft:[{test:`datum.${e.metric} < 0`,value:3}],cornerRadiusBottomLeft:[{test:`datum.${e.metric} < 0`,value:3}],cornerRadiusTopRight:[{test:`datum.${e.metric} > 0`,value:3}],cornerRadiusBottomRight:[{test:`datum.${e.metric} > 0`,value:3}],fill:i},update:{x:{scale:"xscale",value:0},x2:{scale:"xscale",field:`${e.metric}`},height:{signal:"bulletHeight"},y:{signal:n}}}}}function o(e){const t=(0,i.getColorValue)("gray-900",e.colorScheme),a=e.showTarget&&e.showTargetValue?"bulletGroupHeight - targetValueLabelHeight - targetHeight":"bulletGroupHeight - targetHeight",n=e.showTarget&&e.showTargetValue?"bulletGroupHeight - targetValueLabelHeight":"bulletGroupHeight";return{name:`${e.name}Target`,description:`${e.name}Target`,type:"rule",from:{data:"bulletGroups"},encode:{enter:{stroke:{value:`${t}`},strokeWidth:{value:2}},update:{x:{scale:"xscale",field:`${e.target}`},y:{signal:a},y2:{signal:n}}}}}function l(e){const t=(0,i.getColorValue)("gray-600",e.colorScheme);return{name:`${e.name}Label`,description:`${e.name}Label`,type:"text",from:{data:"bulletGroups"},encode:{enter:{text:{signal:`datum.${e.dimension}`},align:{value:"left"},baseline:{value:"top"},fill:{value:`${t}`}},update:{x:{value:0},y:{value:0}}}}}function s(e){var t,a;const n=(0,i.getColorValue)(e.color,e.colorScheme),r=(0,i.getColorValue)("gray-900",e.colorScheme),o="column"===e.direction?"width":"bulletGroupWidth",l=e.thresholdBarColor&&(null!==(a=null===(t=e.thresholds)||void 0===t?void 0:t.length)&&void 0!==a?a:0)>0?`datum.barColor === '${n}' ? '${r}' : datum.barColor`:`'${r}'`;return{name:`${e.name}ValueLabel`,description:`${e.name}ValueLabel`,type:"text",from:{data:"bulletGroups"},encode:{enter:{text:{signal:`datum.${e.metric} != null ? format(datum.${e.metric}, '${e.numberFormat||""}') : ''`},align:{value:"right"},baseline:{value:"top"},fill:{signal:l}},update:{x:{signal:o},y:{value:0}}}}}function d(e){const t=(0,i.getColorValue)("gray-900",e.colorScheme);return{name:`${e.name}TargetValueLabel`,description:`${e.name}TargetValueLabel`,type:"text",from:{data:"bulletGroups"},encode:{enter:{text:{signal:`datum.${e.target} != null ? 'Target: ' + format(datum.${e.target}, '$,.2f') : 'No Target'`},align:{value:"center"},baseline:{value:"top"},fill:{value:`${t}`}},update:{x:{scale:"xscale",field:`${e.target}`},y:{signal:"bulletGroupHeight - targetValueLabelHeight + 6"}}}}}function c(e){const t="bulletGroupHeight - 3 - bulletThresholdHeight",a=e.showTarget&&e.showTargetValue?`${t} - targetValueLabelHeight`:t;return{name:`${e.name}Threshold`,description:`${e.name}Threshold`,type:"rect",from:{data:"thresholds"},clip:!0,encode:{enter:{cornerRadiusTopLeft:[{test:"!isDefined(datum.thresholdMin) && domain('xscale')[0] !== 0",value:3}],cornerRadiusBottomLeft:[{test:"!isDefined(datum.thresholdMin) && domain('xscale')[0] !== 0",value:3}],cornerRadiusTopRight:[{test:"!isDefined(datum.thresholdMax) && domain('xscale')[1] !== 0",value:3}],cornerRadiusBottomRight:[{test:"!isDefined(datum.thresholdMax) && domain('xscale')[1] !== 0",value:3}],fill:{field:"fill"},fillOpacity:{value:.2}},update:{x:{signal:"isDefined(datum.thresholdMin) ? scale('xscale', datum.thresholdMin) : 0"},x2:{signal:"isDefined(datum.thresholdMax) ? scale('xscale', datum.thresholdMax) : width"},height:{signal:"bulletThresholdHeight"},y:{signal:a}}}}}function u(e){const t=(0,i.getColorValue)("gray-200",e.colorScheme),a="column"===e.direction?"width":"bulletGroupWidth",n=e.showTarget&&e.showTargetValue?"bulletGroupHeight - 3 - 2 * bulletHeight - 20":"bulletGroupHeight - 3 - 2 * bulletHeight";return{name:`${e.name}Track`,description:`${e.name}Track`,type:"rect",from:{data:"bulletGroups"},encode:{enter:{fill:{value:t},cornerRadiusTopRight:[{test:"domain('xscale')[1] !== 0",value:3}],cornerRadiusBottomRight:[{test:"domain('xscale')[1] !== 0",value:3}],cornerRadiusTopLeft:[{test:"domain('xscale')[0] !== 0",value:3}],cornerRadiusBottomLeft:[{test:"domain('xscale')[0] !== 0",value:3}]},update:{x:{value:0},width:{signal:a},height:{signal:"bulletHeight"},y:{signal:n}}}}}function g(e){return{scale:"groupScale",orient:"left",tickSize:0,labelOffset:e,labelPadding:10,labelColor:"#797979",domain:!1}}function m(e,t){return{scale:"groupScale",orient:"right",tickSize:0,labelOffset:t,labelPadding:10,domain:!1,encode:{labels:{update:{text:{signal:`info(data('table')[datum.index * (length(data('table')) - 1)].${e.metric}) != null ? format(info(data('table')[datum.index * (length(data('table')) - 1)].${e.metric}), '${e.numberFormat||""}') : ''`}}}}}}t.addMarks=(0,n.produce)(((e,t)=>{var a,n,i,g,m,p,h;const f="column"===t.direction?"y":"x",y="column"===t.direction?"width":"bulletGroupWidth",S={name:"bulletGroup",type:"group",from:{facet:{data:"table",name:"bulletGroups",groupby:`${t.dimension}`}},encode:{update:{[f]:{scale:"groupScale",field:`${t.dimension}`},height:{signal:"bulletGroupHeight"},width:{signal:y}}},marks:[]},T=t.thresholds;Array.isArray(T)&&T.length>0?(S.data=[{name:"thresholds",values:T,transform:[{type:"identifier",as:"id"}]}],null===(a=S.marks)||void 0===a||a.push(c(t))):t.track&&(null===(n=S.marks)||void 0===n||n.push(u(t))),null===(i=S.marks)||void 0===i||i.push(r(t)),t.target&&!1!==t.showTarget&&(null===(g=S.marks)||void 0===g||g.push(o(t)),t.showTargetValue&&(null===(m=S.marks)||void 0===m||m.push(d(t)))),"top"!==t.labelPosition&&"row"!==t.direction||(null===(p=S.marks)||void 0===p||p.push(l(t)),null===(h=S.marks)||void 0===h||h.push(s(t))),e.push(S)})),t.getBulletMarkRect=r,t.getBulletMarkTarget=o,t.getBulletMarkLabel=l,t.getBulletMarkValueLabel=s,t.getBulletMarkTargetValueLabel=d,t.getBulletMarkThreshold=c,t.getBulletTrack=u,t.getBulletLabelAxesLeft=g,t.getBulletLabelAxesRight=m,t.getBulletScaleAxes=function(){return{labelOffset:2,scale:"xscale",orient:"bottom",ticks:!1,labelColor:"gray",domain:!1,tickCount:5,offset:{signal:"axisOffset"}}},t.addAxes=(0,n.produce)(((e,t)=>{if(t.metricAxis&&"column"===t.direction&&!t.showTargetValue&&e.push({labelOffset:2,scale:"xscale",orient:"bottom",ticks:!1,labelColor:"gray",domain:!1,tickCount:5,offset:{signal:"axisOffset"}}),"side"===t.labelPosition&&"column"===t.direction){const a=t.showTargetValue&&t.showTarget?-8:2;e.push(g(a)),e.push(m(t,a))}}))},8370:function(e,t,a){var n=this&&this.__rest||function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.addData=t.addSignals=t.addScales=t.addBullet=void 0;const i=a(2812),r=a(9633),o=a(1274),l=a(8365),s=a(8941),d=a(4482),c=o.spectrumColors.light["static-blue"];function u(e){return e.showTargetValue&&e.showTarget?"side"===e.labelPosition&&"column"===e.direction?"bulletThresholdHeight + targetValueLabelHeight + 10":"bulletThresholdHeight + targetValueLabelHeight + 24":"side"===e.labelPosition&&"column"===e.direction?"bulletThresholdHeight + 10":"bulletThresholdHeight + 24"}t.addBullet=(0,i.produce)(((e,a)=>{var i,s,u,g,m,{colorScheme:p=r.DEFAULT_COLOR_SCHEME,index:h=0,name:f,metric:y,dimension:S,target:T,color:b=c,direction:v=r.DEFAULT_BULLET_DIRECTION,numberFormat:E,showTarget:_=!0,showTargetValue:O=!1,labelPosition:L=r.DEFAULT_LABEL_POSITION,scaleType:$=r.DEFAULT_SCALE_TYPE,maxScaleValue:A=r.DEFAULT_SCALE_VALUE,thresholds:D=[],track:I=!1,thresholdBarColor:P=!1,metricAxis:x=!1}=a,R=n(a,["colorScheme","index","name","metric","dimension","target","color","direction","numberFormat","showTarget","showTargetValue","labelPosition","scaleType","maxScaleValue","thresholds","track","thresholdBarColor","metricAxis"]);const M=Object.assign({colorScheme:p,index:h,color:(0,o.getColorValue)(b,p),metric:null!=y?y:"currentAmount",dimension:null!=S?S:"graphLabel",target:null!=T?T:"target",name:(0,l.toCamelCase)(null!=f?f:`bullet${h}`),direction:v,numberFormat:null!=E?E:"",showTarget:_,showTargetValue:O,labelPosition:L,scaleType:$,maxScaleValue:A,track:I,thresholds:D,thresholdBarColor:P,metricAxis:x},R);e.data=(0,t.addData)(null!==(i=e.data)&&void 0!==i?i:[],M),e.marks=(0,d.addMarks)(null!==(s=e.marks)&&void 0!==s?s:[],M),e.scales=(0,t.addScales)(null!==(u=e.scales)&&void 0!==u?u:[],M),e.signals=(0,t.addSignals)(null!==(g=e.signals)&&void 0!==g?g:[],M),e.axes=(0,d.addAxes)(null!==(m=e.axes)&&void 0!==m?m:[],M)})),t.addScales=(0,i.produce)(((e,t)=>{const a="column"===t.direction?"bulletChartHeight":"width",n="column"===t.direction?"width":[0,{signal:"bulletGroupWidth"}];let i;i="flexible"===t.scaleType&&t.maxScaleValue>0?{data:"table",fields:["xPaddingForTarget",t.metric,"flexibleScaleValue"]}:"fixed"===t.scaleType&&t.maxScaleValue>0?[0,`${t.maxScaleValue}`]:{data:"table",fields:["xPaddingForTarget",t.metric]},e.push({name:"groupScale",type:"band",domain:{data:"table",field:t.dimension},range:[0,{signal:a}],paddingInner:{signal:"paddingRatio"}},{name:"xscale",type:"linear",domain:i,range:n,round:!0,clamp:!0,zero:!0})})),t.addSignals=(0,i.produce)(((e,t)=>{e.push({name:"gap",value:12}),e.push({name:"bulletHeight",value:8}),e.push({name:"bulletThresholdHeight",update:"bulletHeight * 3"}),e.push({name:"targetHeight",update:"bulletThresholdHeight + 6"}),t.showTargetValue&&t.showTarget&&e.push({name:"targetValueLabelHeight",update:"20"}),e.push({name:"bulletGroupHeight",update:u(t)}),"column"===t.direction?(e.push({name:"paddingRatio",update:"gap / (gap + bulletGroupHeight)"}),t.metricAxis&&!t.showTargetValue?(e.push({name:"bulletChartHeight",update:"length(data('table')) * bulletGroupHeight + (length(data('table')) - 1) * gap + 10"}),e.push({name:"axisOffset",update:"bulletChartHeight - height - 10"})):e.push({name:"bulletChartHeight",update:"length(data('table')) * bulletGroupHeight + (length(data('table')) - 1) * gap"})):(e.push({name:"bulletGroupWidth",update:"(width / length(data('table'))) - gap"}),e.push({name:"paddingRatio",update:"gap / (gap + bulletGroupWidth)"}),e.push({name:"bulletChartHeight",update:"bulletGroupHeight"}))})),t.addData=(0,i.produce)(((e,t)=>{(0,s.getBulletTableData)(e).transform=(0,s.getBulletTransforms)(t)}))},1119:function(e,t,a){var n=this&&this.__rest||function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.getGroupIdTransform=t.addPopoverData=t.applyPopoverPropDefaults=t.getPopovers=void 0;const i=a(9633),r=a(7441);t.getPopovers=(e,a)=>e.map((e=>(0,t.applyPopoverPropDefaults)(e,a))),t.applyPopoverPropDefaults=(e,t)=>{var{UNSAFE_highlightBy:a="item"}=e,i=n(e,["UNSAFE_highlightBy"]);return Object.assign({UNSAFE_highlightBy:a,markName:t},i)},t.addPopoverData=(e,a,n=!0)=>{const l=(0,t.getPopovers)(a.chartPopovers,a.name);for(const{UNSAFE_highlightBy:s,markName:d}of l){const l=(0,r.getFilteredTableData)(e);l.transform||(l.transform=[]),"dimension"===s&&"donut"!==a.markType?l.transform.push((0,t.getGroupIdTransform)([a.dimension],d)):"series"===s?l.transform.push((0,t.getGroupIdTransform)([i.SERIES_ID],d)):Array.isArray(s)?l.transform.push((0,t.getGroupIdTransform)(s,d)):l.transform.push((0,t.getGroupIdTransform)([a.idKey],d)),n&&e.push(o(d))}},t.getGroupIdTransform=(e,t)=>({type:"formula",as:`${t}_selectedGroupId`,expr:e.map((e=>`datum.${e}`)).join(' + " | " + ')});const o=e=>({name:`${e}_selectedData`,source:i.FILTERED_TABLE,transform:[{type:"filter",expr:`${i.SELECTED_GROUP} === datum.${e}_selectedGroupId`}]})},1805:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isSymbolShapeArray=t.isNumberArray=t.isStrokeDashArray=t.isLineTypeArray=t.isColors=t.isColorScale=t.addData=t.getOpacityScale=t.getLineWidthScale=t.getSymbolPathWidthScale=t.getSymbolSizeScale=t.getSymbolShapeScale=t.getLineTypeScale=t.getLinearColorScale=t.getColorScale=t.getTwoDimensionalOpacities=t.getTwoDimensionalLineTypes=t.getTwoDimensionalColorScheme=t.getDefaultSignals=t.removeUnusedScales=t.buildSpec=void 0;const n=a(2812),i=a(9633),r=a(1274),o=a(9868),l=a(8740),s=a(1036),d=a(8370),c=a(656),u=a(7441),g=a(7048),m=a(6065),p=a(4264),h=a(4926),f=a(9036),y=a(9780),S=a(1422),T=a(9679),b=a(6120);t.buildSpec=function({axes:e=[],backgroundColor:a=i.DEFAULT_BACKGROUND_COLOR,colors:n="categorical12",colorScheme:r=i.DEFAULT_COLOR_SCHEME,description:u,hiddenSeries:f=[],highlightedItem:S,highlightedSeries:_,idKey:O=i.MARK_ID,legends:L=[],lineTypes:$=i.DEFAULT_LINE_TYPES,lineWidths:A=["M"],marks:D=[],opacities:I,symbolShapes:P=["rounded-square"],symbolSizes:x=["XS","XL"],title:R,titles:M=[]}){var k,C;const H={axes:e,backgroundColor:a,colors:n,colorScheme:r,description:u,hiddenSeries:f,highlightedItem:S,highlightedSeries:_,idKey:O,legends:L,lineTypes:$,lineWidths:A,marks:D,opacities:I,symbolShapes:P,symbolSizes:x,title:R,titles:M};let F=(0,T.initializeSpec)(null,{backgroundColor:a,colorScheme:r,description:u,title:R});F.signals=(0,t.getDefaultSignals)(H),F.scales=E(n,r,$,A,I,P,x);let{areaCount:j,barCount:N,bulletCount:B,comboCount:G,donutCount:w,lineCount:V,scatterCount:U}=v();const W={colorScheme:r,idKey:O,highlightedItem:S};return F=[...D].reduce(((e,t)=>{switch(t.markType){case"area":return j++,(0,o.addArea)(e,Object.assign(Object.assign(Object.assign({},t),W),{index:j}));case"bar":return N++,(0,s.addBar)(e,Object.assign(Object.assign(Object.assign({},t),W),{index:N}));case"bullet":return B++,(0,d.addBullet)(e,Object.assign(Object.assign(Object.assign({},t),W),{index:B}));case"combo":return G++,(0,c.addCombo)(e,Object.assign(Object.assign(Object.assign({},t),W),{index:G}));case"donut":return w++,(0,g.addDonut)(e,Object.assign(Object.assign(Object.assign({},t),W),{index:w}));case"line":return V++,(0,h.addLine)(e,Object.assign(Object.assign(Object.assign({},t),W),{index:V}));case"scatter":return U++,(0,y.addScatter)(e,Object.assign(Object.assign(Object.assign({},t),W),{index:U}));case"bigNumber":return e;default:return console.error(`Invalid component type: ${t} is not a supported chart mark option child`),e}}),F),F=[...L].reduce(((e,t,a)=>(0,p.addLegend)(e,Object.assign(Object.assign(Object.assign({},t),W),{index:a,hiddenSeries:f,highlightedSeries:_}))),F),F=[...e].reduce(((e,t,a)=>(0,l.addAxis)(e,Object.assign(Object.assign(Object.assign({},t),W),{index:a}))),F),M.length&&(F=(0,b.addTitle)(F,M[0])),F=JSON.parse(JSON.stringify(F)),F.data=(0,t.addData)(null!==(k=F.data)&&void 0!==k?k:[],{facets:(0,T.getFacetsFromScales)(F.scales)}),_&&(0,m.setHoverOpacityForMarks)(null!==(C=F.marks)&&void 0!==C?C:[]),F=(0,t.removeUnusedScales)(F),F},t.removeUnusedScales=(0,n.produce)((e=>{var t;e.scales=null===(t=e.scales)||void 0===t?void 0:t.filter((e=>!("domain"in e&&e.domain&&"fields"in e.domain&&0===e.domain.fields.length)))}));const v=()=>({areaCount:-1,barCount:-1,comboCount:-1,donutCount:-1,bulletCount:-1,lineCount:-1,scatterCount:-1});t.getDefaultSignals=({backgroundColor:e,colors:a,colorScheme:n,lineTypes:o,opacities:l,hiddenSeries:s,highlightedItem:d,highlightedSeries:c})=>{const u="transparent"===e?"gray-50":e;return[(0,S.getGenericValueSignal)(i.BACKGROUND_COLOR,(0,r.getColorValue)(u,n)),(0,S.getGenericValueSignal)("colors",(0,t.getTwoDimensionalColorScheme)(a,n)),(0,S.getGenericValueSignal)("lineTypes",(0,t.getTwoDimensionalLineTypes)(o)),(0,S.getGenericValueSignal)("opacities",(0,t.getTwoDimensionalOpacities)(l)),(0,S.getGenericValueSignal)("hiddenSeries",null!=s?s:[]),(0,S.getGenericValueSignal)(i.HIGHLIGHTED_ITEM,d),(0,S.getGenericValueSignal)(i.HIGHLIGHTED_GROUP),(0,S.getGenericValueSignal)(i.HIGHLIGHTED_SERIES,c),(0,S.getGenericValueSignal)(i.SELECTED_ITEM),(0,S.getGenericValueSignal)(i.SELECTED_SERIES),(0,S.getGenericValueSignal)(i.SELECTED_GROUP)]},t.getTwoDimensionalColorScheme=(e,a)=>(0,t.isColors)(e)?_(e,a).map((e=>[e])):e.map((e=>_(e,a))),t.getTwoDimensionalLineTypes=e=>(0,t.isLineTypeArray)(e)?O(e).map((e=>[e])):e.map((e=>O(e))),t.getTwoDimensionalOpacities=e=>e?(0,t.isNumberArray)(e)?e.map((e=>[e])):e:[[1]];const E=(e,a,n,i,r,o,l)=>[(0,t.getColorScale)(e,a),(0,t.getLinearColorScale)(e,a),(0,t.getLineTypeScale)(n),(0,t.getLineWidthScale)(i),(0,t.getOpacityScale)(r),(0,t.getSymbolShapeScale)(o),(0,t.getSymbolSizeScale)(l),(0,t.getSymbolPathWidthScale)(l)];function _(e,t){return Array.isArray(e)?e.map((e=>(0,r.getColorValue)(e,t))):r.colorSchemes[e]}function O(e){return e.map((e=>(0,T.getStrokeDashFromLineType)(e)))}t.getColorScale=(e,a)=>{const n=(0,t.isColors)(e)?_(e,a):e.map((e=>_(e,a)[0]));return(0,f.getOrdinalScale)("color",n)},t.getLinearColorScale=(e,a)=>{const n=(0,t.isColors)(e)?_(e,a):e.map((e=>_(e,a)[0]));return{name:i.LINEAR_COLOR_SCALE,type:"linear",range:n,domain:{data:i.TABLE,fields:[]}}},t.getLineTypeScale=e=>{const a=(0,t.isLineTypeArray)(e)?O(e):e.map((e=>(0,T.getStrokeDashFromLineType)(e[0])));return(0,f.getOrdinalScale)(i.LINE_TYPE_SCALE,a)},t.getSymbolShapeScale=e=>{const a=(0,t.isSymbolShapeArray)(e)?function(e){return e.map((e=>(0,T.getPathFromSymbolShape)(e)))}(e):e.map((e=>(0,T.getPathFromSymbolShape)(e[0])));return(0,f.getOrdinalScale)(i.SYMBOL_SHAPE_SCALE,a)},t.getSymbolSizeScale=e=>({name:i.SYMBOL_SIZE_SCALE,type:"linear",zero:!1,range:e.map((e=>(0,T.getVegaSymbolSizeFromRscSymbolSize)(e))),domain:{data:i.TABLE,fields:[]}}),t.getSymbolPathWidthScale=e=>({name:i.SYMBOL_PATH_WIDTH_SCALE,type:"linear",zero:!1,range:e.map((e=>(0,T.getSymbolWidthFromRscSymbolSize)(e))),domain:{data:i.TABLE,fields:[]}}),t.getLineWidthScale=e=>{const t=e.map((e=>(0,T.getLineWidthPixelsFromLineWidth)(e)));return(0,f.getOrdinalScale)(i.LINE_WIDTH_SCALE,t)},t.getOpacityScale=e=>{if(null==e?void 0:e.length){const a=(0,t.isNumberArray)(e)?e:e.map((e=>e[0]));return(0,f.getOrdinalScale)(i.OPACITY_SCALE,a)}return{name:i.OPACITY_SCALE,type:"point",range:[1,0],padding:1,align:1,domain:{data:i.TABLE,fields:[]}}},t.addData=(0,n.produce)(((e,{facets:t})=>{var a,n,r;if(0===t.length)return;null===(n=null===(a=e[0])||void 0===a?void 0:a.transform)||void 0===n||n.push(...(0,u.getSeriesIdTransform)(t));const o=e.findIndex((e=>e.name===i.FILTERED_TABLE));-1!==o&&(e[o].transform=[{type:"filter",expr:`indexof(hiddenSeries, datum.${i.SERIES_ID}) === -1`},...null!==(r=e[o].transform)&&void 0!==r?r:[]])})),t.isColorScale=e=>Boolean(!Array.isArray(e)&&e in r.colorSchemes),t.isColors=e=>(0,t.isColorScale)(e)||e.some((e=>!(0,t.isColorScale)(e)&&"string"==typeof e)),t.isLineTypeArray=e=>e.some((e=>"string"==typeof e||(0,t.isStrokeDashArray)(e))),t.isStrokeDashArray=e=>Array.isArray(e)&&!e.some((e=>"number"!=typeof e)),t.isNumberArray=e=>!e.some((e=>Array.isArray(e))),t.isSymbolShapeArray=e=>!e.some((e=>Array.isArray(e)))},795:function(e,t,a){var n=this&&this.__rest||function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.addHighlightMarkOpacityRules=t.addTooltipSignals=t.isHighlightedByDimension=t.isHighlightedByGroup=t.getGroupIdTransform=t.addTooltipData=t.applyTooltipPropDefaults=t.getTooltips=void 0;const i=a(9633),r=a(7441),o=a(6924);t.getTooltips=e=>e.chartTooltips.map((a=>(0,t.applyTooltipPropDefaults)(a,e.name))),t.applyTooltipPropDefaults=(e,t)=>{var{highlightBy:a="item"}=e,i=n(e,["highlightBy"]);return Object.assign({highlightBy:a,markName:t},i)},t.addTooltipData=(e,a,n=!0)=>{const o=(0,t.getTooltips)(a);for(const{highlightBy:s,markName:d}of o){if("item"===s)return;const o=(0,r.getFilteredTableData)(e);o.transform||(o.transform=[]),"dimension"===s&&"donut"!==a.markType?o.transform.push((0,t.getGroupIdTransform)([a.dimension],d)):"series"===s?o.transform.push((0,t.getGroupIdTransform)([i.SERIES_ID],d)):Array.isArray(s)&&o.transform.push((0,t.getGroupIdTransform)(s,d)),n&&e.push(l(d))}},t.getGroupIdTransform=(e,t)=>({type:"formula",as:`${t}_highlightGroupId`,expr:e.map((e=>`datum.${e}`)).join(' + " | " + ')});const l=e=>({name:`${e}_highlightedData`,source:i.FILTERED_TABLE,transform:[{type:"filter",expr:`${i.HIGHLIGHTED_GROUP} === datum.${e}_highlightGroupId`}]});t.isHighlightedByGroup=e=>(0,t.getTooltips)(e).some((({highlightBy:e})=>e&&"item"!==e)),t.isHighlightedByDimension=e=>(0,t.getTooltips)(e).some((({highlightBy:e})=>"string"==typeof e&&["dimension","item"].includes(e))),t.addTooltipSignals=(e,a)=>{if((0,t.isHighlightedByGroup)(a)){const t=e.find((e=>e.name===i.HIGHLIGHTED_GROUP));let n=a.name,r=`datum.${n}_highlightGroupId`;"interactionMode"in a&&a.interactionMode===i.INTERACTION_MODE.ITEM&&(0,o.getHoverMarkNames)(n).forEach((e=>{s(t,e,r)})),["scatter","line"].includes(a.markType)&&(r=`datum.${r}`,n+="_voronoi"),s(t,n,r)}};const s=(e,t,a)=>{void 0===e.on&&(e.on=[]),e.on.push({events:`@${t}:mouseover`,update:a},{events:`@${t}:mouseout`,update:"null"})};t.addHighlightMarkOpacityRules=(e,a)=>{if(e.unshift({test:`isArray(${i.HIGHLIGHTED_ITEM}) && length(${i.HIGHLIGHTED_ITEM}) > 0 && indexof(${i.HIGHLIGHTED_ITEM}, datum.${a.idKey}) === -1`,value:1/i.HIGHLIGHT_CONTRAST_RATIO},{test:`!isArray(${i.HIGHLIGHTED_ITEM}) && isValid(${i.HIGHLIGHTED_ITEM}) && ${i.HIGHLIGHTED_ITEM} !== datum.${a.idKey}`,value:1/i.HIGHLIGHT_CONTRAST_RATIO}),(0,t.isHighlightedByGroup)(a)){const{name:t}=a;e.unshift(Object.assign({test:`${i.HIGHLIGHTED_GROUP} === datum.${t}_highlightGroupId`},i.DEFAULT_OPACITY_RULE))}}},656:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getComboMarkName=t.addCombo=void 0;const n=a(2812),i=a(9633),r=a(8365),o=a(1036),l=a(4926);t.addCombo=(0,n.produce)(((e,{colorScheme:a=i.DEFAULT_COLOR_SCHEME,highlightedItem:n,idKey:d,index:u=0,name:g,marks:m=[],dimension:p=i.DEFAULT_TIME_DIMENSION})=>{let{barCount:h,lineCount:f}=s();const y=(0,r.toCamelCase)(g||`combo${u}`);return[...m].reduce(((e,i)=>"bar"===i.markType?(h++,(0,o.addBar)(e,Object.assign(Object.assign({},i),{colorScheme:a,highlightedItem:n,idKey:d,index:h,name:(0,t.getComboMarkName)(i,y,h),dimension:c(i,p)}))):(f++,(0,l.addLine)(e,Object.assign(Object.assign({},i),{colorScheme:a,highlightedItem:n,idKey:d,index:f,name:(0,t.getComboMarkName)(i,y,f),dimension:c(i,p)})))),e)}));const s=()=>({barCount:-1,lineCount:-1});t.getComboMarkName=(e,t,a)=>{if(e.name)return e.name;const n=d(e.markType);return(0,r.combineNames)(t,`${n}${a}`)};const d=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"",c=(e,t)=>{var a;return null!==(a=e.dimension)&&void 0!==a?a:t}},7441:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilteredTooltipData=t.getSeriesIdTransform=t.getFilteredTableData=t.getTableData=t.getTransformSort=t.addTimeTransform=void 0;const n=a(2812),i=a(9633);t.addTimeTransform=(0,n.produce)(((e,t)=>{-1===e.findIndex((e=>"timeunit"===e.type))&&(e.push({type:"formula",expr:`toDate(datum["${t}"])`,as:t}),e.push({type:"timeunit",field:t,units:["year","month","date","hours","minutes"],as:[i.DEFAULT_TRANSFORMED_TIME_DIMENSION,`${i.DEFAULT_TIME_DIMENSION}1`]}))})),t.getTransformSort=e=>{if(e)return{field:e}},t.getTableData=e=>e.find((e=>e.name===i.TABLE)),t.getFilteredTableData=e=>e.find((e=>e.name===i.FILTERED_TABLE)),t.getSeriesIdTransform=e=>{if(0===e.length)return[];const t=e.map((e=>`datum.${e}`)).join(' + " | " + ');return[{type:"formula",as:i.SERIES_ID,expr:t}]},t.getFilteredTooltipData=e=>{var t;const a=null===(t=e[0])||void 0===t?void 0:t.excludeDataKeys,n=null==a?void 0:a.map((e=>({type:"filter",expr:`!datum.${e}`})));return{name:`${i.FILTERED_TABLE}ForTooltip`,source:i.FILTERED_TABLE,transform:n}}},7048:function(e,t,a){var n=this&&this.__rest||function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.addSignals=t.addMarks=t.addScales=t.addData=t.addDonut=void 0;const i=a(2812),r=a(9633),o=a(8365),l=a(6924),s=a(9036),d=a(1422),c=a(1181),u=a(3399),g=a(4202);t.addDonut=(0,i.produce)(((e,a)=>{var i,l,s,d,{chartPopovers:c=[],chartTooltips:u=[],color:g=r.DEFAULT_COLOR,colorScheme:m=r.DEFAULT_COLOR_SCHEME,donutSummaries:p=[],index:h=0,metric:f=r.DEFAULT_METRIC,name:y,startAngle:S=0,holeRatio:T=.85,isBoolean:b=!1,segmentLabels:v=[]}=a,E=n(a,["chartPopovers","chartTooltips","color","colorScheme","donutSummaries","index","metric","name","startAngle","holeRatio","isBoolean","segmentLabels"]);const _=Object.assign({chartPopovers:c,chartTooltips:u,color:g,colorScheme:m,donutSummaries:p,holeRatio:T,index:h,isBoolean:b,metric:f,name:(0,o.toCamelCase)(null!=y?y:`donut${h}`),segmentLabels:v,startAngle:S},E);e.data=(0,t.addData)(null!==(i=e.data)&&void 0!==i?i:[],_),e.scales=(0,t.addScales)(null!==(l=e.scales)&&void 0!==l?l:[],_),e.marks=(0,t.addMarks)(null!==(s=e.marks)&&void 0!==s?s:[],_),e.signals=(0,t.addSignals)(null!==(d=e.signals)&&void 0!==d?d:[],_)})),t.addData=(0,i.produce)(((e,t)=>{var a,n;const{name:i,isBoolean:o}=t,l=e.findIndex((e=>e.name===r.FILTERED_TABLE));e[l].transform=null!==(a=e[l].transform)&&void 0!==a?a:[],null===(n=e[l].transform)||void 0===n||n.push(...m(t)),o&&e.push({name:`${i}_booleanData`,source:r.FILTERED_TABLE,transform:[{type:"window",ops:["row_number"],as:[`${i}_rscRowIndex`]},{type:"filter",expr:`datum.${i}_rscRowIndex === 1`}]}),e.push(...(0,c.getDonutSummaryData)(t))}));const m=({startAngle:e,metric:t,name:a})=>[{type:"pie",field:t,startAngle:e,endAngle:{signal:`${e} + 2 * PI`},as:[`${a}_startAngle`,`${a}_endAngle`]},{type:"formula",as:`${a}_arcTheta`,expr:`(datum['${a}_startAngle'] + datum['${a}_endAngle']) / 2`},{type:"formula",as:`${a}_arcLength`,expr:`datum['${a}_endAngle'] - datum['${a}_startAngle']`},{type:"formula",as:`${a}_arcPercent`,expr:`datum['${a}_arcLength'] / (2 * PI)`}];t.addScales=(0,i.produce)(((e,t)=>{const{color:a}=t;(0,s.addFieldToFacetScaleDomain)(e,r.COLOR_SCALE,a),e.push(...(0,c.getDonutSummaryScales)(t))})),t.addMarks=(0,i.produce)(((e,t)=>{e.push((0,u.getArcMark)(t)),e.push(...(0,c.getDonutSummaryMarks)(t)),e.push(...(0,g.getSegmentLabelMarks)(t))})),t.addSignals=(0,i.produce)(((e,t)=>{var a;const{chartTooltips:n,idKey:i,name:r}=t;e.push(...(0,c.getDonutSummarySignals)(t)),(0,l.isInteractive)(t)&&(0,d.addHighlightedItemSignalEvents)(e,r,i,1,null===(a=n[0])||void 0===a?void 0:a.excludeDataKeys)}))},1181:function(e,t,a){var n=this&&this.__rest||function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.getSummaryLabelEncode=t.getSummaryValueLimit=t.getSummaryValueBaseline=t.getSummaryValueText=t.getBooleanDonutSummaryGroupMark=t.getDonutSummaryGroupMark=t.getDonutSummaryMarks=t.getDonutSummarySignals=t.getDonutSummaryScales=t.getDonutSummaryData=void 0;const i=a(9633),r=a(4563),o=e=>{if(e.donutSummaries.length)return l(e.donutSummaries[0],e)},l=(e,t)=>{var{numberFormat:a="shortNumber"}=e,i=n(e,["numberFormat"]);return Object.assign({donutOptions:t,numberFormat:a},i)};t.getDonutSummaryData=e=>!o(e)||e.isBoolean?[]:[{name:`${e.name}_summaryData`,source:i.FILTERED_TABLE,transform:[{type:"aggregate",fields:[e.metric],ops:["sum"],as:["sum"]}]}],t.getDonutSummaryScales=e=>o(e)?[{name:`${e.name}_summaryFontSizeScale`,type:"threshold",domain:[32,36,40,45,50,60],range:[28,32,36,40,45,50,60]}]:[],t.getDonutSummarySignals=e=>{if(!o(e))return[];const{name:t,holeRatio:a}=e;return[{name:`${t}_summaryFontSize`,update:`scale('${t}_summaryFontSizeScale', ${i.DONUT_RADIUS} * ${a} * ${i.DONUT_SUMMARY_FONT_SIZE_RATIO})`}]},t.getDonutSummaryMarks=e=>{const a=o(e);if(!a)return[];const n=[];return e.isBoolean?n.push((0,t.getBooleanDonutSummaryGroupMark)(a)):n.push((0,t.getDonutSummaryGroupMark)(a)),n},t.getDonutSummaryGroupMark=e=>{var a;const{donutOptions:n,label:i}=e,r={type:"group",name:`${n.name}_summaryGroup`,marks:[{type:"text",name:`${n.name}_summaryValue`,from:{data:`${n.name}_summaryData`},encode:s(e)}]};return i&&(null===(a=r.marks)||void 0===a||a.push({type:"text",name:`${n.name}_summaryLabel`,from:{data:`${n.name}_summaryData`},encode:(0,t.getSummaryLabelEncode)(Object.assign(Object.assign({},e),{label:i}))})),r},t.getBooleanDonutSummaryGroupMark=e=>{var a;const{donutOptions:n,label:i}=e,r={type:"group",name:`${n.name}_percentText`,marks:[{type:"text",name:`${n.name}_booleanSummaryValue`,from:{data:`${n.name}_booleanData`},encode:s(e)}]};return i&&(null===(a=r.marks)||void 0===a||a.push({type:"text",name:`${n.name}_booleanSummaryLabel`,from:{data:`${n.name}_booleanData`},encode:(0,t.getSummaryLabelEncode)(Object.assign(Object.assign({},e),{label:i}))})),r};const s=e=>{const{donutOptions:a,label:n}=e;return{update:{x:{signal:"width / 2"},y:{signal:"height / 2"},text:(0,t.getSummaryValueText)(e),fontSize:[{test:`${i.DONUT_RADIUS} * ${a.holeRatio} < ${i.DONUT_SUMMARY_MIN_RADIUS}`,value:0},{signal:`${a.name}_summaryFontSize`}],align:{value:"center"},baseline:(0,t.getSummaryValueBaseline)(n),limit:(0,t.getSummaryValueLimit)(e)}}};t.getSummaryValueText=({donutOptions:e,numberFormat:t})=>e.isBoolean?{signal:`format(datum['${e.metric}'], '.0%')`}:[...(0,r.getTextNumberFormat)(t,"sum"),{field:"sum"}],t.getSummaryValueBaseline=e=>e?{value:"alphabetic"}:{value:"middle"},t.getSummaryValueLimit=({donutOptions:e,label:t})=>{const{holeRatio:a,name:n}=e,r=t?`${n}_summaryFontSize`:`${n}_summaryFontSize * 0.5`;return{signal:`2 * sqrt(pow(${i.DONUT_RADIUS} * ${a}, 2) - pow(${r}, 2))`}},t.getSummaryLabelEncode=({donutOptions:e,label:t})=>({update:{x:{signal:"width / 2"},y:{signal:"height / 2"},dy:{signal:`ceil(${e.name}_summaryFontSize * 0.25)`},text:{value:t},fontSize:[{test:`${i.DONUT_RADIUS} * ${e.holeRatio} < ${i.DONUT_SUMMARY_MIN_RADIUS}`,value:0},{signal:`ceil(${e.name}_summaryFontSize * 0.5)`}],align:{value:"center"},baseline:{value:"top"},limit:{signal:`2 * sqrt(pow(${i.DONUT_RADIUS} * ${e.holeRatio}, 2) - pow(${e.name}_summaryFontSize * 0.75, 2))`}}})},3399:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getArcMark=void 0;const n=a(9633),i=a(1274),r=a(6924);t.getArcMark=e=>{const{chartPopovers:t,chartTooltips:a,color:o,colorScheme:l,holeRatio:s,idKey:d,name:c}=e;return{type:"arc",name:c,description:c,from:{data:n.FILTERED_TABLE},encode:{enter:{fill:(0,r.getColorProductionRule)(o,l),x:{signal:"width / 2"},y:{signal:"height / 2"},tooltip:(0,r.getTooltip)(a,c),stroke:{value:(0,i.getColorValue)("static-blue",l)}},update:{startAngle:{field:`${c}_startAngle`},endAngle:{field:`${c}_endAngle`},padAngle:{value:.01},innerRadius:{signal:`${s} * ${n.DONUT_RADIUS}`},outerRadius:{signal:n.DONUT_RADIUS},opacity:(0,r.getMarkOpacity)(e),cursor:(0,r.getCursor)(t),strokeWidth:[{test:`${n.SELECTED_ITEM} === datum.${d}`,value:2},{value:0}]}}}}},4202:function(e,t,a){var n=this&&this.__rest||function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.getSegmentLabelValueText=t.getSegmentLabelValueTextMark=t.getSegmentLabelTextMark=t.getSegmentLabelMarks=void 0;const i=a(9633),r=a(4563);t.getSegmentLabelMarks=e=>{const{isBoolean:a,name:i}=e;if(a)return[];const r=(e=>{if(e.segmentLabels.length)return((e,t)=>{var{percent:a=!1,value:i=!1,valueFormat:r="standardNumber"}=e,o=n(e,["percent","value","valueFormat"]);return Object.assign({donutOptions:t,percent:a,value:i,valueFormat:r},o)})(e.segmentLabels[0],e)})(e);return r?[{name:`${i}_segmentLabelGroup`,type:"group",marks:[(0,t.getSegmentLabelTextMark)(r),...(0,t.getSegmentLabelValueTextMark)(r)]}]:[]},t.getSegmentLabelTextMark=({labelKey:e,value:t,percent:a,donutOptions:n})=>{const{name:r,color:s}=n;return{type:"text",name:`${r}_segmentLabel`,from:{data:i.FILTERED_TABLE},encode:{enter:Object.assign(Object.assign({},o(r)),{text:{field:null!=e?e:s},fontWeight:{value:"bold"},dy:t||a?{signal:`datum['${r}_arcTheta'] <= 0.5 * PI || datum['${r}_arcTheta'] >= 1.5 * PI ? -16 : 0`}:void 0}),update:l}}},t.getSegmentLabelValueTextMark=e=>{if(!e.value&&!e.percent)return[];const{donutOptions:a}=e;return[{type:"text",name:`${a.name}_segmentLabelValue`,from:{data:i.FILTERED_TABLE},encode:{enter:Object.assign(Object.assign({},o(a.name)),{text:(0,t.getSegmentLabelValueText)(e),dy:{signal:`datum['${a.name}_arcTheta'] <= 0.5 * PI || datum['${a.name}_arcTheta'] >= 1.5 * PI ? 0 : 16`}}),update:l}}]};const o=e=>({radius:{signal:`${i.DONUT_RADIUS} + 6`},theta:{field:`${e}_arcTheta`},fontSize:s(e),align:{signal:`datum['${e}_arcTheta'] <= PI ? 'left' : 'right'`},baseline:{signal:`datum['${e}_arcTheta'] <= 0.5 * PI || datum['${e}_arcTheta'] >= 1.5 * PI ? 'bottom' : 'top'`}}),l={x:{signal:"width / 2"},y:{signal:"height / 2"}};t.getSegmentLabelValueText=({donutOptions:e,percent:t,value:a,valueFormat:n})=>{const i=`format(datum['${e.name}_arcPercent'], '.0%')`;if(a){const a=(0,r.getTextNumberFormat)(n,e.metric);return t?a.map((e=>Object.assign(Object.assign({},e),{signal:`${i} + "\\u00a0\\u00a0" + ${e.signal}`}))):a}if(t)return{signal:i}};const s=e=>[{test:`datum['${e}_arcLength'] < ${i.DONUT_SEGMENT_LABEL_MIN_ANGLE}`,value:0},{value:14}]},7783:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var i=Object.getOwnPropertyDescriptor(t,a);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,i)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),i=this&&this.__exportStar||function(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||n(t,e,a)};Object.defineProperty(t,"__esModule",{value:!0}),i(a(1805),t),i(a(9679),t),i(a(2025),t)},9516:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFacetsFromKeys=t.getFacets=void 0;const n=a(9633),i=[n.COLOR_SCALE,n.LINE_TYPE_SCALE,n.LINEAR_COLOR_SCALE,n.OPACITY_SCALE,"secondaryColor","secondaryLineType","secondaryOpacity","secondarySymbolShape",n.SYMBOL_SHAPE_SCALE,n.SYMBOL_SIZE_SCALE];t.getFacets=e=>{const t=[],a=[];return e.forEach((e=>{i.includes(e.name)&&o(e)&&e.domain.fields.length&&("ordinal"===e.type||"point"===e.type?t.push({facetType:e.name,field:e.domain.fields[0].toString()}):a.push({facetType:e.name,field:e.domain.fields[0].toString()}))})),{ordinalFacets:t,continuousFacets:a}},t.getFacetsFromKeys=(e,t)=>{const a=[],n=[];return t.forEach((t=>{var i,l;o(t)&&r(t,e)&&("ordinal"===t.type||"point"===t.type?a.push({facetType:t.name,field:null===(i=t.domain.fields.find((t=>e.includes(t.toString()))))||void 0===i?void 0:i.toString()}):n.push({facetType:t.name,field:null===(l=t.domain.fields.find((t=>e.includes(t.toString()))))||void 0===l?void 0:l.toString()}))})),{ordinalFacets:a,continuousFacets:n}};const r=(e,t)=>e.domain.fields.some((e=>t.includes(e.toString()))),o=e=>Boolean("domain"in e&&e.domain&&"fields"in e.domain)},6065:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.flattenMarks=t.markUsesSeriesColorScale=t.getHighlightOpacityRule=t.setHoverOpacityForMarks=void 0;const n=a(9633);t.setHoverOpacityForMarks=(e,a,n)=>{e.length&&(0,t.flattenMarks)(e).filter(t.markUsesSeriesColorScale).forEach((e=>{e.encode||(e.encode={update:{}}),e.encode.update||(e.encode.update={});const{update:i}=e.encode,{opacity:r}=i;if(void 0!==r){const e=(0,t.getHighlightOpacityRule)(a,n);Array.isArray(i.opacity)||(i.opacity=[]);const r=Math.max(i.opacity.length-1,0);i.opacity.splice(r,0,e)}}))},t.getHighlightOpacityRule=(e,t)=>{let a=`isValid(${n.HIGHLIGHTED_SERIES}) && ${n.HIGHLIGHTED_SERIES} !== datum.${n.SERIES_ID}`;return(null==e?void 0:e.length)&&(a=`isValid(${n.HIGHLIGHTED_GROUP}) && ${n.HIGHLIGHTED_GROUP} !== datum.${t}_highlightGroupId`),{test:a,value:1/n.HIGHLIGHT_CONTRAST_RATIO}},t.markUsesSeriesColorScale=e=>{var t;const a=null===(t=e.encode)||void 0===t?void 0:t.enter;if(!a)return!1;const{fill:i,stroke:r}=a;return!(!i||!("scale"in i)||i.scale!==n.COLOR_SCALE)||!!(i&&"signal"in i&&i.signal.includes("scale('colors',"))||!(!r||!("scale"in r)||r.scale!==n.COLOR_SCALE)},t.flattenMarks=e=>{let a=e;for(const n of e)i(n)&&n.marks&&(a=[...a,...(0,t.flattenMarks)(n.marks)]);return a};const i=e=>"group"===e.type},4264:function(e,t,a){var n=this&&this.__rest||function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.addSignals=t.addData=t.getContinuousLegend=t.formatFacetRefsWithPresets=t.addLegend=void 0;const i=a(2812),r=a(9633),o=a(1274),l=a(7441),s=a(9036),d=a(1422),c=a(9679),u=a(9516),g=a(6065),m=a(3143);t.addLegend=(0,i.produce)(((e,a)=>{var i,o,l,s,d,c,{color:g,hasMouseInteraction:m=!1,hasOnClick:h=!1,hiddenEntries:S=[],hiddenSeries:T=[],highlight:b=!1,highlightedSeries:v,index:E=0,isToggleable:_=!1,lineType:O,lineWidth:L,position:$="bottom",symbolShape:A,title:D,colorScheme:I=r.DEFAULT_COLOR_SCHEME}=a,P=n(a,["color","hasMouseInteraction","hasOnClick","hiddenEntries","hiddenSeries","highlight","highlightedSeries","index","isToggleable","lineType","lineWidth","position","symbolShape","title","colorScheme"]);const{formattedColor:x,formattedLineType:R,formattedLineWidth:M,formattedSymbolShape:k}=(0,t.formatFacetRefsWithPresets)(g,O,L,A,I),C=`legend${E}`,H=Object.assign({color:x,hasMouseInteraction:m,hasOnClick:h,hiddenEntries:S,hiddenSeries:T,highlight:b,highlightedSeries:v,index:E,isToggleable:_,lineType:R,lineWidth:M,name:C,position:$,symbolShape:k,title:D,colorScheme:I},P);e.scales=f(null!==(i=e.scales)&&void 0!==i?i:[],H);const{ordinalFacets:F,continuousFacets:j}=P.keys?(0,u.getFacetsFromKeys)(P.keys,null!==(o=e.scales)&&void 0!==o?o:[]):(0,u.getFacets)(null!==(l=e.scales)&&void 0!==l?l:[]),N=[];if(F.length){e.scales.push({name:`${C}Entries`,type:"ordinal",domain:{data:`${C}Aggregate`,field:`${C}Entries`}});const a=[...new Set(F.map((e=>e.field)))];e.data=(0,t.addData)(null!==(s=e.data)&&void 0!==s?s:[],Object.assign(Object.assign({},H),{facets:a})),e.signals=(0,t.addSignals)(null!==(d=e.signals)&&void 0!==d?d:[],H),e.marks=y(null!==(c=e.marks)&&void 0!==c?c:[],H),N.push(p(F,H))}j.forEach((e=>{N.push((0,t.getContinuousLegend)(e,H))})),void 0===e.legends&&(e.legends=[]),e.legends.push(...N)})),t.formatFacetRefsWithPresets=(e,t,a,n,i)=>{let r,l,s,d;return r=e&&"object"==typeof e?{value:(0,o.getColorValue)(e.value,i)}:e,l=t&&"object"==typeof t?{value:(0,c.getStrokeDashFromLineType)(t.value)}:t,s=a&&"object"==typeof a?{value:(0,c.getLineWidthPixelsFromLineWidth)(a.value)}:a,d=n&&"object"==typeof n?{value:(0,c.getPathFromSymbolShape)(n.value)}:n,{formattedColor:r,formattedLineType:l,formattedLineWidth:s,formattedSymbolShape:d}};const p=(e,t)=>{const{name:a,position:n,title:i,labelLimit:r}=t;return{fill:`${a}Entries`,direction:["top","bottom"].includes(n)?"horizontal":"vertical",orient:n,title:i,encode:(0,m.getEncodings)(e,t),columns:(0,m.getColumns)(n),labelLimit:r}};t.getContinuousLegend=(e,t)=>{const{symbolShape:a}=t;return e.facetType===r.SYMBOL_SIZE_SCALE?Object.assign(Object.assign({size:r.SYMBOL_SIZE_SCALE},h(t)),{symbolType:(0,m.getSymbolType)(a)}):Object.assign({fill:r.LINEAR_COLOR_SCALE,gradientThickness:10},h(t))};const h=({position:e,title:t})=>({direction:["top","bottom"].includes(e)?"horizontal":"vertical",orient:e,title:t}),f=(0,i.produce)(((e,{color:t,lineType:a,opacity:n,symbolShape:i})=>{(0,s.addFieldToFacetScaleDomain)(e,r.COLOR_SCALE,t),(0,s.addFieldToFacetScaleDomain)(e,r.LINE_TYPE_SCALE,a),(0,s.addFieldToFacetScaleDomain)(e,r.OPACITY_SCALE,n),(0,s.addFieldToFacetScaleDomain)(e,r.SYMBOL_SHAPE_SCALE,i)})),y=(0,i.produce)(((e,{highlight:t,keys:a,name:n})=>{t&&(0,g.setHoverOpacityForMarks)(e,a,n)}));t.addData=(0,i.produce)(((e,{facets:t,hiddenEntries:a,keys:n,name:i})=>{const r=t.map((e=>`datum.${e}`)).join(' + " | " + ');if(e.push({name:`${i}Aggregate`,source:"table",transform:[{type:"aggregate",groupby:t},{type:"formula",as:`${i}Entries`,expr:r},...(0,m.getHiddenEntriesFilter)(a,i)]}),null==n?void 0:n.length){const t=(0,l.getTableData)(e);t.transform||(t.transform=[]),t.transform.push({type:"formula",as:`${i}_highlightGroupId`,expr:n.map((e=>`datum.${e}`)).join(' + " | " + ')})}})),t.addSignals=(0,i.produce)(((e,{hiddenSeries:t,highlight:a,isToggleable:n,keys:i,legendLabels:r,name:o})=>{a&&(0,d.addHighlighSignalLegendHoverEvents)(e,o,Boolean(n||t),i),r&&e.push((0,d.getGenericValueSignal)(`${o}_labels`,r))}))},3143:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getSymbolType=t.mergeLegendEncodings=t.getShowHideEncodings=t.getHiddenSeriesColorRule=t.getSymbolEncodings=t.getOpacityEncoding=t.getEncodings=t.getHiddenEntriesFilter=t.getColumns=void 0;const i=n(a(2743)),r=a(9633),o=a(1274),l=a(9679);t.getColumns=e=>{if(!["left","right"].includes(e))return{signal:"floor(width / 220)"}},t.getHiddenEntriesFilter=(e,t)=>e.length?[{type:"filter",expr:`indexof(${JSON.stringify(e)}, datum.${t}Entries) === -1`}]:[],t.getEncodings=(e,a)=>{const n=(0,t.getSymbolEncodings)(e,a),i=d(e,a),r=s(a.name,a.legendLabels),o=(0,t.getShowHideEncodings)(a);return(0,t.mergeLegendEncodings)([n,r,i,o])};const s=(e,t)=>t?{labels:{update:{text:[{test:`indexof(pluck(${e}_labels, 'seriesName'), datum.value) > -1`,signal:`${e}_labels[indexof(pluck(${e}_labels, 'seriesName'), datum.value)].label`},{signal:"datum.value"}]}}}:{},d=(e,a)=>{const{highlight:n,highlightedSeries:i,name:r,hasMouseInteraction:o,descriptions:l}=a;return n||i||l?{entries:{name:`${r}_legendEntry`,interactive:!0,enter:{tooltip:c(l,r)},update:{fill:{value:"transparent"}}},labels:{update:{opacity:(0,t.getOpacityEncoding)(a)}},symbols:{update:{opacity:(0,t.getOpacityEncoding)(a)}}}:o?{entries:{name:`${r}_legendEntry`,interactive:!0,enter:{fill:{value:"transparent"}}}}:{}},c=(e,t)=>{if(null==e?void 0:e.length)return{signal:`merge(datum, {'${r.COMPONENT_NAME}': '${t}'})`}};t.getOpacityEncoding=({highlight:e,highlightedSeries:t,keys:a})=>{const n=(null==a?void 0:a.length)?r.HIGHLIGHTED_GROUP:r.HIGHLIGHTED_SERIES;if(e||t)return[{test:`isValid(${n}) && datum.value !== ${n}`,value:1/r.HIGHLIGHT_CONTRAST_RATIO},r.DEFAULT_OPACITY_RULE]},t.getSymbolEncodings=(e,a)=>{var n,i;const{color:l,lineType:s,lineWidth:d,name:c,opacity:g,symbolShape:m,colorScheme:p}=a,h={fillOpacity:u({facets:e,facetType:r.OPACITY_SCALE,customValue:g,name:c}),shape:u({facets:e,facetType:r.SYMBOL_SHAPE_SCALE,customValue:m,name:c}),size:u({facets:e,facetType:r.SYMBOL_SIZE_SCALE,name:c}),strokeDash:u({facets:e,facetType:r.LINE_TYPE_SCALE,customValue:s,name:c}),strokeWidth:u({facets:e,facetType:r.LINE_WIDTH_SCALE,customValue:d,name:c})},f={fill:[...(0,t.getHiddenSeriesColorRule)(a,"gray-300"),null!==(n=u({facets:e,facetType:r.COLOR_SCALE,customValue:l,name:c}))&&void 0!==n?n:{value:o.spectrumColors[p]["categorical-100"]}],stroke:[...(0,t.getHiddenSeriesColorRule)(a,"gray-300"),null!==(i=u({facets:e,facetType:r.COLOR_SCALE,customValue:l,name:c}))&&void 0!==i?i:{value:o.spectrumColors[p]["categorical-100"]}]};return{entries:{name:`${c}_legendEntry`},symbols:JSON.parse(JSON.stringify({enter:h,update:f}))}};const u=({customValue:e,facets:t,facetType:a,name:n})=>{if(e)return"string"==typeof e?{signal:`scale('${a}', data('${n}Aggregate')[datum.index].${e})`}:{value:e.value};if(!t)return;const i={color:{scale:"secondaryColor",signal:"colors"},linearColor:{scale:"secondaryColor",signal:"colors"},lineType:{scale:"secondaryLineType",signal:"lineTypes"},lineWidth:{scale:"secondaryLineWidth",signal:"lineWidths"},opacity:{scale:"secondaryOpacity",signal:"opacities"},symbolShape:{scale:"secondarySymbolShape",signal:"symbolShapes"},symbolSize:{scale:"secondarySymbolSize",signal:"symbolSizes"},symbolPathWidth:{scale:"secondarySymbolPathWidth",signal:"symbolPathWidths"}},r=t.find((e=>e.facetType===a));if(!r)return;const o=t.find((e=>e.facetType===i[a].scale));if(o){const{scale:e,signal:t}=i[a];return{signal:`scale('${t}', data('${n}Aggregate')[datum.index].${r.field})[indexof(domain('${e}'), data('${n}Aggregate')[datum.index].${o.field})% length(scale('${t}', data('${n}Aggregate')[datum.index].${r.field}))]`}}return{signal:`scale('${a}', data('${n}Aggregate')[datum.index].${r.field})`}};t.getHiddenSeriesColorRule=({colorScheme:e,hiddenSeries:t,isToggleable:a,keys:n,name:i},l)=>a||t.length?(null==n?void 0:n.length)?[{test:`indexof(pluck(data('${r.FILTERED_TABLE}'), '${i}_highlightGroupId'), datum.value) === -1`,value:(0,o.getColorValue)(l,e)}]:[{test:"indexof(hiddenSeries, datum.value) !== -1",value:(0,o.getColorValue)(l,e)}]:[],t.getShowHideEncodings=e=>{const{colorScheme:a,hiddenSeries:n,isToggleable:i,keys:r,name:l,hasOnClick:s}=e;let d={};(n||i)&&(d={labels:{update:{fill:[...(0,t.getHiddenSeriesColorRule)(e,"gray-500"),{value:(0,o.getColorValue)("gray-700",a)}]}}});let c={};return(i&&!r||s)&&(c={entries:{name:`${l}_legendEntry`,interactive:!0,enter:{fill:{value:"transparent"},cursor:{value:"pointer"}}}}),(0,t.mergeLegendEncodings)([d,c])},t.mergeLegendEncodings=e=>{let t={};for(const a of e)t=(0,i.default)(t,a);return t},t.getSymbolType=e=>e&&"object"==typeof e&&"value"in e?(0,l.getPathFromSymbolShape)(e.value):"circle"},8233:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getLineStaticPointData=t.getLineHighlightedData=void 0;const n=a(9633);t.getLineHighlightedData=(e,t,a,i,r)=>{const o=r?`${n.HIGHLIGHTED_GROUP} === datum.${e}_highlightGroupId`:`isArray(${n.HIGHLIGHTED_ITEM}) && indexof(${n.HIGHLIGHTED_ITEM}, datum.${t}) > -1  || ${n.HIGHLIGHTED_ITEM} === datum.${t}`;return{name:`${e}_highlightedData`,source:a,transform:[{type:"filter",expr:i?`${n.SELECTED_ITEM} && ${n.SELECTED_ITEM} === datum.${t} || !${n.SELECTED_ITEM} && ${o}`:o}]}},t.getLineStaticPointData=(e,t,a,n,i)=>({name:`${e}_staticPointData`,source:a,transform:[{type:"filter",expr:n&&i?"datum === data('table')[data('table').length - 1]":`datum.${t} === true`}]})},2102:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getLineHoverMarks=t.getLineOpacity=t.getLineMark=void 0;const n=a(9633),i=a(1119),r=a(6924),o=a(6329);t.getLineMark=(e,a)=>{const{chartPopovers:n,color:o,colorScheme:l,dimension:s,lineType:d,lineWidth:c,metric:u,metricAxis:g,name:m,opacity:p,scaleType:h}=e,f=(0,i.getPopovers)(null!=n?n:[],m).some((({UNSAFE_highlightBy:e})=>"dimension"===e));return{name:m,description:m,type:"line",from:{data:a},interactive:!1,encode:{enter:{y:(0,r.getYProductionRule)(g,u),stroke:(0,r.getColorProductionRule)(o,l),strokeDash:(0,r.getStrokeDashProductionRule)(d),strokeOpacity:(0,r.getOpacityProductionRule)(p),strokeWidth:(0,r.getLineWidthProductionRule)(c)},update:Object.assign({x:(0,r.getXProductionRule)(h,s)},f?{}:{opacity:(0,t.getLineOpacity)(e)})}}},t.getLineOpacity=({displayOnHover:e,interactiveMarkName:t,popoverMarkName:a,isHighlightedByGroup:i,highlightedItem:r})=>{if((!t||e)&&void 0===r)return[n.DEFAULT_OPACITY_RULE];const o=[];return i&&o.push({test:`indexof(pluck(data('${t}_highlightedData'), '${n.SERIES_ID}'), datum.${n.SERIES_ID}) !== -1`,value:1}),o.push({test:`isValid(${n.HIGHLIGHTED_SERIES}) && ${n.HIGHLIGHTED_SERIES} !== datum.${n.SERIES_ID}`,value:1/n.HIGHLIGHT_CONTRAST_RATIO},{test:`length(data('${t}_highlightedData')) > 0 && indexof(pluck(data('${t}_highlightedData'), '${n.SERIES_ID}'), datum.${n.SERIES_ID}) === -1`,value:1/n.HIGHLIGHT_CONTRAST_RATIO}),a&&o.push({test:`isValid(${n.SELECTED_SERIES}) && ${n.SELECTED_SERIES} !== datum.${n.SERIES_ID}`,value:1/n.HIGHLIGHT_CONTRAST_RATIO}),o.push(n.DEFAULT_OPACITY_RULE),o},t.getLineHoverMarks=(e,t,a)=>{const{dimension:n,name:i,scaleType:d}=e;return[l(n,i,d),(0,o.getHighlightBackgroundPoint)(e),...(0,r.hasPopover)(e)?[(0,o.getSelectRingPoint)(e),(0,o.getSelectionPoint)(e)]:[],(0,o.getHighlightPoint)(e),...a?[(0,o.getSecondaryHighlightPoint)(e,a)]:[],...s(t,e)]};const l=(e,t,a)=>({name:`${t}_hoverRule`,description:`${t}_hoverRule`,type:"rule",from:{data:`${t}_highlightedData`},interactive:!1,encode:{enter:{y:{value:0},y2:{signal:"height"},strokeWidth:{value:1}},update:{x:(0,r.getXProductionRule)(a,e),opacity:{signal:`length(data('${t}_selectedData')) > 0 ? 0 : 1`}}}}),s=(e,t)=>{const{interactionMode:a=n.DEFAULT_INTERACTION_MODE}=t;return{nearest:d,item:c}[a](t,e)},d=(e,t)=>{const{dimension:a,metric:n,metricAxis:i,name:o,scaleType:l}=e;return[(0,r.getPointsForVoronoi)(t,a,n,o,l,i),(0,r.getVoronoiPath)(e,`${o}_pointsForVoronoi`)]},c=(e,t)=>{const{chartTooltips:a=[],dimension:n,metric:i,metricAxis:o,name:l,scaleType:s}=e;return[(0,r.getItemHoverArea)(a,t,n,i,l,s,o)]}},6329:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSelectRingPoint=t.getHighlightPointStrokeWidth=t.getHighlightPointSize=t.getHighlightPointStrokeOpacity=t.getHighlightPointStroke=t.getHighlightPointFill=t.getSecondaryHighlightPoint=t.getSelectionPoint=t.getHighlightPoint=t.getHighlightBackgroundPoint=t.getLineStaticPoint=void 0;const n=a(9633),i=a(1274),r=a(6924),o=e=>`datum.${e} && datum.${e} === true`,l=(e,t)=>`(${n.SELECTED_ITEM} && ${n.SELECTED_ITEM} === datum.${t}) || (${n.SELECTED_GROUP} && ${n.SELECTED_GROUP} === datum.${e}_selectedGroupId)`;t.getLineStaticPoint=({name:e,metric:t,metricAxis:a,color:i,colorScheme:o,scaleType:l,dimension:s,isSparkline:d,pointSize:c=125})=>({name:`${e}_staticPoints`,description:`${e}_staticPoints`,type:"symbol",from:{data:`${e}_staticPointData`},interactive:!1,encode:{enter:{size:{value:c},fill:d?{signal:n.BACKGROUND_COLOR}:(0,r.getColorProductionRule)(i,o),stroke:d?(0,r.getColorProductionRule)(i,o):{signal:n.BACKGROUND_COLOR},y:(0,r.getYProductionRule)(a,t)},update:{x:(0,r.getXProductionRule)(l,s)}}}),t.getHighlightBackgroundPoint=e=>{const{dimension:a,metric:i,metricAxis:o,name:l,scaleType:s}=e;return{name:`${l}_pointBackground`,description:`${l}_pointBackground`,type:"symbol",from:{data:`${l}_highlightedData`},interactive:!1,encode:{enter:{y:(0,r.getYProductionRule)(o,i),fill:{signal:n.BACKGROUND_COLOR},stroke:{signal:n.BACKGROUND_COLOR}},update:{size:(0,t.getHighlightPointSize)(e),strokeWidth:(0,t.getHighlightPointStrokeWidth)(e),x:(0,r.getXProductionRule)(s,a)}}}};const s=(e,a=!0)=>{const{color:n,colorScheme:i,dimension:o,metric:l,metricAxis:s,name:d,scaleType:c}=e;return{name:`${d}_point_${a?"highlight":"select"}`,type:"symbol",from:{data:`${d}${a?"_highlightedData":"_selectedData"}`},interactive:!1,encode:{enter:{y:(0,r.getYProductionRule)(s,l),stroke:(0,r.getColorProductionRule)(n,i)},update:{fill:(0,t.getHighlightPointFill)(e),size:(0,t.getHighlightPointSize)(e),stroke:(0,t.getHighlightPointStroke)(e),strokeOpacity:(0,t.getHighlightPointStrokeOpacity)(e),strokeWidth:(0,t.getHighlightPointStrokeWidth)(e),x:(0,r.getXProductionRule)(c,o)}}}};t.getHighlightPoint=e=>s(e,!0),t.getSelectionPoint=e=>s(e,!1),t.getSecondaryHighlightPoint=(e,t)=>{const{color:a,colorScheme:i,dimension:o,metricAxis:l,name:s,scaleType:d}=e;return{name:`${s}_secondaryPoint`,type:"symbol",from:{data:`${s}_highlightedData`},interactive:!1,encode:{enter:{y:(0,r.getYProductionRule)(l,t),fill:{signal:n.BACKGROUND_COLOR},stroke:(0,r.getColorProductionRule)(a,i)},update:{x:(0,r.getXProductionRule)(d,o)}}}},t.getHighlightPointFill=e=>{const{color:t,colorScheme:a,idKey:i,name:s,staticPoint:d}=e,c=[],u=l(s,i);return d&&c.push(Object.assign({test:o(d)},(0,r.getColorProductionRule)(t,a))),(0,r.hasPopover)(e)&&c.push(Object.assign({test:u},(0,r.getColorProductionRule)(t,a))),[...c,{signal:n.BACKGROUND_COLOR}]},t.getHighlightPointStroke=e=>{const{color:t,colorScheme:a,idKey:i,name:s,staticPoint:d}=e,c=[],u=l(s,i);return d&&c.push(Object.assign({test:o(d)},(0,r.getColorProductionRule)(t,a))),(0,r.hasPopover)(e)&&c.push({test:u,signal:n.BACKGROUND_COLOR}),[...c,(0,r.getColorProductionRule)(t,a)]},t.getHighlightPointStrokeOpacity=({opacity:e,staticPoint:t})=>{const a=(0,r.getOpacityProductionRule)(e),n=[];return t&&n.push(Object.assign({test:o(t)},(0,r.getHighlightOpacityValue)(a))),[...n,a]},t.getHighlightPointSize=({staticPoint:e})=>{const t=[];return e&&t.push({test:o(e),value:64}),[...t,{value:n.DEFAULT_SYMBOL_SIZE}]},t.getHighlightPointStrokeWidth=({staticPoint:e})=>{const t=[];return e&&t.push({test:o(e),value:6}),[...t,{value:n.DEFAULT_SYMBOL_STROKE_WIDTH}]},t.getSelectRingPoint=e=>{const{colorScheme:t,dimension:a,idKey:o,metric:s,metricAxis:d,name:c,scaleType:u}=e,g=l(c,o);return{name:`${c}_pointSelectRing`,type:"symbol",from:{data:`${c}_selectedData`},interactive:!1,encode:{enter:{y:(0,r.getYProductionRule)(d,s),fill:{signal:n.BACKGROUND_COLOR},stroke:{value:(0,i.getColorValue)("static-blue",t)}},update:{size:[{test:g,value:196},{value:0}],strokeWidth:[{test:g,value:n.DEFAULT_SYMBOL_STROKE_WIDTH},{value:0}],x:(0,r.getXProductionRule)(u,a)}}}}},4926:function(e,t,a){var n=this&&this.__rest||function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.addLineMarks=t.setScales=t.addSignals=t.addData=t.addLine=void 0;const i=a(2812),r=a(9633),o=a(8365),l=a(1119),s=a(795),d=a(7441),c=a(6924),u=a(4447),g=a(9036),m=a(1422),p=a(9679),h=a(4189),f=a(8233),y=a(2102),S=a(6329),T=a(5009);t.addLine=(0,i.produce)(((e,a)=>{var i,l,d,u,{chartPopovers:g=[],chartTooltips:m=[],color:p={value:"categorical-100"},colorScheme:h=r.DEFAULT_COLOR_SCHEME,dimension:f=r.DEFAULT_TIME_DIMENSION,hasOnClick:y=!1,index:S=0,lineType:b={value:"solid"},metric:v=r.DEFAULT_METRIC,metricAxis:E,metricRanges:_=[],name:O,opacity:L={value:1},scaleType:$="time",trendlines:A=[]}=a,D=n(a,["chartPopovers","chartTooltips","color","colorScheme","dimension","hasOnClick","index","lineType","metric","metricAxis","metricRanges","name","opacity","scaleType","trendlines"]);const I=(0,o.toCamelCase)(O||`line${S}`),P=Object.assign({chartPopovers:g,chartTooltips:m,color:p,colorScheme:h,dimension:f,hasOnClick:y,index:S,interactiveMarkName:(0,c.getInteractiveMarkName)({chartPopovers:g,chartTooltips:m,hasOnClick:y,highlightedItem:D.highlightedItem,metricRanges:_,trendlines:A},I),lineType:b,metric:v,metricAxis:E,metricRanges:_,name:I,opacity:L,popoverMarkName:(0,T.getPopoverMarkName)(g,I),scaleType:$,trendlines:A},D);return P.isHighlightedByGroup=(0,s.isHighlightedByGroup)(P),e.data=(0,t.addData)(null!==(i=e.data)&&void 0!==i?i:[],P),e.signals=(0,t.addSignals)(null!==(l=e.signals)&&void 0!==l?l:[],P),e.scales=(0,t.setScales)(null!==(d=e.scales)&&void 0!==d?d:[],P),e.marks=(0,t.addLineMarks)(null!==(u=e.marks)&&void 0!==u?u:[],P),e})),t.addData=(0,i.produce)(((e,t)=>{var a;const{chartTooltips:n,dimension:i,highlightedItem:o,isSparkline:g,isMethodLast:m,name:p,scaleType:y,staticPoint:S}=t;if("time"===y){const t=(0,d.getTableData)(e);t.transform=(0,d.addTimeTransform)(null!==(a=t.transform)&&void 0!==a?a:[],i)}((0,c.isInteractive)(t)||void 0!==o)&&(e.push((0,f.getLineHighlightedData)(p,t.idKey,r.FILTERED_TABLE,(0,c.hasPopover)(t),(0,s.isHighlightedByGroup)(t))),e.push((0,d.getFilteredTooltipData)(n))),(S||g)&&e.push((0,f.getLineStaticPointData)(p,S,r.FILTERED_TABLE,g,m)),(0,h.addTrendlineData)(e,t),(0,s.addTooltipData)(e,t,!1),(0,l.addPopoverData)(e,t),e.push(...(0,u.getMetricRangeData)(t))})),t.addSignals=(0,i.produce)(((e,t)=>{const{idKey:a,name:n}=t;(0,h.setTrendlineSignals)(e,t),e.push(...(0,u.getMetricRangeSignals)(t)),(0,c.isInteractive)(t)&&((0,m.addHighlightedItemSignalEvents)(e,`${n}_voronoi`,a,2),(0,m.addHighlightedSeriesSignalEvents)(e,`${n}_voronoi`,2),v(e,t),(0,s.addTooltipSignals)(e,t))})),t.setScales=(0,i.produce)(((e,t)=>{const{metricAxis:a,dimension:n,color:i,lineType:o,opacity:l,padding:s,scaleType:d}=t;return(0,g.addContinuousDimensionScale)(e,{scaleType:d,dimension:n,padding:s}),(0,g.addFieldToFacetScaleDomain)(e,r.COLOR_SCALE,i),(0,g.addFieldToFacetScaleDomain)(e,r.LINE_TYPE_SCALE,o),(0,g.addFieldToFacetScaleDomain)(e,r.OPACITY_SCALE,l),(0,g.addMetricScale)(e,b(t)),a&&(0,g.addMetricScale)(e,b(t),"y",a),e.push(...(0,h.getTrendlineScales)(t)),e})),t.addLineMarks=(0,i.produce)(((e,t)=>{const{color:a,highlightedItem:n,isSparkline:i,lineType:o,name:l,opacity:s,staticPoint:d}=t,{facets:g}=(0,p.getFacetsFromOptions)({color:a,lineType:o,opacity:s});e.push({name:`${l}_group`,type:"group",from:{facet:{name:`${l}_facet`,data:r.FILTERED_TABLE,groupby:g}},marks:[(0,y.getLineMark)(t,`${l}_facet`)]}),(d||i)&&e.push((0,S.getLineStaticPoint)(t)),e.push(...(0,u.getMetricRangeGroupMarks)(t)),((0,c.isInteractive)(t)||void 0!==n)&&e.push(...(0,y.getLineHoverMarks)(t,`${r.FILTERED_TABLE}ForTooltip`)),e.push(...(0,h.getTrendlineMarks)(t))}));const b=e=>{const t=[e.metric];return(0,u.getMetricRanges)(e).forEach((e=>{e.scaleAxisToFit&&t.push(e.metricStart,e.metricEnd)})),t},v=(e,t)=>{const{idKey:a,interactionMode:n,name:i}=t;n===r.INTERACTION_MODE.ITEM&&(0,c.getHoverMarkNames)(i).forEach((t=>{(0,m.addHighlightedItemSignalEvents)(e,t,a,1),(0,m.addHighlightedSeriesSignalEvents)(e,t,1)}))}},5009:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getPopoverMarkName=void 0,t.getPopoverMarkName=(e,t)=>{if(e.length)return t}},6924:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getInteractiveMarkName=t.getMarkOpacity=t.getHoverMarkNames=t.getHoverSizes=t.getHoverMarkName=t.getItemHoverArea=t.getVoronoiPath=t.getPointsForVoronoi=t.getYProductionRule=t.getXProductionRule=t.getHighlightOpacityValue=t.getStrokeDashProductionRule=t.getSymbolSizeProductionRule=t.getOpacityProductionRule=t.getLineWidthProductionRule=t.getColorProductionRuleSignalString=t.getColorProductionRule=t.hasTooltip=t.hasPopover=t.isInteractive=t.getBorderStrokeEncodings=t.getTooltip=t.getCursor=void 0;const n=a(9633),i=a(1274),r=a(795),o=a(9036),l=a(9679);function s(e,t,a){if(e.length){const i={signal:`merge(datum${a?".datum":""}, {'${n.COMPONENT_NAME}': '${t}'})`},r=e[0].excludeDataKeys;return(null==r?void 0:r.length)?[...r.map((e=>({test:`datum.${e}`,signal:"false"}))),i]:i}}t.getCursor=(e,t)=>{if(t||e.length)return{value:"pointer"}},t.getTooltip=s,t.getBorderStrokeEncodings=(e,t=!1)=>e?{stroke:{signal:n.BACKGROUND_COLOR},strokeWidth:{value:t?1.5:1},strokeJoin:{value:"round"}}:{},t.isInteractive=e=>{const a="hasOnClick"in e&&e.hasOnClick,n="metricRanges"in e&&e.metricRanges||[],i="trendlines"in e&&e.trendlines||[];return a||(0,t.hasPopover)(e)||(0,t.hasTooltip)(e)||i.some((e=>e.displayOnHover))||n.some((e=>e.displayOnHover))},t.hasPopover=e=>{var t;return Boolean("chartPopovers"in e&&(null===(t=e.chartPopovers)||void 0===t?void 0:t.length))},t.hasTooltip=e=>{var t;return Boolean("chartTooltips"in e&&(null===(t=e.chartTooltips)||void 0===t?void 0:t.length))},t.getColorProductionRule=(e,t,a="ordinal")=>{const r="linear"===a?n.LINEAR_COLOR_SCALE:n.COLOR_SCALE;return Array.isArray(e)?{signal:`scale('colors', datum.${e[0]})[indexof(domain('secondaryColor'), datum.${e[1]})% length(scale('colors', datum.${e[0]}))]`}:"string"==typeof e?{scale:r,field:e}:{value:(0,i.getColorValue)(e.value,t)}},t.getColorProductionRuleSignalString=(e,a,n="ordinal")=>{const i=(0,t.getColorProductionRule)(e,a,n);return"signal"in i?i.signal:"scale"in i&&"field"in i?`scale('${i.scale}', datum.${i.field})`:"value"in i&&i.value?`'${i.value}'`:""},t.getLineWidthProductionRule=e=>{if(e)return Array.isArray(e)?{signal:`scale('lineWidths', datum.${e[0]})[indexof(domain('secondaryLineWidth'), datum.${e[1]})% length(scale('lineWidths', datum.${e[0]}))]`}:"string"==typeof e?{scale:n.LINE_WIDTH_SCALE,field:e}:{value:(0,l.getLineWidthPixelsFromLineWidth)(e.value)}},t.getOpacityProductionRule=e=>Array.isArray(e)?{signal:`scale('opacities', datum.${e[0]})[indexof(domain('secondaryOpacity'), datum.${e[1]})% length(scale('opacities', datum.${e[0]}))]`}:"string"==typeof e?{signal:`scale('${n.OPACITY_SCALE}', datum.${e})`}:{value:e.value},t.getSymbolSizeProductionRule=e=>"string"==typeof e?{scale:n.SYMBOL_SIZE_SCALE,field:e}:{value:(0,l.getVegaSymbolSizeFromRscSymbolSize)(e.value)},t.getStrokeDashProductionRule=e=>Array.isArray(e)?{signal:`scale('lineTypes', datum.${e[0]})[indexof(domain('secondaryLineType'), datum.${e[1]})% length(scale('lineTypes', datum.${e[0]}))]`}:"string"==typeof e?{scale:n.LINE_TYPE_SCALE,field:e}:{value:(0,l.getStrokeDashFromLineType)(e.value)},t.getHighlightOpacityValue=(e=n.DEFAULT_OPACITY_RULE)=>"signal"in e?{signal:`${e.signal} / ${n.HIGHLIGHT_CONTRAST_RATIO}`}:{value:e.value/n.HIGHLIGHT_CONTRAST_RATIO},t.getXProductionRule=(e,t)=>{const a=(0,o.getScaleName)("x",e);return"time"===e?{scale:a,field:n.DEFAULT_TRANSFORMED_TIME_DIMENSION}:{scale:a,field:t}},t.getYProductionRule=(e,t)=>({scale:e||"yLinear",field:t}),t.getPointsForVoronoi=(e,a,n,i,r,o)=>({name:`${i}_pointsForVoronoi`,description:`${i}_pointsForVoronoi`,type:"symbol",from:{data:e},interactive:!1,encode:{enter:{y:(0,t.getYProductionRule)(o,n),fill:{value:"transparent"},stroke:{value:"transparent"}},update:{x:(0,t.getXProductionRule)(r,a)}}}),t.getVoronoiPath=(e,a)=>{const{chartPopovers:n,chartTooltips:i,name:r}=e,o="hasOnClick"in e&&e.hasOnClick;return{name:`${r}_voronoi`,description:`${r}_voronoi`,type:"path",from:{data:a},encode:{enter:{fill:{value:"transparent"},stroke:{value:"transparent"},isVoronoi:{value:!0},tooltip:s(null!=i?i:[],r,!0)},update:{cursor:(0,t.getCursor)(null!=n?n:[],o)}},transform:[{type:"voronoi",x:"datum.x",y:"datum.y",size:[{signal:"max(width, 1)"},{signal:"max(height, 1)"}]}]}},t.getItemHoverArea=(e,a,i,r,o,l,c)=>({name:`${o}_hoverGroup`,type:"group",marks:(0,t.getHoverSizes)().map(((u,g)=>({name:(0,t.getHoverMarkName)(o,g),type:"symbol",from:{data:a},encode:{enter:{shape:{value:n.HOVER_SHAPE},y:(0,t.getYProductionRule)(c,r),fill:{value:"transparent"},stroke:{value:"transparent"},tooltip:s(e,o,!1),size:d(u)},update:{x:(0,t.getXProductionRule)(l,i)}}})))}),t.getHoverMarkName=(e,t)=>`${e}_hover${t}`,t.getHoverSizes=()=>[...new Array(n.HOVER_SHAPE_COUNT)].map(((e,t)=>n.HOVER_SIZE/2**t)),t.getHoverMarkNames=e=>[...new Array(n.HOVER_SHAPE_COUNT)].map(((a,n)=>(0,t.getHoverMarkName)(e,n)));const d=e=>({signal:`${e} * max(width, 1) / 1000`});t.getMarkOpacity=e=>{const{highlightedItem:a,idKey:i,name:o}=e,l=[n.DEFAULT_OPACITY_RULE];return(0,t.isInteractive)(e)||void 0!==a?((0,r.addHighlightMarkOpacityRules)(l,e),(0,t.hasPopover)(e)?[{test:`!isValid(${n.SELECTED_GROUP}) && ${n.SELECTED_ITEM} && ${n.SELECTED_ITEM} !== datum.${i}`,value:1/n.HIGHLIGHT_CONTRAST_RATIO},Object.assign({test:`isValid(${n.SELECTED_ITEM}) && ${n.SELECTED_ITEM} === datum.${i}`},n.DEFAULT_OPACITY_RULE),{test:`isValid(${n.SELECTED_GROUP}) && ${n.SELECTED_GROUP} === datum.${o}_selectedGroupId`,value:1},{test:`isValid(${n.SELECTED_GROUP}) && ${n.SELECTED_GROUP} !== datum.${o}_selectedGroupId`,value:1/n.HIGHLIGHT_CONTRAST_RATIO},...l]:l):l},t.getInteractiveMarkName=(e,a)=>{var n;return(0,t.isInteractive)(e)||void 0!==e.highlightedItem?a:"trendlines"in e&&(null===(n=e.trendlines)||void 0===n?void 0:n.some((e=>(0,t.isInteractive)(e))))?`${a}Trendline`:void 0}},4447:function(e,t,a){var n=this&&this.__rest||function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.getMetricRangeSignals=t.getMetricRangeData=t.getMetricRangeMark=t.getMetricRangeGroupMarks=t.applyMetricRangeOptionDefaults=t.getMetricRanges=void 0;const i=a(9633),r=a(2923),o=a(2102),l=a(1422),s=a(9679);t.getMetricRanges=e=>e.metricRanges.map(((a,n)=>(0,t.applyMetricRangeOptionDefaults)(a,e.name,n))),t.applyMetricRangeOptionDefaults=(e,t,a)=>{var{chartTooltips:r=[],lineType:o="dashed",lineWidth:l="S",rangeOpacity:s=.2,metric:d=i.DEFAULT_METRIC,displayOnHover:c=!1}=e,u=n(e,["chartTooltips","lineType","lineWidth","rangeOpacity","metric","displayOnHover"]);return Object.assign({chartTooltips:r,lineType:o,lineWidth:l,name:`${t}MetricRange${a}`,rangeOpacity:s,metric:d,displayOnHover:c},u)},t.getMetricRangeGroupMarks=e=>{const{color:a,lineType:n}=e,{facets:r}=(0,s.getFacetsFromOptions)({color:a,lineType:n}),o=[],l=(0,t.getMetricRanges)(e);for(const a of l){const{displayOnHover:n,name:l}=a,s=n?`${l}_highlightedData`:i.FILTERED_TABLE;o.push({name:`${l}_group`,type:"group",clip:!0,from:{facet:{name:`${l}_facet`,data:s,groupby:r}},marks:(0,t.getMetricRangeMark)(e,a)})}return o},t.getMetricRangeMark=(e,t)=>{const a={name:`${t.name}_area`,color:e.color,colorScheme:e.colorScheme,opacity:t.rangeOpacity,metricStart:t.metricStart,metricEnd:t.metricEnd,isStacked:!1,scaleType:"time",dimension:e.dimension,isMetricRange:!0,parentName:e.name,displayOnHover:t.displayOnHover},n=Object.assign(Object.assign({},e),{name:`${t.name}_line`,color:t.color?{value:t.color}:e.color,metric:t.metric,lineType:{value:t.lineType},lineWidth:{value:t.lineWidth},displayOnHover:t.displayOnHover}),i=`${t.name}_facet`;return[(0,o.getLineMark)(n,i),(0,r.getAreaMark)(a,i)]},t.getMetricRangeData=e=>{const a=[],n=(0,t.getMetricRanges)(e);for(const e of n){const{displayOnHover:t,name:n}=e;t&&a.push({name:`${n}_highlightedData`,source:i.FILTERED_TABLE,transform:[{type:"filter",expr:`isValid(${i.HIGHLIGHTED_SERIES}) && ${i.HIGHLIGHTED_SERIES} === datum.${i.SERIES_ID} || isValid(${i.SELECTED_SERIES}) && ${i.SELECTED_SERIES} === datum.${i.SERIES_ID}`}]})}return a},t.getMetricRangeSignals=e=>{const a=[],{name:n}=e;return(0,t.getMetricRanges)(e).length&&(0,l.addHighlightedSeriesSignalEvents)(a,`${n}_voronoi`,2),a}},9036:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getOrdinalScale=t.getScaleName=t.getBandPadding=t.getPadding=t.getDefaultScale=t.generateScale=t.addFieldToFacetScaleDomain=t.getMetricScale=t.addMetricScale=t.addContinuousDimensionScale=t.addDomainFields=t.getScaleIndexByName=t.getScaleIndexByType=void 0;const n=a(2812),i=a(9633),r=a(8365),o=a(9679);t.getScaleIndexByType=(e,a,n,i)=>{const o=i||(0,r.toCamelCase)(`${n} ${a}`);let l=e.findIndex((e=>e.name===o));return-1===l&&(l=e.length,e.push((0,t.generateScale)(a,n,{name:o}))),l},t.getScaleIndexByName=(e,t,a)=>{let n=e.findIndex((e=>e.name===t));return-1===n&&(n=e.length,e.push({name:t,type:a})),n},t.addDomainFields=(0,n.produce)(((e,t)=>(t.forEach((t=>{s(e.domain)?e.domain.fields.includes(t)||e.domain.fields.push(t):e.domain={data:i.TABLE,fields:[t]}})),e))),t.addContinuousDimensionScale=(e,{scaleType:a,dimension:n,padding:i})=>{const r=(0,t.getScaleIndexByType)(e,a,"x"),s=[(0,o.getDimensionField)(n,a)];e[r]=(0,t.addDomainFields)(e[r],s),void 0!==i&&(e[r]=l(e[r],i))};const l=(0,n.produce)(((e,t)=>{"padding"in e&&(e.padding=t),"paddingOuter"in e&&(e.paddingOuter=t)}));t.addMetricScale=(e,a,n="y",i)=>{const r=(0,t.getScaleIndexByType)(e,"linear",n,i);e[r]=(0,t.addDomainFields)(e[r],a)},t.getMetricScale=(e,a,n)=>{let i=(0,t.getDefaultScale)("linear",a,n);return i=(0,t.addDomainFields)(i,e),i},t.addFieldToFacetScaleDomain=(e,a,n)=>{if("string"==typeof n||Array.isArray(n)&&n.length){const i=(0,t.getScaleIndexByName)(e,a),r=Array.isArray(n)?n[0]:n;e[i]=(0,t.addDomainFields)(e[i],[r])}},t.generateScale=(e,a,n)=>Object.assign(Object.assign({},(0,t.getDefaultScale)(e,a)),n),t.getDefaultScale=(e,a,n="vertical")=>{const o=a==={vertical:"x",horizontal:"y"}[n],l=Object.assign({name:(0,r.toCamelCase)(`${a} ${e}`),type:e,range:"x"===a?"width":"height",domain:{data:i.FILTERED_TABLE,fields:[]}},o?(0,t.getPadding)(e):{});if("ordinal"===l.type){const{name:e,type:t,domain:a}=l;return{name:e,type:t,domain:a}}return"linear"!==l.type||o?l:Object.assign(Object.assign({},l),{nice:!0,zero:!0})},t.getPadding=e=>{switch(e){case"band":{const{paddingInner:e,paddingOuter:a}=(0,t.getBandPadding)(i.PADDING_RATIO);return{paddingInner:e,paddingOuter:a}}case"linear":case"time":return{padding:i.LINEAR_PADDING};case"point":return{paddingOuter:i.DISCRETE_PADDING};default:return{}}},t.getBandPadding=(e,t)=>{const a=e;return{paddingInner:a,paddingOuter:void 0===t?i.DISCRETE_PADDING-(1-a)/2:t}},t.getScaleName=(e,t)=>(0,r.toCamelCase)(`${e} ${t}`),t.getOrdinalScale=(e,t)=>({name:e,type:"ordinal",range:t,domain:{data:i.TABLE,fields:[]}});const s=e=>Boolean(e&&!Array.isArray(e)&&"data"in e&&"fields"in e)},7656:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSelectRingSize=t.getScatterHoverMarks=t.getOpacity=t.getScatterMark=t.addScatterMarks=void 0;const n=a(2812),i=a(9633),r=a(1274),o=a(795),l=a(6924),s=a(1351),d=a(4189);t.addScatterMarks=(0,n.produce)(((e,a)=>{const{name:n}=a,i={name:`${n}_group`,type:"group",marks:[(0,t.getScatterMark)(a),...(0,t.getScatterHoverMarks)(a),...c(a)]};e.push(...(0,s.getScatterPathMarks)(a)),e.push(i),e.push(...(0,d.getTrendlineMarks)(a))})),t.getScatterMark=e=>{const{color:a,colorScaleType:n,colorScheme:r,dimension:o,dimensionScaleType:s,lineType:d,lineWidth:c,metric:u,name:g,opacity:m,size:p}=e;return{name:g,description:g,type:"symbol",from:{data:i.FILTERED_TABLE},encode:{enter:{blend:{value:"light"===r?"multiply":"screen"},fill:(0,l.getColorProductionRule)(a,r,n),fillOpacity:(0,l.getOpacityProductionRule)(m),shape:{value:"circle"},size:(0,l.getSymbolSizeProductionRule)(p),strokeDash:(0,l.getStrokeDashProductionRule)(d),strokeWidth:(0,l.getLineWidthProductionRule)(c),stroke:(0,l.getColorProductionRule)(a,r,n)},update:{opacity:(0,t.getOpacity)(e),x:(0,l.getXProductionRule)(s,o),y:{scale:"yLinear",field:u}}}}},t.getOpacity=e=>{const{highlightedItem:t,idKey:a}=e;if(!(0,l.isInteractive)(e)&&void 0===t)return[i.DEFAULT_OPACITY_RULE];const n=1/i.HIGHLIGHT_CONTRAST_RATIO,r=[];return(0,o.addHighlightMarkOpacityRules)(r,e),(0,l.hasPopover)(e)&&r.push({test:`isValid(${i.SELECTED_ITEM}) && ${i.SELECTED_ITEM} !== datum.${a}`,value:n}),[...r,i.DEFAULT_OPACITY_RULE]},t.getScatterHoverMarks=e=>{const{dimension:t,dimensionScaleType:a,highlightedItem:n,metric:r,name:o}=e;return(0,l.isInteractive)(e)||void 0!==n?[(0,l.getPointsForVoronoi)(`${i.FILTERED_TABLE}ForTooltip`,t,r,o,a),(0,l.getVoronoiPath)(e,`${o}_pointsForVoronoi`)]:[]};const c=e=>{const{dimension:a,dimensionScaleType:n,metric:i,name:o,size:s}=e;return(0,l.hasPopover)(e)?[{name:`${o}_selectRing`,type:"symbol",from:{data:`${o}_selectedData`},encode:{enter:{fill:{value:"transparent"},shape:{value:"circle"},size:(0,t.getSelectRingSize)(s),strokeWidth:{value:2},stroke:{value:r.spectrumColors.light["static-blue"]}},update:{x:(0,l.getXProductionRule)(n,a),y:{scale:"yLinear",field:i}}}}]:[]};t.getSelectRingSize=e=>{const t=(0,l.getSymbolSizeProductionRule)(e);return"value"in t&&"number"==typeof t.value?{value:Math.pow(Math.sqrt(t.value)+4,2)}:"scale"in t&&"field"in t?{signal:`pow(sqrt(scale('${t.scale}', datum.${t.field})) + 4, 2)`}:t}},9780:function(e,t,a){var n=this&&this.__rest||function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.setScales=t.addSignals=t.addData=t.addScatter=void 0;const i=a(2812),r=a(9633),o=a(8365),l=a(795),s=a(7441),d=a(6924),c=a(9036),u=a(141),g=a(1422),m=a(4189),p=a(7656);t.addScatter=(0,i.produce)(((e,a)=>{var i,l,s,c,{chartPopovers:u=[],chartTooltips:g=[],color:m={value:"categorical-100"},colorScaleType:h="ordinal",colorScheme:f=r.DEFAULT_COLOR_SCHEME,dimension:y=r.DEFAULT_LINEAR_DIMENSION,dimensionScaleType:S=r.DEFAULT_DIMENSION_SCALE_TYPE,index:T=0,lineType:b={value:"solid"},lineWidth:v={value:0},metric:E=r.DEFAULT_METRIC,name:_,opacity:O={value:1},scatterPaths:L=[],size:$={value:"M"},trendlines:A=[]}=a,D=n(a,["chartPopovers","chartTooltips","color","colorScaleType","colorScheme","dimension","dimensionScaleType","index","lineType","lineWidth","metric","name","opacity","scatterPaths","size","trendlines"]);const I=(0,o.toCamelCase)(_||`scatter${T}`),P=Object.assign({chartPopovers:u,chartTooltips:g,color:m,colorScaleType:h,colorScheme:f,dimension:y,dimensionScaleType:S,index:T,interactiveMarkName:(0,d.getInteractiveMarkName)({chartPopovers:u,chartTooltips:g,highlightedItem:D.highlightedItem,trendlines:A},I),lineType:b,lineWidth:v,metric:E,name:I,opacity:O,scatterPaths:L,size:$,trendlines:A},D);e.data=(0,t.addData)(null!==(i=e.data)&&void 0!==i?i:[],P),e.signals=(0,t.addSignals)(null!==(l=e.signals)&&void 0!==l?l:[],P),e.scales=(0,t.setScales)(null!==(s=e.scales)&&void 0!==s?s:[],P),e.marks=(0,p.addScatterMarks)(null!==(c=e.marks)&&void 0!==c?c:[],P)})),t.addData=(0,i.produce)(((e,t)=>{var a;const{chartTooltips:n,dimension:i,dimensionScaleType:o,highlightedItem:c,idKey:u,name:g}=t;if("time"===o){const t=(0,s.getTableData)(e);t.transform=(0,s.addTimeTransform)(null!==(a=t.transform)&&void 0!==a?a:[],i)}((0,d.isInteractive)(t)||void 0!==c)&&e.push((0,s.getFilteredTooltipData)(n)),(0,d.hasPopover)(t)&&e.push({name:`${g}_selectedData`,source:r.FILTERED_TABLE,transform:[{type:"filter",expr:`${r.SELECTED_ITEM} === datum.${u}`}]}),(0,l.addTooltipData)(e,t),(0,m.addTrendlineData)(e,t)})),t.addSignals=(0,i.produce)(((e,t)=>{const{idKey:a,name:n}=t;(0,m.setTrendlineSignals)(e,t),(0,d.isInteractive)(t)&&((0,g.addHighlightedItemSignalEvents)(e,`${n}_voronoi`,a,2),(0,l.addTooltipSignals)(e,t))})),t.setScales=(0,i.produce)(((e,t)=>{const{color:a,colorScaleType:n,dimension:i,dimensionScaleType:o,lineType:l,lineWidth:s,metric:d,opacity:g,size:p}=t;(0,c.addContinuousDimensionScale)(e,{scaleType:o,dimension:i}),(0,c.addMetricScale)(e,[d]),"linear"===n?(0,c.addFieldToFacetScaleDomain)(e,r.LINEAR_COLOR_SCALE,a):(0,c.addFieldToFacetScaleDomain)(e,r.COLOR_SCALE,a),(0,c.addFieldToFacetScaleDomain)(e,r.LINE_TYPE_SCALE,l),(0,c.addFieldToFacetScaleDomain)(e,r.LINE_WIDTH_SCALE,s),(0,c.addFieldToFacetScaleDomain)(e,r.OPACITY_SCALE,g),(0,c.addFieldToFacetScaleDomain)(e,r.SYMBOL_SIZE_SCALE,p),(0,u.setScatterPathScales)(e,t),e.push(...(0,m.getTrendlineScales)(t))}))},141:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var i=Object.getOwnPropertyDescriptor(t,a);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,i)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),i=this&&this.__exportStar||function(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||n(t,e,a)};Object.defineProperty(t,"__esModule",{value:!0}),i(a(1351),t)},1351:function(e,t,a){var n=this&&this.__rest||function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.getPathWidth=t.getOpacity=t.getScatterPathTrailMark=t.getScatterPathMarks=t.setScatterPathScales=t.getScatterPaths=t.getScatterPathSpecOptions=void 0;const i=a(9633),r=a(1274),o=a(6924),l=a(9036),s=a(9679);t.getScatterPathSpecOptions=(e,t,a)=>{var{color:i="gray-500",groupBy:r,pathWidth:o={value:"M"},opacity:l=.5}=e,d=n(e,["color","groupBy","pathWidth","opacity"]),c=a.color,u=a.colorScheme,g=a.dimension,m=a.dimensionScaleType,p=a.lineType,h=a.metric,f=a.name,y=a.opacity,S=a.size;const{facets:T}=(0,s.getFacetsFromOptions)({color:c,lineType:p,size:S,opacity:y});return Object.assign({color:i,colorScheme:u,dimension:g,dimensionScaleType:m,groupBy:null!=r?r:T,metric:h,index:t,pathWidth:o,name:`${f}Path${t}`,opacity:l},d)},t.getScatterPaths=e=>e.scatterPaths.map(((a,n)=>(0,t.getScatterPathSpecOptions)(a,n,e))),t.setScatterPathScales=(e,a)=>{(0,t.getScatterPaths)(a).forEach((t=>{(0,l.addFieldToFacetScaleDomain)(e,i.SYMBOL_PATH_WIDTH_SCALE,t.pathWidth)}))},t.getScatterPathMarks=e=>{const a=[];return(0,t.getScatterPaths)(e).forEach((e=>{const{groupBy:n,name:r}=e;a.push({name:`${r}_group`,type:"group",from:{facet:{name:`${r}_facet`,data:i.FILTERED_TABLE,groupby:n}},marks:[(0,t.getScatterPathTrailMark)(e)]})})),a},t.getScatterPathTrailMark=({color:e,colorScheme:a,dimension:n,dimensionScaleType:i,pathWidth:l,metric:s,name:d,opacity:c})=>({name:d,type:"trail",from:{data:`${d}_facet`},encode:{enter:{fill:{value:(0,r.getColorValue)(e,a)},fillOpacity:{value:c},size:(0,t.getPathWidth)(l)},update:{opacity:(0,t.getOpacity)(),x:(0,o.getXProductionRule)(i,n),y:{scale:"yLinear",field:s}}}}),t.getOpacity=()=>{const e=1/i.HIGHLIGHT_CONTRAST_RATIO;return[{test:`isValid(${i.HIGHLIGHTED_SERIES}) || isValid(${i.HIGHLIGHTED_ITEM}) || isValid(${i.SELECTED_SERIES}) || isValid(${i.SELECTED_ITEM})`,value:e},i.DEFAULT_OPACITY_RULE]},t.getPathWidth=e=>"string"==typeof e?{scale:i.SYMBOL_PATH_WIDTH_SCALE,field:e}:{value:(0,s.getLineWidthPixelsFromLineWidth)(e.value)}},1422:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addHighlightedSeriesSignalEvents=t.addHighlightedItemSignalEvents=t.getGenericUpdateSignal=t.getGenericValueSignal=t.getLegendLabelsSeriesSignal=t.getHighlightSignalUpdateExpression=t.addHighlighSignalLegendHoverEvents=t.getControlledHoveredGroupSignal=t.getControlledHoveredIdSignal=t.hasSignalByName=void 0;const n=a(9633);t.hasSignalByName=(e,t)=>e.some((e=>e.name===t)),t.getControlledHoveredIdSignal=e=>({name:`${e}_controlledHoveredId`,value:null,on:[{events:`@${e}:mouseout`,update:"null"}]}),t.getControlledHoveredGroupSignal=e=>({name:`${e}_controlledHoveredGroup`,value:null,on:[{events:`@${e}:mouseout`,update:"null"}]}),t.addHighlighSignalLegendHoverEvents=(e,a,i,r)=>{const o=(null==r?void 0:r.length)?n.HIGHLIGHTED_GROUP:n.HIGHLIGHTED_SERIES,l=e.find((e=>e.name===o));l&&(void 0===l.on&&(l.on=[]),l.on.push({events:`@${a}_legendEntry:mouseover`,update:(0,t.getHighlightSignalUpdateExpression)(a,i,r)},{events:`@${a}_legendEntry:mouseout`,update:"null"}))},t.getHighlightSignalUpdateExpression=(e,t,a)=>{const i=`domain("${e}Entries")[datum.index]`;return t?(null==a?void 0:a.length)?`indexof(pluck(data("${n.FILTERED_TABLE}"),"${e}_highlightGroupId"), ${i}) !== -1 ? ${i} : null`:`indexof(hiddenSeries, ${i}) === -1 ? ${i} : null`:i},t.getLegendLabelsSeriesSignal=(e=null)=>({name:"legendLabels",value:e}),t.getGenericValueSignal=(e,t=null)=>({name:e,value:t}),t.getGenericUpdateSignal=(e,t)=>({name:e,update:t}),t.addHighlightedItemSignalEvents=(e,t,a,i=1,r)=>{const o=e.find((e=>e.name===n.HIGHLIGHTED_ITEM));if(o){void 0===o.on&&(o.on=[]);const e=new Array(i).fill("datum.").join(""),n=null==r?void 0:r.map((t=>`${e}${t}`)).join(" || ");o.on.push({events:`@${t}:mouseover`,update:(null==r?void 0:r.length)?`(${n}) ? null : ${e}${a}`:`${e}${a}`},{events:`@${t}:mouseout`,update:"null"})}},t.addHighlightedSeriesSignalEvents=(e,t,a=1,i)=>{const r=e.find((e=>e.name===n.HIGHLIGHTED_SERIES));if(r){void 0===r.on&&(r.on=[]);const e=new Array(a).fill("datum.").join(""),o=null==i?void 0:i.map((t=>`${e}${t}`)).join(" || ");r.on.push({events:`@${t}:mouseover`,update:(null==i?void 0:i.length)?`(${o}) ? null : ${e}${n.SERIES_ID}`:`${e}${n.SERIES_ID}`},{events:`@${t}:mouseout`,update:"null"})}}},9679:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getD3FormatSpecifierFromNumberFormat=t.getDimensionField=t.mergeValuesIntoData=t.initializeSpec=t.baseData=t.getSymbolWidthFromRscSymbolSize=t.getVegaSymbolSizeFromRscSymbolSize=t.getPathFromIcon=t.getPathFromSymbolShape=t.getLineWidthPixelsFromLineWidth=t.getStrokeDashFromLineType=t.getFacetsFromScales=t.getFacetsFromOptions=void 0;const n=a(9633),i=a(1274);t.getFacetsFromOptions=({color:e,lineType:t,opacity:a,size:n})=>{let i=[e,t,a,n].map((e=>Array.isArray(e)?e[0]:e)).filter((e=>"string"==typeof e));i=[...new Set(i)];let r=[e,t,a].map((e=>Array.isArray(e)?e[1]:void 0)).filter((e=>"string"==typeof e));return r=[...new Set(r)],{facets:i,secondaryFacets:r}},t.getFacetsFromScales=(e=[])=>{const t=[n.COLOR_SCALE,n.LINE_TYPE_SCALE,n.OPACITY_SCALE,"secondaryColor","secondaryLineType","secondaryOpacity"].reduce(((t,a)=>{const n=e.find((e=>e.name===a));return(null==n?void 0:n.domain)&&"fields"in n.domain&&n.domain.fields.length?[...t,n.domain.fields[0].toString()]:t}),[]);return[...new Set(t)]},t.getStrokeDashFromLineType=e=>{if(Array.isArray(e))return e;switch(e){case"dashed":return[7,4];case"dotted":return[2,3];case"dotDash":return[2,3,7,4];case"shortDash":return[3,4];case"longDash":return[11,4];case"twoDash":return[5,2,11,2];default:return[]}},t.getLineWidthPixelsFromLineWidth=e=>{if("number"==typeof e)return e;switch(e){case"XS":return 1;case"S":return 1.5;case"L":return 3;case"XL":return 4;default:return 2}},t.getPathFromSymbolShape=e=>"rounded-square"===e?n.ROUNDED_SQUARE_PATH:e,t.getPathFromIcon=e=>({date:n.DATE_PATH,sentimentNegative:n.SENTIMENT_NEGATIVE_PATH,sentimentNeutral:n.SENTIMENT_NEUTRAL_PATH,sentimentPositive:n.SENTIMENT_POSITIVE_PATH}[e]||e),t.getVegaSymbolSizeFromRscSymbolSize=e=>Math.pow((0,t.getSymbolWidthFromRscSymbolSize)(e),2),t.getSymbolWidthFromRscSymbolSize=e=>{if("number"==typeof e)return e;switch(e){case"XS":return 6;case"S":return 8;case"L":return 12;case"XL":return 16;default:return 10}},t.baseData=[{name:n.TABLE,values:[],transform:[{type:"identifier",as:n.MARK_ID}]},{name:n.FILTERED_TABLE,source:n.TABLE}],t.initializeSpec=(e={},a={})=>{const{backgroundColor:n,colorScheme:r="light",description:o,title:l}=a,s={title:l||void 0,description:o,autosize:{type:"fit",contains:"padding",resize:!0},data:t.baseData,background:n?(0,i.getColorValue)(n,r):void 0};return Object.assign(Object.assign({},s),e||{})},t.mergeValuesIntoData=(e,t)=>e.map((e=>{const a=t[e.name];return a&&(e.values=a),e})),t.getDimensionField=(e,t)=>"time"===t?n.DEFAULT_TRANSFORMED_TIME_DIMENSION:e,t.getD3FormatSpecifierFromNumberFormat=e=>{switch(e){case"currency":return"$,.2f";case"standardNumber":return",";default:return e}}},4563:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTextNumberFormat=void 0;const n=a(9679);t.getTextNumberFormat=(e,t="value",a,i)=>{const r=`isNumber(datum['${t}'])`;return"shortNumber"===e?[{test:`${r} && abs(datum['${t}']) >= 1000`,signal:`upper(replace(format(datum['${t}'], '.3~s'), /(\\d+)G/, '$1B'))`}]:"shortCurrency"===e?[{test:`${r} && abs(datum['${t}']) >= 1000`,signal:`upper(replace(format(datum['${t}'], '$.3~s'), /(\\d+)G/, '$1B'))`},{test:r,signal:`format(datum['${t}'], '$')`}]:i&&a?[{test:r,signal:`formatLocaleCurrency(datum, "${a}", "${i}", "${e}")`}]:[{test:r,signal:`format(datum['${t}'], '${(0,n.getD3FormatSpecifierFromNumberFormat)(e)}')`}]}},6120:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addTitle=void 0;const n=a(2812),i=a(9633);t.addTitle=(0,n.produce)(((e,{text:t,fontWeight:a=i.DEFAULT_TITLE_FONT_WEIGHT,position:n="middle",orient:r="top"})=>(e.title={text:t,fontWeight:a,anchor:n,frame:"group",orient:r},e)))},4189:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var i=Object.getOwnPropertyDescriptor(t,a);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,i)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),i=this&&this.__exportStar||function(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||n(t,e,a)};Object.defineProperty(t,"__esModule",{value:!0}),i(a(2663),t),i(a(8260),t),i(a(5875),t),i(a(2795),t)},1621:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTrendlineParamLookupTransform=t.getTrendlineParamFormulaTransforms=t.getTrendlineDimensionRangeTransforms=t.getSortTransform=t.getRegressionExtentTransform=t.getNormalizedDimensionTransform=t.getWindowTransform=t.getRegressionTransform=t.getAggregateTransform=void 0;const n=a(9633),i=a(9679),r=a(7687);t.getAggregateTransform=(e,{method:t,trendlineDimension:a,trendlineMetric:r},o)=>{const{color:l,lineType:s}=e,{facets:d}=(0,i.getFacetsFromOptions)({color:l,lineType:s}),c={average:"mean",median:"median"};return o?{type:"aggregate",groupby:d,ops:[c[t],"min","max"],fields:[r,a,a],as:[n.TRENDLINE_VALUE,`${a}Min`,`${a}Max`]}:{type:"joinaggregate",groupby:d,ops:[c[t]],fields:[r],as:[n.TRENDLINE_VALUE]}},t.getRegressionTransform=(e,t,a)=>{const{color:o,lineType:l}=e,{dimensionExtent:s,isDimensionNormalized:d,method:c,name:u,trendlineDimension:g,trendlineMetric:m}=t,{facets:p}=(0,i.getFacetsFromOptions)({color:o,lineType:l});let h,f;switch(c){case"exponential":h="exp";break;case"logarithmic":h="log";break;case"power":h="pow";break;default:f=(0,r.getPolynomialOrder)(c),h="poly"}return{type:"regression",method:h,order:f,groupby:p,x:g,y:m,as:a?[g,n.TRENDLINE_VALUE]:void 0,params:!a,extent:a?(0,r.getRegressionExtent)(s,u,d):void 0}},t.getWindowTransform=(e,{method:t,trendlineMetric:a})=>{const r=parseInt(t.split("-")[1]),{color:o,lineType:l}=e,{facets:s}=(0,i.getFacetsFromOptions)({color:o,lineType:l});if(isNaN(r)||r<1)throw new Error(`Invalid moving average frame width: ${r}, frame width must be an integer greater than 0`);return{type:"window",ops:["mean"],groupby:s,fields:[a],as:[n.TRENDLINE_VALUE],frame:[r-1,0]}},t.getNormalizedDimensionTransform=e=>[{type:"joinaggregate",fields:[e],as:[`${e}Min`],ops:["min"]},{type:"formula",expr:`(datum.${e} - datum.${e}Min + ${n.MS_PER_DAY}) / ${n.MS_PER_DAY}`,as:`${e}Normalized`}],t.getRegressionExtentTransform=(e,t)=>({type:"extent",field:e,signal:`${t}_extent`}),t.getSortTransform=e=>({type:"collect",sort:{field:e}}),t.getTrendlineDimensionRangeTransforms=(e,t)=>{const a=[];return null!==t[0]&&a.push(`datum.${e} >= ${t[0]}`),null!==t[1]&&a.push(`datum.${e} <= ${t[1]}`),a.length?[{type:"filter",expr:a.join(" && ")}]:[]},t.getTrendlineParamFormulaTransforms=(e,t)=>{let a="";if((0,r.isPolynomialMethod)(t)){const n=(0,r.getPolynomialOrder)(t);a=["datum.coef[0]",...Array(n).fill(0).map(((t,a)=>`datum.coef[${a+1}] * pow(datum.${e}, ${a+1})`))].join(" + ")}else"exponential"===t?a=`datum.coef[0] + exp(datum.coef[1] * datum.${e})`:"logarithmic"===t?a=`datum.coef[0] + datum.coef[1] * log(datum.${e})`:"power"===t&&(a=`datum.coef[0] * pow(datum.${e}, datum.coef[1])`);return a?[{type:"formula",expr:a,as:n.TRENDLINE_VALUE}]:[]},t.getTrendlineParamLookupTransform=({color:e,lineType:t},{name:a})=>{const{facets:n}=(0,i.getFacetsFromOptions)({color:e,lineType:t});return{type:"lookup",from:`${a}_params`,key:"keys",fields:n,values:["coef"]}}},2663:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTrendlineDisplayOnHoverData=t.addTableDataTransforms=t.getTrendlineStatisticalTransforms=t.getRegressionTrendlineData=t.getAggregateTrendlineData=t.getTrendlineData=t.addTrendlineData=void 0;const n=a(2812),i=a(9633),r=a(7441),o=a(6924),l=a(9679),s=a(1621),d=a(7687);t.addTrendlineData=(e,a)=>{var n;e.push(...(0,t.getTrendlineData)(a));const i=(0,r.getTableData)(e);i.transform=(0,t.addTableDataTransforms)(null!==(n=i.transform)&&void 0!==n?n:[],a)},t.getTrendlineData=e=>{const a=[],{color:n,idKey:i,lineType:r,name:s}=e,g=(0,d.getTrendlines)(e),m={name:`${s}_allTrendlineData`,source:[]};for(const i of g){const{displayOnHover:s,method:u,name:g}=i,{facets:p}=(0,l.getFacetsFromOptions)({color:n,lineType:r});(0,d.isRegressionMethod)(u)?a.push(...(0,t.getRegressionTrendlineData)(e,i,p)):(0,d.isAggregateMethod)(u)?a.push(...(0,t.getAggregateTrendlineData)(e,i,p)):(0,d.isWindowMethod)(u)&&a.push(c(e,i)),s&&a.push((0,t.getTrendlineDisplayOnHoverData)(g,u)),(0,o.isInteractive)(i)&&m.source.push(`${g}_data`)}return g.some((e=>(0,o.isInteractive)(e)))&&(a.push(m),a.push(u(s,i))),a},t.getAggregateTrendlineData=(e,a,n)=>{const l=[],{dimensionRange:d,name:c,trendlineDimension:u}=a,m=(0,s.getTrendlineDimensionRangeTransforms)(u,d);return l.push({name:`${c}_highResolutionData`,source:i.FILTERED_TABLE,transform:[...g(a.excludeDataKeys),...m,...(0,t.getTrendlineStatisticalTransforms)(e,a,!0),...(0,r.getSeriesIdTransform)(n)]}),(0,o.isInteractive)(a)&&l.push({name:`${c}_data`,source:i.FILTERED_TABLE,transform:[...m,...(0,t.getTrendlineStatisticalTransforms)(e,a,!1)]}),l},t.getRegressionTrendlineData=(e,a,n)=>{const l=[],{dimension:c,metric:u}=e,{dimensionRange:m,method:p,name:h,orientation:f,trendlineDimension:y}=a,{trendlineDimension:S}=(0,d.getTrendlineDimensionMetric)(c,u,f,!1),T=(0,s.getTrendlineDimensionRangeTransforms)(S,m);return l.push({name:`${h}_highResolutionData`,source:i.FILTERED_TABLE,transform:[...g(a.excludeDataKeys),...T,...(0,t.getTrendlineStatisticalTransforms)(e,a,!0),...(0,r.getSeriesIdTransform)(n)]}),(0,o.isInteractive)(a)&&l.push({name:`${h}_params`,source:i.FILTERED_TABLE,transform:[...T,...(0,t.getTrendlineStatisticalTransforms)(e,a,!1)]},{name:`${h}_data`,source:i.FILTERED_TABLE,transform:[...T,(0,s.getTrendlineParamLookupTransform)(e,a),...(0,s.getTrendlineParamFormulaTransforms)(y,p)]}),l};const c=(e,a)=>({name:`${a.name}_data`,source:i.FILTERED_TABLE,transform:[...g(a.excludeDataKeys),...(0,t.getTrendlineStatisticalTransforms)(e,a,!1),...(0,s.getTrendlineDimensionRangeTransforms)(e.dimension,a.dimensionRange)]}),u=(e,t)=>({name:`${e}Trendline_highlightedData`,source:`${e}_allTrendlineData`,transform:[{type:"filter",expr:`${i.SELECTED_ITEM} === datum.${t} || !isValid(${i.SELECTED_ITEM}) && (isArray(${i.HIGHLIGHTED_ITEM}) && indexof(${i.HIGHLIGHTED_ITEM}, datum.${t}) || ${i.HIGHLIGHTED_ITEM} === datum.${t})`}]});t.getTrendlineStatisticalTransforms=(e,t,a)=>{const{method:n,trendlineDimension:i}=t;return(0,d.isAggregateMethod)(n)?[(0,s.getAggregateTransform)(e,t,a)]:(0,d.isRegressionMethod)(n)?[(0,s.getRegressionTransform)(e,t,a)]:(0,d.isWindowMethod)(n)?[(0,s.getSortTransform)(i),(0,s.getWindowTransform)(e,t)]:[]},t.addTableDataTransforms=(0,n.produce)(((e,t)=>{const{dimension:a,metric:n}=t,i=(0,d.getTrendlines)(t);for(const{isDimensionNormalized:t,method:r,name:o,orientation:l,trendlineDimension:c}of i)if((0,d.isRegressionMethod)(r)){const{trendlineDimension:i}=(0,d.getTrendlineDimensionMetric)(a,n,l,!1);t&&(e.some((e=>"as"in e&&e.as===`${i}Normalized`))||e.push(...(0,s.getNormalizedDimensionTransform)(i))),e.push((0,s.getRegressionExtentTransform)(c,o))}})),t.getTrendlineDisplayOnHoverData=(e,t)=>({name:`${e}_highlightedData`,source:(0,d.isWindowMethod)(t)?`${e}_data`:`${e}_highResolutionData`,transform:[{type:"filter",expr:`datum.${i.SERIES_ID} === ${i.HIGHLIGHTED_SERIES} || datum.${i.SERIES_ID} === ${i.SELECTED_SERIES}`}]});const g=e=>{var t;return null!==(t=null==e?void 0:e.map((e=>({type:"filter",expr:`!datum.${e}`}))))&&void 0!==t?t:[]}},8260:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getLineXProductionRule=t.getLineYProductionRule=t.getTrendlineLineMark=t.getEndDimensionExtentProductionRule=t.getStartDimensionExtentProductionRule=t.getRuleXEncodings=t.getRuleYEncodings=t.getTrendlineRuleMark=t.getTrendlineMarks=void 0;const n=a(9633),i=a(2102),r=a(6924),o=a(9036),l=a(9679),s=a(3752),d=a(7687);t.getTrendlineMarks=e=>{const{color:a,lineType:n}=e,{facets:i}=(0,l.getFacetsFromOptions)({color:a,lineType:n}),o=[],g=(0,d.getTrendlines)(e);for(const a of g){const{displayOnHover:n,method:r,name:l}=a;if((0,d.isAggregateMethod)(r))o.push((0,t.getTrendlineRuleMark)(e,a));else{const s=c(l,r,n);o.push({name:`${l}_group`,type:"group",clip:!0,from:{facet:{name:`${l}_facet`,data:s,groupby:i}},marks:[(0,t.getTrendlineLineMark)(e,a)]})}o.push(...(0,s.getTrendlineAnnotationMarks)(a,e.name))}return g.some((e=>(0,r.hasTooltip)(e)))&&o.push(u(e,g.some((e=>e.highlightRawPoint)))),o};const c=(e,t,a)=>a?`${e}_highlightedData`:(0,d.isRegressionMethod)(t)?`${e}_highResolutionData`:`${e}_data`;t.getTrendlineRuleMark=(e,a)=>{const{colorScheme:n}=e,{dimensionExtent:o,dimensionScaleType:l,displayOnHover:s,lineType:d,lineWidth:c,name:u,orientation:m,trendlineColor:p,trendlineDimension:h}=a;return{name:u,type:"rule",clip:!0,from:{data:s?`${u}_highlightedData`:`${u}_highResolutionData`},interactive:!1,encode:{enter:Object.assign(Object.assign({},(0,t.getRuleYEncodings)(o,h,m)),{stroke:(0,r.getColorProductionRule)(p,n),strokeDash:(0,r.getStrokeDashProductionRule)({value:d}),strokeOpacity:(0,r.getOpacityProductionRule)({value:a.opacity}),strokeWidth:(0,r.getLineWidthProductionRule)({value:c})}),update:Object.assign(Object.assign({},(0,t.getRuleXEncodings)(o,h,l,m)),{opacity:(0,i.getLineOpacity)(g(e,a))})}}},t.getRuleYEncodings=(e,a,i)=>"horizontal"===i?{y:{scale:"yLinear",field:n.TRENDLINE_VALUE}}:{y:(0,t.getStartDimensionExtentProductionRule)(e[0],a,"yLinear","y"),y2:(0,t.getEndDimensionExtentProductionRule)(e[1],a,"yLinear","y")},t.getRuleXEncodings=(e,a,i,r)=>{const l=(0,o.getScaleName)("x",i);return"vertical"===r?{x:{scale:l,field:n.TRENDLINE_VALUE}}:{x:(0,t.getStartDimensionExtentProductionRule)(e[0],a,l,"x"),x2:(0,t.getEndDimensionExtentProductionRule)(e[1],a,l,"x")}},t.getStartDimensionExtentProductionRule=(e,t,a,n)=>{switch(e){case null:return{scale:a,field:`${t}Min`};case"domain":return"x"===n?{value:0}:{signal:"height"};default:return{scale:a,value:e}}},t.getEndDimensionExtentProductionRule=(e,t,a,n)=>{switch(e){case null:return{scale:a,field:`${t}Max`};case"domain":return"x"===n?{signal:"width"}:{value:0};default:return{scale:a,value:e}}},t.getTrendlineLineMark=(e,a)=>{const{colorScheme:n}=e,{dimensionScaleType:o,isDimensionNormalized:l,lineType:s,lineWidth:d,name:c,orientation:u,trendlineColor:m,trendlineDimension:p}=a;return{name:c,type:"line",from:{data:`${c}_facet`},interactive:!1,encode:{enter:{y:(0,t.getLineYProductionRule)(p,u),stroke:(0,r.getColorProductionRule)(m,n),strokeDash:(0,r.getStrokeDashProductionRule)({value:s}),strokeOpacity:(0,r.getOpacityProductionRule)({value:a.opacity}),strokeWidth:(0,r.getLineWidthProductionRule)({value:d})},update:{x:(0,t.getLineXProductionRule)(p,o,u,l),opacity:(0,i.getLineOpacity)(g(e,a))}}}},t.getLineYProductionRule=(e,t)=>{const a="yLinear";return"horizontal"===t?{scale:a,field:n.TRENDLINE_VALUE}:{scale:a,field:e}},t.getLineXProductionRule=(e,t,a,i)=>{const r=(0,o.getScaleName)("x",t);return"vertical"===a?{scale:r,field:n.TRENDLINE_VALUE}:i?{scale:"xTrendline",field:e}:{scale:r,field:e}};const u=(e,t)=>{const{metric:a,name:r}=e,o=(0,d.getTrendlines)(e),l=g(e,o[0],{name:`${r}Trendline`,chartTooltips:o.map((e=>e.chartTooltips)).flat(),metric:n.TRENDLINE_VALUE});return{name:`${r}Trendline_hoverGroup`,type:"group",clip:!0,marks:(0,i.getLineHoverMarks)(l,`${r}_allTrendlineData`,t?a:void 0)}},g=(e,{dimensionScaleType:t,displayOnHover:a,lineWidth:n,metric:i,name:r,opacity:o},l)=>{const{color:s,lineType:c}=e,u="popoverMarkName"in e?e.popoverMarkName:void 0,g="staticPoint"in e?e.staticPoint:void 0;return Object.assign(Object.assign(Object.assign({},e),{color:(0,d.getTrendlineColorFromMarkOptions)(s),displayOnHover:a,lineType:(0,d.getTrendlineLineTypeFromMarkOptions)(c),lineWidth:{value:n},metric:i,name:r,opacity:{value:o},popoverMarkName:u,scaleType:t,staticPoint:g}),l)}},5875:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTrendlineScales=void 0;const n=a(9633),i=a(7687);t.getTrendlineScales=e=>{const{dimension:t}=e;return(0,i.hasTrendlineWithNormalizedDimension)(e)?[{name:"xTrendline",type:"linear",range:"width",domain:{data:n.FILTERED_TABLE,fields:[`${t}Normalized`]},padding:n.LINEAR_PADDING,zero:!1,nice:!1}]:[]}},2795:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setTrendlineSignals=void 0;const n=a(6924),i=a(1422),r=a(7687);t.setTrendlineSignals=(e,t)=>{const{idKey:a,name:o}=t,l=(0,r.getTrendlines)(t);l.some((e=>(0,n.hasTooltip)(e)))&&((0,i.addHighlightedItemSignalEvents)(e,`${o}Trendline_voronoi`,a,2),(0,i.addHighlightedSeriesSignalEvents)(e,`${o}Trendline_voronoi`,2)),l.some((e=>e.displayOnHover))&&(0,i.addHighlightedSeriesSignalEvents)(e,`${o}_voronoi`,2)}},7687:function(e,t,a){var n=this&&this.__rest||function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.getTrendlineScaleType=t.getRegressionExtent=t.getPolynomialOrder=t.hasTrendlineWithNormalizedDimension=t.isPolynomialMethod=t.isWindowMethod=t.isRegressionMethod=t.isAggregateMethod=t.normalizeTrendlineDimensionName=t.getTrendlineDimensionMetric=t.getTrendlineLineTypeFromMarkOptions=t.getTrendlineColorFromMarkOptions=t.applyTrendlinePropDefaults=t.getTrendlines=void 0;const i=a(9633);t.getTrendlines=e=>e.trendlines.map(((a,n)=>(0,t.applyTrendlinePropDefaults)(e,a,n))),t.applyTrendlinePropDefaults=(e,a,r)=>{var{chartTooltips:o=[],color:l,dimensionExtent:s,dimensionRange:d=[null,null],displayOnHover:c=!1,highlightRawPoint:u=!1,lineType:g="dashed",lineWidth:m="M",method:p="linear",opacity:h=1,orientation:f="horizontal",trendlineAnnotations:y=[]}=a,S=n(a,["chartTooltips","color","dimensionExtent","dimensionRange","displayOnHover","highlightRawPoint","lineType","lineWidth","method","opacity","orientation","trendlineAnnotations"]);const T=(0,t.getTrendlineScaleType)(e,f),b="time"===T&&(0,t.isRegressionMethod)(p)&&"horizontal"===f,{trendlineDimension:v,trendlineMetric:E}=(0,t.getTrendlineDimensionMetric)(e.dimension,e.metric,f,b),_=l?{value:l}:(0,t.getTrendlineColorFromMarkOptions)(e.color);return Object.assign({chartTooltips:o,colorScheme:e.colorScheme,displayOnHover:c,dimensionExtent:null!=s?s:d,dimensionRange:d,dimensionScaleType:T,highlightRawPoint:u,isDimensionNormalized:b,lineType:g,lineWidth:m,method:p,metric:i.TRENDLINE_VALUE,name:`${e.name}Trendline${r}`,opacity:h,orientation:f,trendlineAnnotations:y,trendlineColor:_,trendlineDimension:v,trendlineMetric:E},S)},t.getTrendlineColorFromMarkOptions=e=>Array.isArray(e)?e[0]:e,t.getTrendlineLineTypeFromMarkOptions=e=>Array.isArray(e)?e[0]:e,t.getTrendlineDimensionMetric=(e,a,n,i)=>"horizontal"===n?{trendlineDimension:(0,t.normalizeTrendlineDimensionName)(e,i),trendlineMetric:a}:{trendlineDimension:a,trendlineMetric:e},t.normalizeTrendlineDimensionName=(e,t)=>t?`${e}Normalized`:e,t.isAggregateMethod=e=>["average","median"].includes(e),t.isRegressionMethod=e=>(0,t.isPolynomialMethod)(e)||["exponential","logarithmic","power"].includes(e),t.isWindowMethod=e=>e.startsWith("movingAverage-"),t.isPolynomialMethod=e=>e.startsWith("polynomial-")||["linear","quadratic"].includes(e),t.hasTrendlineWithNormalizedDimension=e=>(0,t.getTrendlines)(e).some((({dimensionScaleType:e,method:a})=>(0,t.isRegressionMethod)(a)&&"time"===e)),t.getPolynomialOrder=e=>{switch(e){case"linear":return 1;case"quadratic":return 2}const t=parseInt(e.split("-")[1]);if(t<1)throw new Error(`Invalid polynomial order: ${t}, order must be an interger greater than 0`);return t},t.getRegressionExtent=(e,t,a)=>{const n=`${t}_extent`;return{signal:`[${e.map(((e,t)=>{switch(e){case null:return`${n}[${t}]`;case"domain":return`${n}[${t}] ${0===t?"-":"+"} (${n}[1] - ${n}[0]) * 0.3`;default:return a?`(${e} - data('${i.FILTERED_TABLE}')[0].datetimeMin + ${i.MS_PER_DAY}) / ${i.MS_PER_DAY}`:e}})).join(", ")}]`}},t.getTrendlineScaleType=(e,t)=>"vertical"===t?"linear":"scaleType"in e?e.scaleType:e.dimensionScaleType},3752:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var i=Object.getOwnPropertyDescriptor(t,a);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,i)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),i=this&&this.__exportStar||function(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||n(t,e,a)};Object.defineProperty(t,"__esModule",{value:!0}),i(a(2583),t)},2583:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getColorKey=t.getTrendlineAnnotationBadgeMark=t.getTextFill=t.getTrendlineAnnotationTextMark=t.getTrendlineAnnotationPointY=t.getTrendlineAnnotationPointX=t.getTrendlineAnnotationMarks=t.getTrendlineAnnotations=t.getTrendlineAnnotationSpecOptions=void 0;const n=a(9633),i=a(1274),r=a(6924),o=a(9036),l=a(9679),s=a(8260);t.getTrendlineAnnotationSpecOptions=({badge:e=!1,dimensionValue:t="end",numberFormat:a="",prefix:n=""},i,{colorScheme:r,dimensionExtent:o,dimensionScaleType:s,displayOnHover:d,lineWidth:c,orientation:u,trendlineColor:g,trendlineDimension:m,name:p},h)=>({badge:e,colorScheme:r,dimensionValue:t,displayOnHover:d,markName:h,name:`${p}Annotation${i}`,numberFormat:a,prefix:n,trendlineColor:g,trendlineDimension:m,trendlineDimensionExtent:o,trendlineDimensionScaleType:s,trendlineName:p,trendlineOrientation:u,trendlineWidth:(0,l.getLineWidthPixelsFromLineWidth)(c)}),t.getTrendlineAnnotations=(e,a)=>e.trendlineAnnotations.map(((n,i)=>(0,t.getTrendlineAnnotationSpecOptions)(n,i,e,a))),t.getTrendlineAnnotationMarks=(e,a)=>{const n=[];return(0,t.getTrendlineAnnotations)(e,a).forEach((e=>{n.push({name:`${e.name}_group`,type:"group",interactive:!1,marks:[d(e),(0,t.getTrendlineAnnotationTextMark)(e),...(0,t.getTrendlineAnnotationBadgeMark)(e)]})})),n};const d=e=>{const{name:a,trendlineName:n,trendlineWidth:i,displayOnHover:r}=e;return{name:`${a}_points`,type:"symbol",from:{data:r?`${n}_highlightedData`:`${n}_highResolutionData`},interactive:!1,encode:{enter:{opacity:{value:0},size:{value:Math.pow(i,2)},x:(0,t.getTrendlineAnnotationPointX)(e),y:(0,t.getTrendlineAnnotationPointY)(e)}}}};t.getTrendlineAnnotationPointX=({dimensionValue:e,trendlineDimension:t,trendlineDimensionExtent:a,trendlineDimensionScaleType:i,trendlineOrientation:r})=>{const l=(0,o.getScaleName)("x",i);if("vertical"===r)return{scale:l,field:n.TRENDLINE_VALUE};switch(e){case"start":return(0,s.getStartDimensionExtentProductionRule)(a[0],t,l,"x");case"end":return(0,s.getEndDimensionExtentProductionRule)(a[1],t,l,"x");default:return{scale:l,value:e}}},t.getTrendlineAnnotationPointY=({dimensionValue:e,trendlineDimension:t,trendlineDimensionExtent:a,trendlineOrientation:i})=>{const r="yLinear";if("horizontal"===i)return{scale:r,field:n.TRENDLINE_VALUE};switch(e){case"start":return(0,s.getStartDimensionExtentProductionRule)(a[0],t,r,"y");case"end":return(0,s.getEndDimensionExtentProductionRule)(a[1],t,r,"y");default:return{scale:r,value:e}}},t.getTrendlineAnnotationTextMark=e=>{const{name:a,numberFormat:i,prefix:r,trendlineName:o,markName:l}=e,s=r?`'${r} ' + `:"",d=(0,t.getTextFill)(Object.assign({},e));return{name:a,type:"text",from:{data:`${a}_points`},zindex:1,interactive:!1,encode:{enter:{text:{signal:`${s}format(datum.datum.${n.TRENDLINE_VALUE}, '${i}')`},fill:d}},transform:[{type:"label",size:{signal:"[width, height]"},avoidMarks:[o,`${l}_group`],offset:[6,6,6,6,8.49,8.49,8.49,8.49],anchor:["top","bottom","right","left","top-right","top-left","bottom-right","bottom-left"]}]}},t.getTextFill=({badge:e,colorScheme:a,trendlineColor:n})=>{if(!e)return;const o=(0,t.getColorKey)(n),l=(0,r.getColorProductionRuleSignalString)(o,a),s=[(0,i.getColorValue)("gray-50",a),(0,i.getColorValue)("gray-900",a)];return[{test:`contrast(${l}, '${s[0]}') >= 4.5`,value:s[0]},{value:s[1]}]},t.getTrendlineAnnotationBadgeMark=({badge:e,colorScheme:a,name:n,trendlineColor:i})=>{if(!e)return[];const o=(0,t.getColorKey)(i,2);return[{name:`${n}_badge`,description:`${n}_badge`,type:"rect",from:{data:`${n}`},interactive:!1,encode:{enter:{cornerRadius:{value:2},fill:(0,r.getColorProductionRule)(o,a),opacity:{field:"opacity"},x:{signal:"datum.bounds.x1 - 3"},x2:{signal:"datum.bounds.x2 + 3"},y:{signal:"datum.bounds.y1 - 3"},y2:{signal:"datum.bounds.y2 + 3"}}}}]},t.getColorKey=(e,t=1)=>"string"==typeof e?`${new Array(t).fill("datum.").join("")}${e}`:e},8191:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},4470:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},9603:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var i=Object.getOwnPropertyDescriptor(t,a);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,i)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),i=this&&this.__exportStar||function(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||n(t,e,a)};Object.defineProperty(t,"__esModule",{value:!0}),i(a(4470),t),i(a(8191),t),i(a(2188),t)},2188:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},6017:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},9030:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},2004:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},8899:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var i=Object.getOwnPropertyDescriptor(t,a);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,i)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),i=this&&this.__exportStar||function(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||n(t,e,a)};Object.defineProperty(t,"__esModule",{value:!0}),i(a(9030),t),i(a(2004),t)},2025:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var i=Object.getOwnPropertyDescriptor(t,a);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,i)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),i=this&&this.__exportStar||function(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||n(t,e,a)};Object.defineProperty(t,"__esModule",{value:!0}),i(a(6017),t),i(a(8016),t),i(a(1217),t),i(a(4623),t),i(a(1917),t),i(a(9603),t),i(a(8899),t),i(a(2964),t)},8016:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},4287:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},7893:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},8979:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},7978:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},6874:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},5768:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},2964:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var i=Object.getOwnPropertyDescriptor(t,a);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,i)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),i=this&&this.__exportStar||function(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||n(t,e,a)};Object.defineProperty(t,"__esModule",{value:!0}),i(a(4287),t),i(a(7893),t),i(a(8979),t),i(a(7978),t),i(a(6874),t),i(a(5768),t),i(a(7816),t),i(a(422),t),i(a(8279),t)},7816:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},422:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},847:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},4721:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},8279:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var i=Object.getOwnPropertyDescriptor(t,a);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,i)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),i=this&&this.__exportStar||function(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||n(t,e,a)};Object.defineProperty(t,"__esModule",{value:!0}),i(a(847),t),i(a(4721),t),i(a(9142),t),i(a(4010),t),i(a(3598),t),i(a(3050),t),i(a(6459),t)},9142:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},4010:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},3598:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},6459:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},3050:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},1917:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=a(9633);n.MARK_ID,n.SERIES_ID,n.TRENDLINE_VALUE,n.GROUP_DATA},1217:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},4623:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},9633:t=>{t.exports=e},1274:e=>{e.exports=t},8365:e=>{e.exports=a}},i={};return function e(t){var a=i[t];if(void 0!==a)return a.exports;var r=i[t]={exports:{}};return n[t].call(r.exports,r,r.exports,e),r.exports}(7783)})()));
//# sourceMappingURL=index.js.map